<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-11-03T22:45:26+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">LeeJellan</title><subtitle>ì•ˆë…•í•˜ì„¸ìš”!ğŸ™‚ IT,ì—¬í–‰,ê¸°íƒ€ ë“± ê¸°ë¡ì„ ë‚¨ê¸°ê¸°ìœ„í•œ ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤ !</subtitle><author><name>LEE JAEHYEOK</name></author><entry><title type="html">TIL) Spring JPA 3 (ë‹¤ëŒ€ë‹¤ / @ManyToOne,@OneToMany)</title><link href="http://localhost:4000/til/2022/11/03/til.html" rel="alternate" type="text/html" title="TIL) Spring JPA 3 (ë‹¤ëŒ€ë‹¤ / @ManyToOne,@OneToMany)" /><published>2022-11-03T00:00:00+09:00</published><updated>2022-11-03T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/11/03/til</id><content type="html" xml:base="http://localhost:4000/til/2022/11/03/til.html"><![CDATA[<p><img src="" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì˜¤ëœë§Œì— ì‹œê°„ê°€ëŠ”ì§€ ëª¨ë¥´ê³  ê³µë¶€í•œ ê²ƒ ê°™ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmTXh7B366xpO46r-jW9QXzgykyRRJY1uS1iFupj0wgGjVU6tOw0-_zdw_jjWyNyLnQdZ12IU54jq9ltbiYTPW-gWDxxmw=w1512-h807" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì–´ì œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ì— ëŒ€í•œ<br />
ì„œë¡œì˜ ê°ì²´ ì°¸ì¡°ê°€ ì´í•´ê°€ì§€ ì•Šì•„ ìƒˆë²½ 3ì‹œê¹Œì§€<br />
ë°¤ì„ ìƒˆì›Œê°€ë©° ê³µë¶€ë¥¼ í–ˆë‹¤.<br />
ì¡¸ë¦¬ê¸°ë„ í–ˆì§€ë§Œ ì•Œê³ ìí•˜ëŠ” ë§ˆìŒì— ì§‘ì¤‘ì´ ì˜¤ëœë§Œì— ì—„ì²­ ëœ ê²ƒ ê°™ë‹¤.</p>

<p>ì–´ì œ ê³µë¶€í–ˆë” ë‹¤ëŒ€ë‹¤(N:M) ê´€ê³„ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì</p>

<hr />

<h3 id="ë‹¤ëŒ€ë‹¤-ê´€ê³„-nm">ë‹¤ëŒ€ë‹¤ ê´€ê³„ (N:M)</h3>
<p>ë‹¤ëŒ€ë‹¤ ê´€ê³„ëŠ” N:Nê´€ê³„ë¼ê³  í•œë‹¤.<br />
ì˜ˆì  ì— RDBMSì—ì„œ ê³µë¶€ í–ˆë˜ ê²ƒ ì²˜ëŸ¼ ì¤‘ê°„ì— í…Œì´ë¸”ì„ í•œê°œ<br />
ë” ë§Œë“¤ì–´ì„œ 1 : N : 1 ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” ë°©ë²•ì´ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQR036vsqkAgtZouiUTcGK0jsHDhCHVUlwfI1dt3W4yY7Z-B7XgMRN-YpiyiMZ6p2eYOlql4ec=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìœ„ì™€ ê°™ì´ ê°„ë‹¨í•œ ì˜ˆì œë¡œ ì†ë‹˜ê³¼, ì£¼ë¬¸ì„ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¡œ ë§µí•‘í•˜ê³  ì‹¶ì„ ê²½ìš°<br />
ì¤‘ê°„ì— Customer_Orderë¼ëŠ” í…Œì´ë¸”ì— ê°ìì˜ ì™¸ë˜í‚¤ë¥¼ ë‘ì–´<br />
ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>ìœ„ì— ê·¸ë¦¼ì²˜ëŸ¼ ì¤‘ê°„ì— í…Œì´ë¸” í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´<br />
ë‘ í…Œì´ë¸”ì˜ IDê°’ì„ ì°¸ì¡°í•˜ë©´ ë˜ëŠ” ë°©ë²•ì´ë‹¤.</p>

<p><br /></p>

<p>ì˜ˆë¥¼ ë“¤ê¸° ìœ„í•´<br />
Coffeeì™€ Order í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì§„í–‰ í•˜ë ¤í•œë‹¤.<br />
ê³ ê°ì´ë¼ëŠ” í´ë˜ìŠ¤ëŠ” ë¹ ì¡Œì§€ë§Œ ê°„ë‹¨í•˜ê²Œ í•˜ê¸°ìœ„í•´<br />
ë‘ê°€ì§€ë§Œ ë§Œë“¤ê³  ì§„í–‰í•´ë³´ì</p>

<h3 id="manytoone-ë‹¨ë°©í–¥">@ManyToOne ë‹¨ë°©í–¥</h3>

<p>CoffeeëŠ” ì»¤í”¼ì˜ ë“±ë¡ì •ë³´ë¼ê³ í•˜ì (ì»¤í”¼ì´ë¦„,ê°€ê²© ë“±)<br />
Orderì€ ì‚¬ìš©ìê°€ ì£¼ë¬¸í•œ ì •ë³´ë¼ê³ í•˜ì (ì£¼ë¬¸ì‹œê°„, ê³ ê°ì´ë¦„ ë“±)<br />
ì„œë¡œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë§ºì–´ ì¤‘ê°„í…Œì´ë¸”ì„ í†µí•´ ê°ì²´ ì°¸ì¡°ë¥¼ í•´ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"COFFEE"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Coffee</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">coffeeId</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">coffeeName</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ORDERS"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">orderId</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createdAt</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">personName</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderCoffee</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">orderCoffeeId</span><span class="o">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"COFFEE_ID"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Coffee</span> <span class="n">coffee</span><span class="o">;</span>

    <span class="nd">@ManyToOne</span>
    <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ORDER_ID"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Order</span> <span class="n">order</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Order - OrderCoffee - Coffee (1:N:1)ìœ¼ë¡œ<br />
ì´ë£¨ì–´ì§„ ê´€ê³„ì´ë‹¤. í˜„ì¬ OrderCoffeeì—ì„œë§Œ<br />
@ManyToOneìœ¼ë¡œ ë‹¤ëŒ€ì¼ë¡œ ì—°ê´€ê´€ê³„ë¥¼ ë§ºê³  ìˆë‹¤.</p>

<p>ì´ë ‡ê²Œ ì„¤ì •ì„ í•  ê²½ìš° <br />
OrderCoffee í…Œì´ë¸”ì• ì„œ coffee,orderì˜ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ì§€ë§Œ<br />
Orderì™€ CoffeeëŠ” ì„œë¡œ ì°¸ì¡°ë¥¼ í•˜ì§€ ëª»í•œë‹¤.</p>

<p>ìœ„ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” OrderCoffee ê°ì²´ íƒ€ì…ìœ¼ë¡œ<br />
Repositoryë¥¼ ë§Œë“¤ì–´ ì €ì¥í•´ì£¼ì–´ì•¼í•œë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OrderCoffeeRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">OrderCoffee</span><span class="o">,</span><span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderCoffeeService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">OrderCoffeeRepository</span> <span class="n">orderCoffeeRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">OrderCoffeeService</span><span class="o">(</span><span class="nc">OrderCoffeeRepository</span> <span class="n">orderCoffeeRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderCoffeeRepository</span> <span class="o">=</span> <span class="n">orderCoffeeRepository</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">OrderCoffee</span> <span class="nf">createOrderCoffee</span><span class="o">(</span><span class="nc">OrderCoffee</span> <span class="n">orderCoffee</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">orderCoffeeRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">orderCoffee</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>OrderCoffee í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ë§Œë“  ê°ì²´ì—<br />
coffee,order ê°ì²´ë¥¼ setterë¡œ ì£¼ì…ì‹œì¼œì¤€ ë‹¤ìŒ<br />
í•´ë‹¹ ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ê°€ì§„  createOrderCoffee ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´<br />
JpaRepositoryë¡œ ì¸í•´ DBì— ê°’ì´ ì €ì¥ë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p>ì´ë ‡ê²Œë˜ë©´ OrderCoffee í…Œì´ë¸”ì—ëŠ” order,coffeì˜ IDê°’ìœ¼ë¡œ ì™¸ë˜í‚¤ë¡œ<br />
ì§€ì •ë˜ì–´ ê°ê° ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSJE-aVzmVTrpdk2WiyCL7gk_eHKfofUIocw4kesvHn-RHofW9VVbBlVPoSn16R7f76yyYRKwKKoPyBtNPZriEfNJwe=w1512-h807" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><br /></p>

<h3 id="manytoone-onetomany-ì–‘ë°©í–¥">@ManyToOne @OneToMany ì–‘ë°©í–¥</h3>

<p><strong>í•˜ì§€ë§Œ !!</strong><br />
ìš°ë¦¬ëŠ” Orderì™€ Coffeeì˜ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë³´ê³  ìˆëŠ”ë°<br />
ìœ„ì™€ ê°™ì´ ì‚¬ìš©í•  ê²½ìš° Orderì—ì„œ Coffeeë¥¼ ì°¸ì¡°í•˜ì§€ ëª»í•˜ê²Œ ë˜ëŠ” ìƒí™©ì´ë‹¤.</p>

<p>ì„œë¡œ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•´ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ORDERS"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">orderId</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createdAt</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">personName</span><span class="o">;</span>

    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"order"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">OrderCoffee</span><span class="o">&gt;</span> <span class="n">orderCoffees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"COFFEE"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Coffee</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">coffeeId</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">coffeeName</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>

    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"coffee"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">OrderCoffee</span><span class="o">&gt;</span> <span class="n">orderCoffees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Orderê³¼ Coffeeë¥¼ @OneToManyë¥¼ ì´ìš©í•´<br />
ì–‘ë°©í–¥ìœ¼ë¡œ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•´ ì£¼ì—ˆë‹¤.</p>

<p>ì´ë ‡ê²Œ ì„¤ì •í•  ê²½ìš° Orderê°€ OrderCoffee ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ê³ <br />
ê·¸ë¡œì¸í•´ OrderCoffeeì—ì„œ Coffeeë¡œ ì°¸ì¡°ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ ìš°ë¦¬ê°€<br />
ë§¤ì¥ì— ì»¤í”¼ê°€ 3ê°œê°€ ë“±ë¡ë˜ì–´ìˆë‹¤ê³ í•´ë³´ì (ì•„ë©”ë¦¬ì¹´ë…¸,ì¹´í˜ë¼ë–¼,í—¤ì´ì¦ë„›ë¼ë–¼)</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQqkAYU_59TIa660ZzyHtDhni-i-ZA6mBu5nz1OJ6KA6ESnFmopbQw8yfMIr85KE2cK10_Q6k6hGGFMOnu54JzpzpE5OQ=w1512-h807" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>Coffee Repositoryë¥¼ ì´ìš©í•´ DBì— ì €ì¥í•œ ëª¨ìŠµì´ë‹¤.</p>

<p>ë‚˜ë¼ëŠ” ì‚¬ëŒì´ 1ê°œì˜ ì£¼ë¬¸ì„ í–ˆëŠ”ë° ë“±ë¡ëœ ì»¤í”¼ì¤‘ ì•„ë©”ë¦¬ì¹´ë…¸ë¥¼ ì£¼ë¬¸í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì<br />
ê·¸ëŸ¬ë©´ Order Controller í•¸ë“¤ëŸ¬ë©”ì„œë“œë¥¼ í†µí•´ POST ì£¼ë¬¸ì„ í•´ì•¼í•  ê²ƒì´ë‹¤.<br />
ë‚˜ë¼ëŠ” ì‚¬ëŒì˜ ì •ë³´ê³¼ ì–´ë–¤ ì»¤í”¼ì¸ì§€ë§Œ ì•Œë©´ ëœë‹¤.<br />
ì¦‰, ì£¼ë¬¸(Order)ì„ í•˜ë©´ OrderCoffee í…Œì´ë¸”ê¹Œì§€ ë§µí•‘ì„ ì‹œì¼œì¤˜ì•¼í•œë‹¤.</p>

<p>ìœ„ì˜ ë‚´ìš©ì„ í† ëŒ€ë¡œ<br />
ì£¼ë¬¸ Controller,Serviceë¥¼ ë§Œë“¤ì—ˆë‹¤.<br />
ì°¨ê·¼ì°¨ê·¼ ì•„ë˜ì—ì„œ í™•ì¸í•´ë³´ì</p>

<p>ìš°ì„  í•¸ë“¤ëŸ¬ ë©”ì„œë“œë¥¼ ë§µí•‘í•´ì¤„ Dtoë¥¼ ë§Œë“¤ì<br />
ìœ„ì—ì„œ ì–˜ê¸°í–ˆë“¯ì´ <strong>ì£¼ë¬¸í•˜ëŠ” ì‚¬ëŒì´ë¦„</strong>ê³¼, <strong>ì»¤í”¼ ëª©ë¡ì˜ ë²ˆí˜¸</strong>ë§Œ ì•Œë©´ ëœë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderPostDto</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">personName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">OrderCoffeeDto</span><span class="o">&gt;</span> <span class="n">orderCoffees</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderCoffeeDto</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">coffeeId</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ì™€ ê°™ì´ Dtoë¥¼ ì‘ì„±í–ˆê³ </p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQTzfqAsa2VbELiYL8VSeeVlzwfyBQO5EJfFNLAmYtp3oWyq9Z09m9MMoRQPlPdPK1nXySnEstsVlb5h3y1PvMGQQ_q=w1512-h807" alt="image" class="align-left" style="max-width: 90%" /></p>

<p>Postmanì„ í†µí•´ API ìš”ì²­ì„ ìœ„ì™€ ê°™ì´ ë³´ë‚´ë©´ ëœë‹¤.<br />
ì´ë ‡ê²Œ ë³´ë‚´ì£¼ì—ˆì„ ê²½ìš° ìš°ë¦¬ëŠ” coffeeId 1ë²ˆ ì¦‰, ì•„ë©”ë¦¬ì¹´ë…¸ë¼ëŠ” ê²ƒì„<br />
ì•Œ ìˆ˜ ìˆê³ , ì£¼ë¬¸í•œì‚¬ëŒì€ â€œì´ì¬í˜â€ì´ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì´ì–´ì„œ Controllerì„ ì‘ì„±í•´ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/orders"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderController</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">OrderService</span> <span class="n">orderService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">OrderController</span><span class="o">(</span><span class="nc">OrderService</span> <span class="n">orderService</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderService</span> <span class="o">=</span> <span class="n">orderService</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">postOrder</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">OrderPostDto</span> <span class="n">orderPostDto</span><span class="o">){</span>

        <span class="nc">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Order</span><span class="o">();</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">OrderCoffee</span><span class="o">&gt;</span> <span class="n">orderCoffees</span> <span class="o">=</span> <span class="n">orderPostDto</span><span class="o">.</span><span class="na">getOrderCoffees</span><span class="o">()</span>
                <span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">object</span> <span class="o">-&gt;</span> <span class="o">{</span>
                    <span class="nc">OrderCoffee</span> <span class="n">orderCoffee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">OrderCoffee</span><span class="o">();</span>
                    <span class="nc">Coffee</span> <span class="n">coffee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Coffee</span><span class="o">();</span>
                    <span class="n">coffee</span><span class="o">.</span><span class="na">setCoffeeId</span><span class="o">(</span><span class="n">object</span><span class="o">.</span><span class="na">getCoffeeId</span><span class="o">());</span>
                    <span class="n">orderCoffee</span><span class="o">.</span><span class="na">setOrder</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
                    <span class="n">orderCoffee</span><span class="o">.</span><span class="na">setCoffee</span><span class="o">(</span><span class="n">coffee</span><span class="o">);</span>
                    <span class="n">order</span><span class="o">.</span><span class="na">getOrderCoffees</span><span class="o">();</span>
                    <span class="k">return</span> <span class="n">orderCoffee</span><span class="o">;</span>
                <span class="o">})</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>

        <span class="n">order</span><span class="o">.</span><span class="na">setPersonName</span><span class="o">(</span><span class="n">orderPostDto</span><span class="o">.</span><span class="na">getPersonName</span><span class="o">());</span>
        <span class="n">order</span><span class="o">.</span><span class="na">setOrderCoffees</span><span class="o">(</span><span class="n">orderCoffees</span><span class="o">);</span>

        <span class="nc">Order</span> <span class="n">result</span> <span class="o">=</span> <span class="n">orderService</span><span class="o">.</span><span class="na">createOrder</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Mapperë¥¼ ì´ìš©í•˜ì§€ ì•Šê³  Controllerì—ë‹¤ê°€ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í–ˆë‹¤.<br />
ì—°ìŠµìš©ìœ¼ë¡œë§Œ í•˜ëŠ” ê²ƒì´ê¸°ì— ì°¸ê³  ë¶€íƒë°”ë€ë‹¤.</p>

<p>ë‚´ìš©ì„ ë³´ë©´</p>
<ol>
  <li>
    <p>Order,Coffee ê°ì²´ë¡œ ìƒˆë¡œ ë§Œë“¤ì–´ ì£¼ê³  ìˆë‹¤.</p>
  </li>
  <li>
    <p>OrderCoffee ê°ì²´ë¥¼ ë§Œë“¤ì–´ order,coffee ê°ì²´ë¥¼ setterë¡œ ì£¼ì…í•˜ê³  ìˆë‹¤.<br />
-&gt; ê·¸ì¤‘ Coffeeê°ì²´ëŠ” Dtoë¡œ ë°›ì€ coffeeIdë¥¼ ë„£ì–´ì„œ ë§Œë“ ë‹¤.</p>
  </li>
  <li>
    <p>OrderCoffee ê°ì²´ë¥¼ Listë¡œ ë°˜í™˜í•´ì¤€ë‹¤.</p>
  </li>
  <li>
    <p>Order ê°ì²´ì˜ í•„ë“œë³€ìˆ˜ì— ê°’ì„ ì£¼ì…í•˜ê³ ìˆë‹¤. <br />
-&gt; ë°˜í™˜í•œ ê°ì²´ë¥¼ Order ê°ì²´ì˜ í•„ë“œë³€ìˆ˜ orderCoffeesì— ì£¼ì…í•´ì£¼ê³  ìˆë‹¤.<br />
-&gt; Dtoë¡œ ë°›ì€ ê°’ì„ personNameì— ì£¼ì…í•´ì£¼ê³  ìˆë‹¤.</p>
  </li>
  <li>
    <p>ìµœì¢… ì ìœ¼ë¡œ ê°’ì´ ì£¼ì…ëœ Order ê°ì²´ë¥¼ Service ë¡œì§ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.</p>
  </li>
</ol>

<p>ì—¬ê¸°ì„œ ì•Œ ìˆ˜ ìˆëŠ” ì ì€<br />
ìš°ë¦¬ê°€ Order í´ë˜ìŠ¤ì— ì–‘ë°©í–¥ìœ¼ë¡œ ì§€ì •í•œ
@OneToMany List<OrderCoffee> orderCoffees  
ê°ì²´ì— OrderCoffee í´ë˜ìŠ¤ì˜ ê°’ë“¤ì´ Listí˜•íƒœë¡œ ì¡´ì¬í•˜ê²Œ ëœë‹¤.</OrderCoffee></p>

<p>Order í´ë˜ìŠ¤ì—ì„œ ë³„ë„ì˜ findOrderCoffee ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ì§€ ì•Šë”ë¼ê³ <br />
OrderCoffeeì˜ Listí™” ë˜ì–´ìˆëŠ” ê°ì²´ë¥¼ ì°¸ì¡°í•˜ì—¬ Coffeeë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ì´ì œ Serviceì™€ Repository ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoffeeService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CoffeeRepository</span> <span class="n">coffeeRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CoffeeService</span><span class="o">(</span><span class="nc">CoffeeRepository</span> <span class="n">coffeeRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">coffeeRepository</span> <span class="o">=</span> <span class="n">coffeeRepository</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Coffee</span> <span class="nf">createCoffee</span><span class="o">(</span><span class="nc">Coffee</span> <span class="n">coffee</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">coffeeRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">coffee</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">OrderRepository</span> <span class="kd">extends</span> <span class="nc">JpaRepository</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ê°„ë‹¨í•˜ê²Œ JpaRepositoryë¥¼ ìƒì†ë°›ì•„ JDBCì™€ ê°™ì´<br />
ì¿¼ë¦¬ë¬¸ì„ ì‘ì„±í•  ìˆ˜ë„ìˆê³  ì •í•´ì§„ ê·œì•½ëŒ€ë¡œ ì¿¼ë¦¬ë¥¼ ë‚ ë¦´ ìˆ˜ë„ ìˆë‹¤.<br />
ê·¸ì¤‘ .save();ë¥¼ ì´ìš©í•´ Order ê°ì²´ë¥¼ DBì— ì €ì¥í•˜ê²Œ í•´ì£¼ì—ˆë‹¤.</p>

<p>ì´ì œ ì£¼ë¬¸ì„ Postmanìœ¼ë¡œ ì‹¤í–‰í•˜ê²Œ ë  ê²½ìš°</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRnmNA4pymt_R759dyUt72jbf_Bms7zIM2lE2plqvJz05MFJIva97SO1RguJ4L9t5tVnCO3iyNdwKkoftNs1xOhfqgpUQ=w1512-h807" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìœ„ì™€ ê°™ì´ ì£¼ë¬¸ì´ ì˜ DBì— ì €ì¥ëœ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>í•˜ì§€ë§Œ ! ì—¬ê¸°ì„œ OrderCoffeeì˜ í…Œì´ë¸”ì—ëŠ”</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSrJSyX1h6jXCz0y0gt23p43O_gRw39Bl5G2Iqgx1reIWlR5YTZflQ3Y5cqCmK0ffMEd5izw4EkHZfAgEFYr0PMe6LKYQ=w1512-h807" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ê°’ì´ ì €ì¥ë˜ì§€ ì•ŠëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>ì™œëƒí•˜ë©´ ìš°ë¦¬ëŠ” Order Entityì— JPAê¸°ìˆ ì„ ì´ìš©í•´<br />
ORDER TABLEì—ë§Œ ê°’ì„ .save(); í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.</p>

<p>ì—¬ê¸°ì„œ @ManyToOne, @OneToManyì˜ ì†ì„±ì¤‘<br />
Cascadeë¼ëŠ” ê²ƒìœ¼ë¡œ ê°„ë‹¨í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.</p>

<p>Order í´ë˜ìŠ¤ì˜ Cascade ì†ì„±ì„ ì¶”ê°€í•´ì£¼ë©´ëœë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Entity</span>
<span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"ORDERS"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span> <span class="o">=</span> <span class="nc">GenerationType</span><span class="o">.</span><span class="na">IDENTITY</span><span class="o">)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">orderId</span><span class="o">;</span>

    <span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">LocalDateTime</span> <span class="n">createdAt</span> <span class="o">=</span> <span class="nc">LocalDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>

    <span class="nd">@Column</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">personName</span><span class="o">;</span>

    <span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"order"</span><span class="o">,</span><span class="n">cascade</span> <span class="o">=</span> <span class="nc">CascadeType</span><span class="o">.</span><span class="na">PERSIST</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">OrderCoffee</span><span class="o">&gt;</span> <span class="n">orderCoffees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ CascadeType.PERSIST ì†ì„±ì„ ì‚¬ìš©í•˜ë©´<br />
Orderê°ì²´ê°€ .save();ë˜ì–´ì§ˆë•Œ ORDER_COFFEE í…Œì´ë¸”ì—ë„<br />
ê°’ì´ ê°™ì´ ë§µí•‘ë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p><strong>Cascadeë€?</strong><br />
cascade ì˜µì…˜ì´ë€ @OneToMany ë‚˜ @ManyToOneì— ì˜µì…˜ìœ¼ë¡œ ì¤„ ìˆ˜ ìˆëŠ” ê°’ì´ë‹¤.<br />
Entityì˜ ìƒíƒœ ë³€í™”ë¥¼ ì „íŒŒì‹œí‚¤ëŠ” ì˜µì…˜ì´ë‹¤.   <br />
ë§Œì•½ Entityì˜ ìƒíƒœ ë³€í™”ê°€ ìˆìœ¼ë©´ ì—°ê´€ë˜ì–´ ìˆëŠ”(ex. @OneToMany, @ManyToOne)<br />
Entityì—ë„ ìƒíƒœ ë³€í™”ë¥¼ ì „ì´ì‹œì¼œì¤€ë‹¤.</p>

<ol>
  <li>
    <p>Persistent: ì €ì¥ì„ í•˜ê³ ë‚˜ì„œ, JPAê°€ ì•„ëŠ” ìƒíƒœ(ê´€ë¦¬í•˜ëŠ” ìƒíƒœ)ê°€ ëœë‹¤.<br />
ê·¸ëŸ¬ë‚˜ .save()ë¥¼ í–ˆë‹¤ê³  í•´ì„œ, ì´ ìˆœê°„ ë°”ë¡œ DBì— ì´ ê°ì²´ì— ëŒ€í•œ ë°ì´í„°ê°€ ë“¤ì–´ê°€ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. <br />
JPAê°€ persistent ìƒíƒœë¡œ ê´€ë¦¬í•˜ê³  ìˆë‹¤ê°€, í›„ì— ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.<br />
(1ì°¨ ìºì‹œ, Dirty Checking(ë³€ê²½ì‚¬í•­ ê°ì§€), Write Behind(ìµœëŒ€í•œ ëŠ¦ê²Œ, í•„ìš”í•œ ì‹œì ì— DBì— ì ìš©) ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤)</p>
  </li>
  <li>
    <p>Removed: JPAê°€ ê´€ë¦¬í•˜ëŠ” ìƒíƒœì´ê¸´ í•˜ì§€ë§Œ, ì‹¤ì œ commitì´ ì¼ì–´ë‚  ë•Œ, ì‚­ì œê°€ ì¼ì–´ë‚œë‹¤.</p>
  </li>
</ol>

<p>Order í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ ìˆ˜ì • í›„<br />
ë‹¤ì‹œ Postmanì„ í†µí•´ ì£¼ë¬¸ìš”ì²­ì„ ë³´ë‚¼ ê²½ìš°</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmTvAacgrE_bydZh1uUd4Y6Y1N3G477EgDw3NkdPKUeGJ3cCF4jZbLGJvWQj63OQtnOEMac5K7JDTIxk9XAgWAwdl6uA=w1512-h807" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë¹„ë¡œì†Œ ORDER_COFFEE í…Œì´ë¸”ì— ì™¸ë˜í‚¤ë¡œ<br />
ê°’ë“¤ì´ ì €ì¥ë˜ì–´ì§€ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.<br />
ì´ë ‡ê²Œ ì—°ê´€ê´€ê³„ë¥¼ í†µí•´ DBì— ë§µí•‘ê³¼ ì„œë¡œ ê°ì²´ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><br /></p>

<hr />

<p>ì´ë ‡ê²Œ ì˜¤ëŠ˜ì€ ë‹¤ëŒ€ë‹¤ì— ëŒ€í•´ ì •ë¦¬í•´ë³´ì•˜ë‹¤.<br />
@ManyToManyëŠ” ì‹¤ë¬´ì— ì˜ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ ë“¤ì–´ì„œ<br />
ì•„ì§ ê³µë¶€í•˜ì§€ ëª»í•œ ìƒíƒœì´ê¸´í•˜ë‹¤..<br />
ì‚¬ì‹¤ ìœ„ì˜ ë°©ë²•ìœ¼ë¡œ ì—°ê´€ê´€ê³„ ë§µí•‘í•˜ëŠ” ê²ƒì€ ê°„ë‹¨í•˜ë‹¤ê³  ìƒê°í•œë°<br />
ì„œë¡œ ê°ì²´ë¥¼ ì°¸ì¡°í•œë‹¤ëŠ”? ì˜ë¯¸ê°€ ì˜ ì™€ë‹¿ì§€ì•Šê¸°ëŠ”í•œë‹¤.</p>

<p>ê³„ì† ì‚¬ìš©í•´ë³´ë©´ì„œ ìµìˆ™í•´ì§ˆ ìˆ˜ ë°–ì— !!</p>

<p>ì˜¤ëŠ˜ ê³µë¶€ëŠ” ì—¬ê¸°ê¹Œì§€</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ê¹€ì¹˜ì°Œê°œë¼ë©´</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[]]></summary></entry><entry><title type="html">TIL) Spring JPA 2 (ë‹¤ëŒ€ì¼, ì¼ëŒ€ë‹¤ / @ManyToOne,@OneToMany)</title><link href="http://localhost:4000/til/2022/11/02/til.html" rel="alternate" type="text/html" title="TIL) Spring JPA 2 (ë‹¤ëŒ€ì¼, ì¼ëŒ€ë‹¤ / @ManyToOne,@OneToMany)" /><published>2022-11-02T00:00:00+09:00</published><updated>2022-11-02T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/11/02/til</id><content type="html" xml:base="http://localhost:4000/til/2022/11/02/til.html"><![CDATA[<p>ì¼ì–´ë‚¬ëŠ”ë° ë‚ ì”¨ê°€ í™”ì°½í•˜ë‹¤ !<br />
ê³µë¶€í•˜ê¸° ë”± ì¢‹ì€ ë‚ ì´ë‹¤.<br />
ë°”ëŒë„ ì„ ì„ í•˜ë‹ˆ ì°½ë¬¸ì„ ë³´ë‹ˆ ê¸°ë¶„ë„ ì¢‹ì•„ì§€ê³ </p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmTTi3iIn8dTeSBPpmgo8WFDpboB_P96FekTAmQA2_3ffEhVNvvXCKe7KMWo9-LgViok2L1403k=w3024-h1614" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì—¬ìœ ë¡­ê²Œ ì»¤í”¼ë§ˆì‹œë©´ì„œ ì´ë ‡ê²Œ ê³µë¶€í•œê²Œ ì–¼ë§ˆë§ˆì¸ê°€<br />
ì†Œì†Œí•œ ê²ƒì— í–‰ë³µì„ ëŠê»´ë³¸ë‹¤.</p>

<hr />

<p>ì–´ì œëŠ” JPAì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ë‹¤.<br />
ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì™€ Entity ë§µí•‘ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ê³ <br />
ì˜¤ëŠ˜ì€ Entityì˜ ì—°ê´€ê´€ê³„ë¥¼ ë§µí•‘í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì !</p>

<h2 id="ì—°ê´€-ê´€ê³„-mapping">ì—°ê´€ ê´€ê³„ Mapping</h2>

<p>ì—°ê´€ ê´€ê³„ ë§µí•‘ì€ ì´ì „ì— Spring data JDBC í•™ìŠµì„ í–ˆì„ ë•Œ<br />
ì‚¬ìš©í•´ë´¤ë˜ ê²½í—˜ì´ ìˆë‹¤. ê·¸ë¦¬ê³  RDBMS ê³µë¶€ í•  ë–„ 1:1, 1:N, N:N ë“±<br />
Entityê°„ì˜ ì—°ê´€ê´€ê³„ë¥¼ ì •í•´ ë°ì´í„°ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì—ˆë‹¤.</p>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ì •ì˜ë¥¼ í•´ë³´ì•˜ë‹¤.<br />
Member : memberId, email, name, phone, createdAt, modifiedAt<br />
Order : orderId, orderStatus, createdAt, modifiedAt<br />
í•´ë‹¹ ì—”í‹°í‹°ì— ìœ„ì™€ ê°™ì€ Columnì„ ê°€ì§€ëŠ” í´ë˜ìŠ¤ëŠ” ì¡´ì¬í•œë‹¤ê³  ê°€ì •í•˜ê² ë‹¤.</p>

<p>Member - Orderì˜ ì—°ê´€ê´€ê³„ë¥¼ ë§µí•‘ì„ ì—°ìŠµí•´ë³¼ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<h3 id="ë‹¤ëŒ€ì¼-ê´€ê³„-n1">ë‹¤ëŒ€ì¼ ê´€ê³„ (N:1)</h3>
<p>ìœ„ì—ì„œ ê°€ì •í•œ í…Œì´ë¸”ê³¼ í´ë˜ìŠ¤ê°€ ì´ë‹¤ê³  ê°€ì •í•˜ê³ <br />
ë‹¤ëŒ€ì¼ ê´€ê³„ë¥¼ ì •ì˜í•´ë³´ê² ë‹¤.</p>

<p>í•œëª…ì˜ ì†ë‹˜ë‹¹ ì—¬ëŸ¬ê°œì˜ ì£¼ë¬¸ì„ í•  ìˆ˜ ìˆìœ¼ë‹ˆ  Order(N) : Member(1) <br />
ê´€ê³„ê°€ ì •ì˜ë˜ì–´ì§ˆ ìˆ˜ ìˆë‹¤. ì¦‰, Order Columnì—ì„œ Memberë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆê²Œ<br />
ë§Œë“¤ì–´ì£¼ì–´ì•¼í•œë‹¤. ë§ˆì¹˜ SQLë¡œ JOINì„ í•˜ë“¯ì´</p>

<p><strong>@ManyToOne</strong><br />
ë‹¤ëŒ€ì¼ê´€ê³„ë¥¼ ì •ì˜í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.<br />
ì´ë¦„ë¶€í„° ì§ê´€ì ì´ë¼ ê¸°ì–µí•˜ê¸° ì‰¬ìš¸ ê²ƒ ê°™ë‹¤.</p>

<p>ì‚¬ìš©ë°©ë²•ì„ ì½”ë“œë¡œ ì•Œì•„ë³´ì</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ManyToOne</span>
<span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MEMBER_ID"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">Member</span> <span class="n">member</span><span class="o">;</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addOrder</span><span class="o">(</span><span class="nc">Order</span> <span class="n">order</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">orders</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>í•´ë‹¹ í´ë˜ìŠ¤ëŠ” Order Entity í´ë˜ìŠ¤ì—ì„œ ì¶”ê°€í•œ ëª¨ìŠµì´ë‹¤.</p>

<p>ê¸°ì¡´ì— Order : orderId, orderStatus, createdAt, modifiedAt <br />
ì´ 4ê°œì˜ Columnì„ ì •ì˜ í–ˆì—ˆëŠ”ë° ì—¬ê¸°ì— member Columnì„ ì¶”ê°€í•œ ê²ƒì´ë‹¤.</p>

<p>ê·¸ë¦¬ê³  í•´ë‹¹ ì»¬ëŸ¼ì— @ManyToOne ì–´ë…¸í…Œì´ì…˜ê³¼<br />
Member íƒ€ì…ì˜ ê°ì²´ë¥¼ ë§Œë“¤ê³ , @JoinColumnìœ¼ë¡œ í•´ë‹¹ Columnì„ ì°¸ì¡°í• <br />
ì™¸ë˜í‚¤ Columnì„ ì ì–´ì£¼ë©´ ìš°ë¦¬ëŠ” member ê°ì²´ë¥¼ í†µí•´<br />
ê° Orderê°ì²´ì˜ member ê°ì²´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ DBì— Member 2ëª…ê³¼, Order 1ê±´ì„ ë§Œë“¤ì–´ í…ŒìŠ¤íŠ¸í•´ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JpaTest</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">EntityTransaction</span> <span class="n">tx</span><span class="o">;</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">CommandLineRunner</span> <span class="nf">testJpaSingleMappingRunner</span><span class="o">(</span><span class="nc">EntityManagerFactory</span> <span class="n">entityManagerFactory</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">em</span> <span class="o">=</span> <span class="n">entityManagerFactory</span><span class="o">.</span><span class="na">createEntityManager</span><span class="o">();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tx</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">args</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">test</span><span class="o">();</span>

        <span class="o">};</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">(){</span>
        <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
        <span class="nc">Member</span> <span class="n">member1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@naver.com"</span><span class="o">,</span><span class="s">"ì´ì¬í˜"</span><span class="o">,</span><span class="s">"010-7894-1234"</span><span class="o">);</span>
        <span class="nc">Member</span> <span class="n">member2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"tmdghwlq@naver.com"</span><span class="o">,</span><span class="s">"ì—¼ìŠ¹í˜¸"</span><span class="o">,</span><span class="s">"010-1234-5623"</span><span class="o">);</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member1</span><span class="o">);</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member2</span><span class="o">);</span>

        <span class="nc">Order</span> <span class="n">order</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Order</span><span class="o">();</span>
        <span class="n">order</span><span class="o">.</span><span class="na">addMember</span><span class="o">(</span><span class="n">member2</span><span class="o">);</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
        <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>

        <span class="nc">Order</span> <span class="n">findOrder</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Order</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"findOrder: "</span> <span class="o">+</span> <span class="n">findOrder</span><span class="o">.</span><span class="na">getMember</span><span class="o">().</span><span class="na">getMemberId</span><span class="o">()</span> <span class="o">+</span> <span class="s">", "</span> <span class="o">+</span> <span class="n">findOrder</span><span class="o">.</span><span class="na">getMember</span><span class="o">().</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// ì¶œë ¥</span>
<span class="nl">findOrder:</span> <span class="mi">2</span><span class="o">,</span> <span class="n">tmdghwlq</span><span class="nd">@naver</span><span class="o">.</span><span class="na">com</span>
</code></pre></div></div>
<p>member ê°ì²´ 2ê°œ(member1,member2)ì™€<br />
Order ê°ì²´ 1ê°œë¥¼ ë§Œë“¤ì—ˆë‹¤. Order ê°ì²´ì—ëŠ” Setterë¥¼ ì´ìš©í•˜ì—¬<br />
member2 ê°ì²´ë¥¼ member ì°¸ì¡°ë³€ìˆ˜ì— ì°¸ì¡°í•˜ë„ë¡ ì½”ë“œë¥¼ ì¶”ê°€í–ˆë‹¤.</p>

<p>ë§Œë“  ê°ì²´ë“¤ì„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë“±ë¡í›„<br />
commit();ì„ ì§„í–‰í•˜ì—¬ DBì— ë“±ë¡í–ˆë‹¤.</p>

<p>ê°ì²´ë¥¼ í•œë²ˆ DBì—ì„œ ì¡°íšŒí•´ë³´ì</p>

<p>Order Table ì¡°íšŒ</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRKidG95kInTT4bELfZ7GDduH3EsU_XuozzuawHn0_ZWIHVc2FQJOfOu0v9IM-CUr0uStNbAu4=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>Member Table ì¡°íšŒ
<img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmR_NXQMR6J6A7xoKPr9nv4fuFdKlFBR7Ou740yNkH2VR81uYW-aTwIpXw1daN23U3UADsI7L7g=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>Table ì´ë¦„ì€ ORDERSì™€ USERSë¡œ ë³€ê²½í•´ì„œ ì‘ì—…í–ˆë‹¤.<br />
ì‹¤ì œë¡œ ì¡°íšŒí•´ë³¸ ê²°ê³¼  member ê°ì²´ 2ê°œì— ëŒ€í•œ ë°ì´í„°ê°€ <br />
ì˜ ì €ì¥ë˜ì–´ìˆëŠ” ëª¨ìŠµê³¼ order ë˜í•œ ì˜ ë§µí•‘ë˜ì–´ìˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ @JoinColumnìœ¼ë¡œ ì™¸ë˜í‚¤ë¥¼ ì ì—ˆëŠ”ë°<br />
í•´ë‹¹ ì™¸ë˜í‚¤ê°€ DB Tableì— ì ìš©ëœ ëª¨ìŠµì´ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤</p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì½”ë“œ ë§ˆì§€ë§‰ êµ¬ë¬¸ì— ì¶œë ¥ìœ¼ë¡œ<br />
í•´ë‹¹ ê°ì²´ë¥¼ getterë¥¼ ì´ìš©í•´ ê°’ì„ ì¡°íšŒí•´ë³´ì•˜ì„ë•Œë„<br />
ì •ìƒì ìœ¼ë¡œ member2ì˜ ê°ì²´ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p><strong>@OneToMany</strong><br />
ë§Œì•½ N:1ì´ ì•„ë‹Œ ì¼ëŒ€ë‹¤(1:N)ê´€ê³„ë¥¼ í‘œí˜„í• ë•ŒëŠ” ì–´ë–»ê²Œí•´ì•¼í• ê¹Œ?<br />
ì¼ëŒ€ë‹¤ ë‹¨ë°©í–¥ ë§µí•‘ì€ ì™œë˜í‚¤ë¥¼ í¬í•¨í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì—
ì‚¬ì‹¤ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ì•„ë‹ˆë¼ê³  ë“¤ì—ˆë‹¤.</p>

<p>ìœ„ì— ì˜ˆì œë¡œ ë“¤ë©´ Orderê°€ ì•„ë‹Œ Memberê°€ Orderë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆì–´ì•¼í•œë‹¤.<br />
í˜„ì¬ ìƒíƒœì—ì„œëŠ” ì•Œìˆ˜ ìˆëŠ” ì •ë³´ëŠ”<br />
-&gt; ì£¼ë¬¸ì—ì„œ ì–´ë–¤ ê³ ê°ì´ ì£¼ë¬¸í–ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.</p>

<p>ì£¼ë¬¸ì„ í†µí•œ í™•ì¸ì´ ì•„ë‹Œ<br />
ì–´ë–¤ ê³ ê°ì´ ë¬´ìŠ¨ ì£¼ë¬¸ë“¤ì„ í–ˆëŠ”ì§€ë¥¼ ì•Œê³  ì‹¶ì„ë•Œ<br />
ì¼ëŒ€ë‹¤ ë§¤í•‘ì„ ì¶”ê°€í•´ì£¼ë©´ <strong>ì–‘ë°©í–¥ ê´€ê³„</strong>ë¥¼ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@OneToMany</span><span class="o">(</span><span class="n">mappedBy</span> <span class="o">=</span> <span class="s">"member"</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Order</span><span class="o">&gt;</span> <span class="n">orders</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addOrder</span><span class="o">(</span><span class="nc">Order</span> <span class="n">order</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">orders</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">order</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Member Entity í´ë˜ìŠ¤ì— ì¶”ê°€ëœ ì½”ë“œë‹¤</p>

<p>OneToManyê°™ì€ ê²½ìš°ì—ëŠ” @JoinColumnì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ê³ <br />
ì†ì„±ì¤‘ mappedByë¥¼ ì‚¬ìš©í–ˆë‹¤.<br />
ì•ˆì— ìˆëŠ” memberëŠ” ìš°ë¦¬ê°€ @ManyToOneìœ¼ë¡œ N:1ë¡œ ì—°ê²° ì‹œì¼œë†“ì€<br />
í•„ë“œ ë³€ìˆ˜ëª…ê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •í•˜ë©´ ëœë‹¤.</p>

<p>ì–‘ë°© ì—°ê´€ ê´€ê³„ ë§µí•‘ì„ ëëƒˆìœ¼ë‹ˆ<br />
(ë‹¤ëŒ€ë‹¤ì™€ëŠ” ë‹¤ë¥¸ë‚´ìš©ì´ë‹¤.)</p>

<p>ìœ„ì—ì„œ ë³´ì•˜ë˜ ì˜ˆì œì—ì„œ test ë©”ì„œë“œ ë‚´ìš©ë§Œ ë°”ê¾¸ì–´ ë³´ê³ <br />
í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ì</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
    <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@naver.com"</span><span class="o">,</span> <span class="s">"ì´ì¬í˜"</span><span class="o">,</span> <span class="s">"010-1234-5678"</span><span class="o">);</span>
    <span class="nc">Order</span> <span class="n">order1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Order</span><span class="o">();</span>
    <span class="nc">Order</span> <span class="n">order2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Order</span><span class="o">();</span>

    <span class="n">member</span><span class="o">.</span><span class="na">addOrder</span><span class="o">(</span><span class="n">order1</span><span class="o">);</span>
    <span class="n">member</span><span class="o">.</span><span class="na">addOrder</span><span class="o">(</span><span class="n">order2</span><span class="o">);</span>
    <span class="n">order1</span><span class="o">.</span><span class="na">addMember</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
    <span class="n">order2</span><span class="o">.</span><span class="na">addMember</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>

    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">order1</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">order2</span><span class="o">);</span>

    <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>

    <span class="nc">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>

    <span class="n">findMember</span><span class="o">.</span><span class="na">getOrders</span><span class="o">().</span><span class="na">stream</span><span class="o">()</span>
    <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="n">findOrder</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"findOrder: "</span> <span class="o">+</span> <span class="n">findOrder</span><span class="o">.</span><span class="na">getOrderId</span><span class="o">()</span> <span class="o">+</span> <span class="s">", "</span> <span class="o">+</span> <span class="n">findOrder</span><span class="o">.</span><span class="na">getOrderStatus</span><span class="o">());</span>
    <span class="o">});</span>
<span class="o">}</span>

<span class="c1">//ì¶œë ¥</span>
<span class="nl">findOrder:</span> <span class="mi">1</span><span class="o">,</span> <span class="no">ORDER_REQUEST</span>
<span class="nl">findOrder:</span> <span class="mi">2</span><span class="o">,</span> <span class="no">ORDER_REQUEST</span>
</code></pre></div></div>
<p>test ë©”ì„œë“œì˜ ë‚´ìš©ë§Œ ë³€ê²½ë˜ì—ˆê³  í™•ì¸í•´ë³´ë©´<br />
MemberëŠ” 1ê°œ, OrderëŠ” 2ê°œë¥¼ ìƒì„±í•˜ì˜€ê³ </p>

<p>Member ê°ì²´ì˜ addOrder ë©”ì„œë“œë¥¼ í†µí•´ Orderê°ì²´ë¥¼ 2ê°œë¥¼<br />
Listì— add ì‹œì¼œ ì •ë¦¬í•´ì£¼ì—ˆë‹¤.</p>

<p>3ê°œì˜ ê°ì²´ë¥¼ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì˜¬ë¦° í›„ commit();í•˜ì—¬<br />
DBì— ìµœì¢…ì ìœ¼ë¡œ ì €ì¥í•˜ê²Œë˜ì–´ì§„ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRKidG95kInTT4bELfZ7GDduH3EsU_XuozzuawHn0_ZWIHVc2FQJOfOu0v9IM-CUr0uStNbAu4=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmR_NXQMR6J6A7xoKPr9nv4fuFdKlFBR7Ou740yNkH2VR81uYW-aTwIpXw1daN23U3UADsI7L7g=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì•¼ê¸°ì„œ ì–‘ë°©í–¥ì´ë¼ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆëŠ” ì ì€</p>
<ol>
  <li>Order í´ë˜ìŠ¤ì˜ member ê°ì²´ë¥¼ í†µí•´ ì£¼ë¬¸ì˜ ê³ ê°ì„ ì•Œ ìˆ˜ ìˆë‹¤.</li>
  <li>Member í´ë˜ìŠ¤ì˜ orders ê°ì²´ë¥¼ í†µí•´ì„œ ê³ ê°ì´ ë¬´ìŠ¨ ì£¼ë¬¸ë“¤ì„ í–ˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.<br />
ì´ë ‡ê²Œ ì—°ê´€ê´€ê³„ ë§µí•‘ì„ í†µí•´ ì„œë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ”<br />
ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ê°€ í˜•ì„±ë˜ì—ˆë‹¤ëŠ” ê²ƒì„ ê²€ì¦í•´ ë³¼ ìˆ˜ ìˆë‹¤.</li>
</ol>

<p>í•œ ê°€ì§€ ë” ì–˜ê¸°í•´ë³´ìë©´ Member í´ë˜ìŠ¤ì˜ DB USERS<br />
DBì˜ List&lt;/Order/&gt; orders ê°ì²´ëŠ” Columnìœ¼ë¡œ í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

<p><br /></p>

<hr />

<p>ì˜¤ëŠ˜ì€ ë‹¤ëŒ€ì¼ê³¼ ì¼ëŒ€ë‹¤ì— ëŒ€í•œ
ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš© ë°©ë²•ì„ ê³µë¶€í–ˆë‹¤.</p>

<p>ë‹¤ëŒ€ë‹¤ ê´€ê³„ì— ëŒ€í•´ì„œëŠ” ë‚´ì¼ ì´ì–´ì„œ ì •ë¦¬í•´ë³´ë ¤ê³  í•œë‹¤.</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ê¹€ì¹˜ì°Œê°œ, ê³„ë€ë§ì´, ë°¥</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[ì¼ì–´ë‚¬ëŠ”ë° ë‚ ì”¨ê°€ í™”ì°½í•˜ë‹¤ ! ê³µë¶€í•˜ê¸° ë”± ì¢‹ì€ ë‚ ì´ë‹¤. ë°”ëŒë„ ì„ ì„ í•˜ë‹ˆ ì°½ë¬¸ì„ ë³´ë‹ˆ ê¸°ë¶„ë„ ì¢‹ì•„ì§€ê³ ]]></summary></entry><entry><title type="html">TIL) Spring JPA 1 (ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸, Entity Mapping)</title><link href="http://localhost:4000/til/2022/11/01/til.html" rel="alternate" type="text/html" title="TIL) Spring JPA 1 (ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸, Entity Mapping)" /><published>2022-11-01T00:00:00+09:00</published><updated>2022-11-01T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/11/01/til</id><content type="html" xml:base="http://localhost:4000/til/2022/11/01/til.html"><![CDATA[<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRPFpJbXFca8pZtK4Y_xhMzczsg_7cF9aFFcOtM7nJMxG4Ts-Fz1MwFPufqbEyhDJgrM-zMotc=w3024-h1614" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë‚ ì”¨ê°€ ë²Œì¨ ìŒ€ìŒ€í•´ì¡Œë‹¤.<br />
ì•„ì¹¨ì— ì¼ì–´ë‚˜ë©´ ìœ¼ìŠ¬ìœ¼ìŠ¬í•˜ë‹¤â€¦<br />
ì´ì œ ì§„ì§œ ê°€ì„ì€ ì–¼ë§ˆ ì—†ê³  ë°”ë¡œ ê²¨ìš¸ì´ë˜ëŠ” ëŠë‚Œ</p>

<p>ì–´ì œëŠ” ì²˜ìŒìœ¼ë¡œ ê²Œì„ì„ í•œë²ˆë„ì•ˆí–ˆë‹¤.<br />
ë‚˜ì—ê²ŒëŠ” ì—„ì²­ë‚œ ì„±ê³¼ë‹¤ ê·¸ ì‹œê°„ì— ê³µë¶€ë¥¼ í–ˆìœ¼ë‹ˆ..</p>

<p>ì´ ë§ˆìŒê°€ì§ìœ¼ë¡œ ì­‰ ì—´ì‹¬íˆ ê³µë¶€í•´ë³´ì !</p>

<hr />

<h2 id="jpa">JPA</h2>

<p>Java Persistence APIì˜ ì•½ìë‹¤. <br />
í˜„ì¬ëŠ” Jakarta Persistence ë¼ê³ ë„ ë¶€ë¥¸ë‹¤ê³ í•œë‹¤.</p>

<p>JPAëŠ” Java ì§„ì˜ì—ì„œ ì‚¬ìš©í•˜ëŠ”<br />
ORM(Object-Relational Mapping) ê¸°ìˆ ì˜ í‘œì¤€ ì‚¬ì–‘ì´ë‹¤.<br />
ì¦‰, JPAëŠ” Javaì˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ì‚¬ì–‘ì´ ì •ì˜ê°€ ë˜ì–´ìˆì–´<br />
êµ¬í˜„í•˜ëŠ” êµ¬í˜„ì²´ê°€ ë”°ë¡œ ìˆë‹¤.</p>

<h3 id="hibernate-orm">Hibernate ORM</h3>
<p>JPAì˜ êµ¬í˜„ì²´ì˜ í•˜ë‚˜ë¡œ EclipseLink, DataNucleus ë“±ì´ ìˆë‹¤.<br />
ìš°ë¦¬ê°€ ì£¼ë¡œ ë°°ìš°ê²Œë  JPA êµ¬í˜„ì²´ëŠ” Hibernate ORMì´ë‹¤.</p>

<p>JPAì™€ Hibernate ORMì€<br />
ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ 3ê³„ì¸µì—ì„œ ë°ì´í„° ì—‘ì„¸ìŠ¤ ê³„ì¸µì— ìœ„ì¹˜í•œë‹¤.</p>

<h3 id="persistence-context">Persistence Context</h3>
<p>ì§ì—­ì„í•˜ìë©´, ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¼ê³  ë¶€ë¥¸ë‹¤.<br />
JPAì—ì„œ Pì— í•´ë‹¹í•˜ëŠ” ë¶€ë¶„ì´ê³ , ì§€ì†í•œë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤.</p>

<p>ìœ„ì—ì„œ ì–˜ê¸°í–ˆë“¯ì´ ORMì€ ê°ì²´ì™€ DB í…Œì´ë¸”ì˜ ë§µí•‘ì„ í†µí•´ <br />
Entity í´ë˜ìŠ¤ ê°ì²´ ì•ˆì— í¬í•¨ëœ ì •ë³´ë¥¼ í…Œì´ë¸”ì— ì €ì¥í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.<br />
JPAì—ì„œëŠ” í…Œì´ë¸”ê³¼ ë§µíŒ½ë˜ëŠ” Entity ê°ì²´ ì •ë³´ë¥¼  <br />
ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¼ëŠ” ê³³ì— ë³´ê´€í•´ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì˜¤ë˜ ì§€ì†ë˜ë„ë¡ í•œë‹¤.</p>

<p>ê·¸ë¦¬ê³  ë³´ê´€ëœ Entity ì •ë³´ëŠ” DB í…Œì´ë¸”ì—<br />
ë°ì´í„°ë¥¼ CRUDí•˜ëŠ”ë° ì‚¬ìš©í•˜ê²Œëœë‹¤.</p>

<ol>
  <li>Entityë¥¼ ì˜êµ¬ ì €ì¥í•˜ëŠ” í™˜ê²½</li>
  <li>ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ DB ì‚¬ì´ì—ì„œ ê°ì²´ë¥¼ ë³´ê´€í•˜ëŠ” ë…¼ë¦¬ì  ê°œë…</li>
</ol>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmT9olJAYm5HH_eKR9vzv5l7odFjODUl6jMaG1OAq2mTDBsJbcJCW4UNxMFDXlxdJ1DT4iQ9738=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì„ ê·¸ë¦¼ì„ í‘œí˜„í•œ ëª¨ìŠµì´ë‹¤.<br />
ë³´ëŠ” ê²ƒê³¼ ê°™ì´ <strong>1ì°¨ ìºì‹œ</strong> ,<strong>ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œ</strong>ê°€ ìˆë‹¤.</p>

<p>í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë¬¸ë²•ê³¼ 1ì°¨ìºì‹œ, ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œê°€ ì–´ë–»ê²Œ<br />
ìš´ì˜ë˜ëŠ”ì§€ ì•Œì•„ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@Entity</span> 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
    <span class="nd">@Id</span> 
    <span class="nd">@GeneratedValue</span>  
    <span class="kd">private</span> <span class="nc">Long</span> <span class="n">memberId</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Member</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JpaExample</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">EntityManager</span> <span class="n">em</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">EntityTransaction</span> <span class="n">tx</span><span class="o">;</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">CommandLineRunner</span> <span class="nf">testJpaBasicRunner</span><span class="o">(</span><span class="nc">EntityManagerFactory</span> <span class="n">emFactory</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// (1)</span>
        <span class="k">this</span><span class="o">.</span><span class="na">em</span> <span class="o">=</span> <span class="n">emFactory</span><span class="o">.</span><span class="na">createEntityManager</span><span class="o">();</span>  <span class="c1">// (2)</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tx</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">getTransaction</span><span class="o">();</span>
        
        <span class="k">return</span> <span class="n">args</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">jpatest</span><span class="o">();</span>
        <span class="o">};</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">jpatest</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@gmail.com"</span><span class="o">);</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
        <span class="nc">Member</span> <span class="n">resultMember</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>
<p><strong>ì²«ë²ˆì§¸ ì½”ë“œ ë¸”ëŸ­</strong>ì€ Memberë¼ëŠ” ë°ì´í„°ë¥¼<br />
ìš°ë¦¬ê°€ ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ë™í•˜ê¸°ìœ„í•´ ë§Œë“¤ì–´ë‘” í´ë˜ìŠ¤ì´ë‹¤.<br />
@Entityë¡œ ì—”í‹°í‹°í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ê³  @Idë¡œ ê¸°ë³¸í‚¤ë¥¼ ì§€ì •í–ˆë‹¤.<br />
í• ë‹¹ì „ëµì€ GenerateValueë¡œ ê°’ì´ ìë™ì ìœ¼ë¡œ ì¦ê°€í•˜ê²Œëœë‹¤</p>

<p><br /></p>

<p><strong>ë‘ë²ˆì§¸ ì½”ë“œ ë¸”ëŸ­</strong>ë¶€í„° ì¤‘ìš”í•˜ë‹¤.</p>

<p><span style="color:#F04965"><strong>EntityManager í´ë˜ìŠ¤</strong></span><br />
-&gt; JPAì˜ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•¨.<br />
-&gt; EntityManagerFactory í´ë˜ìŠ¤ ê°ì²´ë¥¼ DI ë°›ì„ ìˆ˜ ìˆë‹¤.<br />
-&gt; ì£¼ì… ë°›ì€ ê°ì²´ë¥¼ í†µí•´ì„œ JPAì˜ API ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<p>.persist();<br />
-&gt; í•´ë‹¹ê°ì²´ë¥¼ ë„£ìœ¼ë©´ ì˜ì†ì„ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ê°ì²´ì˜ ì •ë³´ë“¤ì´ ì €ì¥ëœë‹¤.<br />
-&gt; ê°ì²´ëŠ” 1ì°¨ ìºì‹œì— ì €ì¥ë˜ê³ , ì´ ê°ì²´ëŠ” ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— INSERT ì¿¼ë¦¬ í˜•íƒœë¡œ ë“±ë¡ëœë‹¤</p>

<p>.find();<br />
-&gt; ì»¨í…ìŠ¤íŠ¸ ì•ˆì˜ ì¡°íšŒí•  ì—”í‹°í‹°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ë²• (í´ë˜ìŠ¤íƒ€ì…, ì‹ë³„ìê°’)</p>

<p>.getTransaction();<br />
-&gt; EntityTransaction í´ë˜ìŠ¤ íƒ€ì…ì„ ë°˜í™˜í•¨<br />
-&gt; JPAì—ì„œëŠ” Transcation ê°ì²´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ DBì˜ Tableì— ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤.<br />
-&gt; EntityManger ê°ì²´ì—ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<p>.getTransaction().begin();<br />
-&gt; transaction ì‹œì‘í•˜ê¸° ìœ„í•œ ë©”ì„œë“œ</p>

<p>.getTransaction().commit();<br />
-&gt; ë©”ì„œë“œ í˜¸ì¶œì‹œì ì— ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì— ì €ì¥ë˜ì–´ìˆëŠ” ê°ì²´ë¥¼ DBì˜ í…Œì´ë¸”ì— ì €ì¥í•¨<br />
-&gt; ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— INSERT ì¿¼ë¦¬ê°€ ì‹¤í–‰ë˜ì–´ ì €ì¥ì†Œì—ì„œ ì‚¬ë¼ì§„ë‹¤.<br />
-&gt; ë‚´ë¶€ì ìœ¼ë¡œ flush(); ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì–´ ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸ì˜ ë³€ê²½ ë‚´ìš©ì„ ë°˜ì˜í•œë‹¤.</p>

<p><span style="color:#F04965"><strong>EntityManagerFactory í´ë˜ìŠ¤</strong></span><br />
.createEntityManager(); <br />
-&gt; EntityManager íƒ€ì…ì˜ ë³€ìˆ˜ì— í•´ë‹¹ ë©”ì„œë“œë¡œ ë§Œë“  ê°ì²´ë¥¼ ë„£ì–´ì¤˜ì•¼í•¨<br />
-&gt; ë§Œë“¤ì–´ì§„ ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¡œ EntityManager í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ ì‚¬ìš©ê°€ëŠ¥</p>

<p>ì´ìƒ ê°„ë‹¨í•œ êµ¬ë¬¸ë“¤ë§Œ ë¨¼ì € ì •ë¦¬í•´ ë³´ì•˜ê³  ë‘ë²ˆì§¸ ì½”ë“œë¸”ëŸ­ì„ ë¶„ì„í•´ë³´ë©´</p>

<p>Member í´ë˜ìŠ¤ íƒ€ì…ì˜ ê°ì²´ì¸ member ë¼ëŠ” ìƒˆë¡œìš´ ê°ì²´ë¥¼ <br />
EntityManager í´ë˜ìŠ¤ íƒ€ì…ì˜  emì´ë¼ëŠ” ì°¸ì¡°ë³€ìˆ˜ì˜ ë©”ì„œë“œì¸ <br />
em.persist(member);ë¥¼ ì‹¤í–‰ ì‹œì¼œ 1ì°¨ ìºì‹œì— ê°ì²´ë¥¼ ì €ì¥í•˜ê³ <br />
ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— INSET ì¿¼ë¦¬ í˜•íƒœë¡œ ë“±ë¡í•œë‹¤.</p>

<p>ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸ ì•ˆì— ê°ì²´ê°€ ë“±ë¡ë˜ì—ˆê¸° ë•Œë¬¸ì—<br />
DBì•  ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•Šì•˜ì–´ë„<br />
.find();ë¼ëŠ” ë©”ì„œë“œë¥¼ ì´ìš©í•´ ê°ì±„ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmTcXQePwbhv3jAMqEYgQFX5pommI1oXMrrIrqAFqKw6rnCzs6waOCx3Egza2_4IGpXKU2h_lEI=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><strong>ê²°ê³¼: ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ì €ì¥ O, ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ X</strong></p>

<p><br /></p>

<p>ì´ì œ ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸ì— ë“±ë¡í•˜ëŠ” ë²•ì„ ì•Œì•˜ë‹¤.<br />
ê·¸ëŸ¬ë©´ DBì—ëŠ” ì–´ë–»ê²Œ ì €ì¥í• ê¹Œ?</p>

<p>ìš°ì„  ìš°ë¦¬ëŠ” Transaction ê°ì²´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜<br />
í…Œì´ë¸”ì— ë°ì´í„°ë¥¼ ì €ì¥í•´ì•¼ë˜ì„œ .begin(); .commit();ë¡œ<br />
ì‹œì‘ê³¼ ë°ì´í„°ë¥¼ ì¨ì¤„ ìˆ˜ ìˆê²Œë˜ì–´ì§„ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">jpatest</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
    <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@gmail.com"</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
    
    <span class="nc">Member</span> <span class="n">resultMember</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìœ„ì—ì„œ ì–˜ê¸°í–ˆë“¯ì´ .commit();ë¼ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì£¼ë©´<br />
ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ê²½ ì‚¬í•­ì„ í…Œì´ë¸”ì— ë°˜ì˜í•´ì£¼ëŠ” ë©”ì„œë“œ flush();ê°€<br />
ë‚´ë¶€ì ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ DataBaseì— ë°ì´í„°ê°€ ì €ì¥ë˜ê³ <br />
ê¸°ì¡´ì— ìˆë˜ <strong>ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œ</strong>ì—ëŠ” ë°ì´í„°ê°€ ì§€ì›Œì§€ê²Œëœë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQ-OUrKd41tUZrh_rjR1V75byfLrXEb-MLOYiZe0UAHxzD3mrTib4P50B0QHyf_O2Aq19x7qVI=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><strong>ê²°ê³¼: ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œ ì‚­ì œ, ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ O</strong></p>

<p><br /></p>

<p>ë§Œì•½ ì—¬ëŸ¬ê°œ ì˜ ë°ì´í„°ë¥¼ .persist() í•˜ì—¬ .commit();ì„ í•˜ê²Œëœë‹¤ë©´</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">jpatest</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
    <span class="nc">Member</span> <span class="n">member1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@gmail.com"</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">member2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"tmdghwlq@naver.com"</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">member3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"bomjin128@gmail.com"</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member1</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member2</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member3</span><span class="o">);</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
    
    <span class="nc">Member</span> <span class="n">resultMember1</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">resultMember2</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">2L</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">resultMember3</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">3L</span><span class="o">);</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultMember1</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultMember2</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultMember3</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì•„ë˜ì™€ ê°™ì´ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì˜ ë°ì´í„°ëŠ” ëª¨ë‘ ì§€ì›Œì§„ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRTieUDGVyS8Av0JyHvMlowRR3_abVmLSiqndX0tShgpS4TYJ-XcPNM3zXTI66cPgI0LTT_sVs=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ê·¸ë¦¬ê³  ì‹œìŠ¤í…œ ì¶œë ¥ìœ¼ë¡œ ì°ì–´ë³´ ì•˜ì„ë•Œ<br />
<img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSne7XgebEuiijpzBtS8cxs5NfzsFdUg8W-82Pq220xUsF9neETnQaJr269uLYp266sOO_h5FM=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì—¬ì „íˆ ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸ ì•ˆì— ê°ì²´ì˜ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆê³ </p>

<p>ì•„ë˜ì™€ ê°™ì´ ë°ì´í„° ë² ì´ìŠ¤ì—ì„œë„ ê°’ì´ ì €ì¥ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRPzF0h7qZkMllMrAs-VxRG_WymmcOoFcXCAZDWlU7vmwOqv-X0-54n4TxWISMZq2v3rzSCd7k=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><br /></p>

<p>ì¶”ê°€í•˜ëŠ”ë²•ê³¼ DBì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë²•ê¹Œì§€ ì•Œì•˜ìœ¼ë‹ˆ<br />
ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì•ˆì— ê°ì²´ë¥¼ ì‚­ì œí•œëŠ” ë°©ë²•ë„ ìˆë‹¤.</p>

<p>.remove(); ë©”ì„œë“œë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">jpatest</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
    <span class="nc">Member</span> <span class="n">member1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@gmail.com"</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">member2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"tmdghwlq@naver.com"</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">member3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"bomjin128@gmail.com"</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member1</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member2</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member3</span><span class="o">);</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
    
    <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
    <span class="nc">Member</span> <span class="n">resultMember1</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">1L</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">resultMember2</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">2L</span><span class="o">);</span>
    <span class="nc">Member</span> <span class="n">resultMember3</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="mi">3L</span><span class="o">);</span>
    <span class="n">em</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">resultMember1</span><span class="o">);</span>
    <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ íŠ¸ëœì ì…˜ì„ ë‘ê°œë¡œ ë‚˜ëˆ  ì§„í–‰í•´ë³´ì.<br />
ì²«ë²ˆì§¸ëŠ” ìš°ë¦¬ê°€ ìœ„ì—ì„œ ë°°ì› ë˜ persist(); ë©”ì„œë“œë¡œ ì˜ì†ì„± ì»¨íƒìŠ¤íŠ¸ì˜ ë“±ë¡ <br />
commit(); ë©”ì„œë“œë¡œ ë°ì´í„° ë² ì´ìŠ¤ì— ì €ì¥ í›„ ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì—ì„œ ì‚­ì œ.</p>

<p>ì—¬ê¸°ì„œ ë‘ë²ˆì§¸ íŠ¸ëœì­ì…˜ì€<br />
ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ì˜ Memberíƒ€ì…ì˜ í´ë˜ìŠ¤ ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ê³ <br />
ê·¸ ì¤‘ì—ì„œ Idê°€ 1ì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ .remove((); ë©”ì„œë“œì— ë‹´ì•„ì£¼ì—ˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ìˆœê°„ 1ì°¨ ìºì‹œì— ìˆëŠ” ì—”í‹°í‹°ë¥¼ ì œê±° ìš”ì²­ì„í•˜ì—¬<br />
ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì— DLETE ì¿¼ë¦¬ í˜•íƒœë¡œ ì €ì¥í•˜ê²Œëœë‹¤.<br />
.commit();ì„ ì‹¤í–‰í•˜ë©´, 1ì°¨ ìºì‹œì— ìˆëŠ” ì—”í‹°í‹°ë¥¼ ì œê±°í•˜ê³ , ì“°ê¸° ì§€ì—° SQL ì €ì¥ì†Œì—<br />
ë“±ë¡ëœ DELETE ì¿¼ë¦¬ê°€ ì‹¤í–‰ ëœë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmR_ZOK3YntMqeZLhBczY47sWmQmsPC95mmw8X5FlmZAqjTiH1gWRQrqfk0PANOFuS2nNDWleU8=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìœ„ì™€ ê°™ì€ ê·¸ë¦¼ìœ¼ë¡œ ì‹¤í–‰ì´ ì´ë£¨ì–´ì§„ë‹¤ ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ê³ </p>

<p>ê·¸ë¦¬ê³  DELETE ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í–ˆê¸° ë•Œë¬¸ì—<br />
ë°ì´í„° ë² ì´ìŠ¤ì˜ í•´ë‹¹ ì—”í‹°í‹°ì˜<br />
ë ˆì½”ë“œ ê°’ë„ ì‚­ì œë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQnbbsdDBC5VjJ19Bec6S5Ctv26CfpeA-yqaIO2xPygMKxlmn-uyU8JzEE6SKwwhUIRnLB1nrA=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<h3 id="entity-mapping">Entity Mapping</h3>

<p><strong>@Id</strong></p>

<p>ìš°ì„  @Id ìš°ë¦¬ê°€ ê¸°ë³¸í‚¤(Primary Key)ë¡œ ì‚¬ìš©í•˜ëŠ”<br />
ë°ì´í„°ì˜ ì—¬ëŸ¬ê°€ì§€ ì „ëµì„ ì•Œì•„ë³´ì</p>

<ol>
  <li>IDENTITY : ê¸°ë³¸í‚¤ ìƒì„±ì„ DBí•œí…Œ ìœ„ì„í•¨, ëŒ€í‘œì ìœ¼ë¡œ AUTO_INCREMENT</li>
  <li>SEQUENCE : DBì—ì„œ ì œê³µí•˜ëŠ” ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ ê¸°ë³¸í‚¤ë¥¼ ìƒì„±</li>
  <li>TABLE : ë³„ë„ì˜ í‚¤ ìƒì„± í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ëŠ” ì „ëµì„</li>
</ol>

<p>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ ìƒì—ì„œ ê¸°ë³¸í‚¤ë¥¼ ì§ì ‘ í• ë‹¹í•´ì£¼ëŠ” ë°©ì‹ì„ ì œì™¸ í•˜ê³ ëŠ”<br />
ìœ„ì™€ ê°™ì€ 3ê°€ì§€ ì „ëµì„ ê°€ì§€ê³  ê¸°ë³¸í‚¤ë¥¼ í• ë‹¹í•œë‹¤.</p>

<p>@GenerateValue ì• ë…¸í…Œì´ì…˜ì´ í• ë‹¹í•˜ëŠ” ë²•ì„ ë„ì™€ì£¼ë©°<br />
ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<p>1). @GeneratedValue(strategy = GenerationType.IDENTITY)<br />
-&gt; IDENTITY ì „ëµìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ì„œ ë³„ë„ì˜ ê¸°ë³¸í‚¤ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•Šì•˜ë‹¤.<br />
-&gt; ì˜ˆë¥¼ë“¤ì–´ @Idë§Œ ìˆì„ ê²½ìš°ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í•´ë‹¬ ì»¬ëŸ¼ì— ë°ì´í„°ë¥¼ ìš°ë¦¬ê°€ ì§ì ‘ ë„£ì–´ì¤˜ì•¼í•œë‹¤.<br />
í•˜ì§€ë§Œ ì´ë†ˆê³¼ ê°™ì´ ì‚¬ìš©í•œë‹¤ë©´ ìë™ìœ¼ë¡œ ê°’ì´ ì¦ê°€ë¨</p>

<p>2). @GeneratedValue(strategy = GenerationType.SEQUENCE)<br />
-&gt; SEQUENCE ì „ëµìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ë©´ì„œ ë³„ë„ì˜ ê¸°ë³¸í‚¤ ê°’ì„ ì „ë‹¬í•˜ì§€ ì•Šì•˜ë‹¤.<br />
-&gt; DBì—ì„œ ì œê³µí•˜ëŠ” ì‹œí€€ìŠ¤ë¥¼ ì´ìš©í•œ í‚¤ê°€ ìƒì„±ë¨</p>

<p>3). @GeneratedValue(strategy = GenerationType.AUTO)<br />
-&gt; ë°ì´í„°ë² ì´ìŠ¤ì˜ Dialectì— ë”°ë¼ì„œ ì ì ˆí•œ ì „ëµì„ ìë™ìœ¼ë¡œ ì„ íƒí•œë‹¤.</p>

<p><br /></p>

<p><strong>@Column</strong></p>

<p>ê·¸ë¦¬ê³  <strong>@Column</strong>ì— ëŒ€í•´ì„œ ì•Œì•„ ë³´ì•˜ë‹¤.<br />
-&gt; ì—”í‹°í‹° í´ë˜ìŠ¤ì˜ ì»¬ëŸ¼(ì—´)ì„ ë§µí•‘í•´ì£¼ëŠ” ì• ë…¸í…Œì´ì…˜ì´ë‹¤.
-&gt; í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì´ ì—†ì–´ë„, í•„ë“œì˜ ë³€ìˆ˜ê°€ ìˆë‹¤ë©´ ìë™ì ìœ¼ë¡œ ì»¬ëŸ¼ê³¼ ë§µí•‘ë˜ëŠ” í•„ë“œë¼ ê°„ì£¼í•œë‹¤.
-&gt; ì†ì„±ì˜ ê¸°ë³¸ ê°’ì€ nullable = true , updatable = true, unique = false;
-&gt; length ì†ì„±ìœ¼ë¡œ ë¬¸ì ê¸¸ì´ ì§€ì •ê°€ëŠ¥ / default 255</p>

<p>íŠ¹ì§•ì€ ìœ„ì™€ ê°™ê³  default ì„¤ì •ì„ ë‹¤ì‹œ ë³´ë©´<br />
nullable : false = null ê°’ ë¶ˆí—ˆìš© / true = null ê°’ í—ˆìš©í•¨
updatable : false = ì»¬ëŸ¼ì˜ ê°’ ë³€ê²½ ë¶ˆí—ˆìš© / true = ì»¬ëŸ¼ì˜ ê°’ ë³€ê²½ í—ˆìš©
unique : false = ìœ ë‹ˆí¬ ë¯¸ì‚¬ìš© / true = ìœ ë‹ˆí¬ ì‚¬ìš©, ì¤‘ë³µ ë°ì´í„° ì»¬ëŸ¼ì— ë“¤ì–´ì˜¬ ê²½ìš° ì•ŒëŒë°œìƒ<br />
ì´ë ‡ê²Œ ì •ë¦¬í•´ ë³¼ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<p>nullableì€ ê°„ë‹¨í•˜ë‹ˆ íŒ¨ìŠ¤í•˜ê³  updatableê³¼ uniqueë¥¼ ë¹„êµí•´ë³´ì</p>

<p><strong>1). ì—…ë°ì´íŠ¸ê°€ ë¶ˆê°€ëŠ¥í•œ ì„¤ì •</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">jpatest</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@naver.com"</span><span class="o">));</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@naver.com"</span><span class="o">));</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="k">new</span> <span class="nc">Member</span><span class="o">(</span><span class="s">"dhfif718@naver.com"</span><span class="o">));</span>
        <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>

        <span class="n">tx</span><span class="o">.</span><span class="na">begin</span><span class="o">();</span>
        <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="mi">1L</span><span class="o">);</span>
        <span class="n">member</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s">"ddd@gmail.com"</span><span class="o">);</span>
        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
        <span class="n">tx</span><span class="o">.</span><span class="na">commit</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ì˜ ì²˜ëŸ¼ 1ë²ˆì§¸ ì—”í‹°í‹°ì˜ ê°ì²´ë¥¼ ê°€ì ¸ì™€<br />
setterë¡œ ìˆ˜ì • í›„ ë‹¤ì‹œ ë“±ë¡í•˜ì—¬ë„, DBì—ëŠ” ìˆ˜ì •ëœ ê°’ì´ ë°˜ì˜ë˜ì§€ ì•ŠëŠ”ë‹¤.<br />
í•˜ì§€ë§Œ ì˜ì†ì„ ì»¨í…ìŠ¤íŠ¸ì˜ ê°ì²´ë¥¼ ì¡°íšŒí•´ë³´ë©´<br />
ë³€ê²½ëœ ê°ì²´ëŠ” persistë˜ì–´ìˆê¸° ë•Œë¬¸ì— ddd@gmail.com ê°’ì„ ê°€ì§„<br />
Member ê°ì²´ê°€ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì„ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤â€¦</p>

<p>ê·¸ëŸ¬ë©´ ì´ë ‡ê²Œ ì„œë¡œ ìƒì´í• ê²½ìš°ì—”..? ì–´ë–»ê²Œ í•´ê²°í•´ì•¼í•˜ì§€?? ë¼ëŠ” ì˜ë¬¸ì´ë“ ë‹¤..<br />
ì´ ë¶€ë¶„ì€ ì˜¤ëŠ˜ ì•„ê³ ë¼ ìŠ¤í…Œì´ì¸ ì— ì§ˆë¬¸ì„ ì˜¬ë ¤ë†“ì•˜ë‹¤.</p>

<p><strong><em>ë‹¤ìŒë‚  ë‹µë³€ : updatable = falseì´ë¼ëŠ” ëœ»ì´ ì½ê¸°ì „ìš© ì»¬ëŸ¼ì´ê¸° ë•Œë¬¸ì—<br />
Setterë¥¼ ì‚¬ìš©í•  ì¼ì´ ì—†ë‹¤ê³  í•œë‹¤ ! ì˜ˆì œë¥¼ ìœ„í•œ í”„ë¡œê·¸ë¨ì´ì—ˆìœ¼ë‹ˆ ì°¸ê³  !</em></strong></p>

<p><strong>2). ìœ ë‹ˆí¬ê°’ í—ˆìš© ì„¤ì •</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Column</span><span class="o">(</span><span class="n">nullable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">unique</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
</code></pre></div></div>
<p>ë§Œì•½ ë™ì¼í•œ ê°’ì„ í•´ë‹¹ email ì»¬ëŸ¼ì— ì €ì¥ì„ í•˜ê²Œëœë‹¤ë©´ <br />
ì•„ë˜ì™€ ê°™ì€ ì•ŒëŒì´ ì»´íŒŒì¼ ì¤‘ ë°œìƒí•  ê²ƒì´ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Unique index or primary key violation: "PUBLIC.UK_6DOTKOTT2KJSP8VW4D0M25FB7_INDEX_4 ON PUBLIC.USERS(EMAIL NULLS FIRST) VALUES ( /* 1 */ 'dhfif718@naver.com' )"; SQL statement:
</code></pre></div></div>

<p><br /><br /><br /></p>

<p>ì´ ì™¸ì— Mappingì„ í•˜ê¸° ìœ„í•œ ì–´ë…¸í…Œì´ì…˜ë“¤ ëª‡ ê°€ì§€ë“¤ì„<br />
ë” ê³µë¶€í•´ë³´ì•˜ë‹¤.</p>

<p><strong>@Temporal</strong><br />
-&gt; ë‚ ì§œë¥¼ ë§µí•‘í•˜ê¸°ìœ„í•œ í•„ë“œì— ë‹¬ì•„ì£¼ëŠ” ì• ë…¸í…Œì´ì…˜<br />
-&gt; LocalDataTime íƒ€ì…ì¼ ê²½ìš° ìƒëµì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><strong>@Transient</strong><br />
-&gt; ì´ ì• ë…¸í…Œì´ì…˜ì„ í•„ë“œì— ì¶”ê°€í•˜ë©´ í…Œì´ë¸” ì»¬ëŸ¼ê³¼ ë§¤í•‘í•˜ì§€ ì•Šê² ë‹¤ëŠ” ì˜ë¯¸ë¡œ JPAê°€ ì¸ì‹í•œë‹¤.<br />
-&gt; ë”°ë¼ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë„ í•˜ì§€ì•Šê³ , ì¡°íšŒí•  ë•Œ ì—­ì‹œ ë§¤í•‘ë˜ì§€ ì•ŠëŠ”ë‹¤.<br />
-&gt; ì£¼ë¡œ ì„ì‹œ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì—ì„œ ì‚¬ìš©í•˜ê¸°ìœ„í•œ ìš©ë„<br />
-&gt; ì¦‰, DBì—ëŠ” ì €ì¥í•˜ê³  ì‹¶ì§€ ì•Šì€ë°, ë”ë¯¸ë¡œ ë°ì´í„° ì‚¬ìš©í•  ê²½ìš° ì´ìš©í•˜ê¸° ê°€ëŠ¥!</p>

<p><strong>@Enumerated</strong><br />
-&gt; enum íƒ€ì…ê³¼ ë§¤í•‘í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì• ë„ˆí…Œì´ì…˜ì´ë‹¤.<br />
-&gt; ë‘ê°€ì§€ íƒ€ì…ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.  <br />
1). EnumType.ORDINAL : enumì˜ ìˆœì„œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìˆ«ìë¥¼ í…Œì´ë¸”ì— ì €ì¥<br />
2). EnumType.STRING : enumì˜ ì´ë¦„ì„ í…Œì´ë¸”ì— ì €ì¥<br />
-&gt; ex) @Enumerated(EnumType.STRING)</p>

<hr />

<p>ì˜¤ëŠ˜ì˜ JPAê³µë¶€ëŠ” ì—¬ê¸°ê¹Œì§€!<br />
í™•ì‚´í•˜ JDBCë¥¼ ì¡°ê¸ˆ ê³µë¶€í•˜ê³  ì™€ì„œ JPAë¥¼ ë³´ë‹ˆê¹Œ<br />
í›¨ì”¬ ì´í•´ê°€ ë¹ ë¥´ê³  ì˜ë˜ëŠ” ê²ƒ ê°™ë‹¤.</p>

<p>ì•„ì§ ì—°ê´€ ê´€ê³„ ë§µí•‘ì— ëŒ€í•´ì„œëŠ” ë°°ìš°ì§€ ì•Šì•˜ì§€ë§Œ<br />
ê¸°ë³¸ì ì¸ í…Œì´ë¸”ê³¼ ì—°ê²°ë˜ì–´ì§€ëŠ” ê³¼ì •ì´ë¼ë“ ê°€<br />
ê¸°ë³¸ì ì¸ ê°œë…ë“¤ì„ ë°°ìš°ê³  ì¸í…”ë¦¬ì œì´ë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ëŠ” ê³¼ì •ë“¤ì´<br />
ë„ˆë¬´ ì¬ë°Œì–´ì„œ ì‹œê°„ì´ í›…í›… ì§€ë‚˜ê°„ ê²ƒ ê°™ë‹¤.</p>

<p>ì˜¤ëŠ˜ ê³µë¶€ëŠ” ì—¬ê¸°ì„œ ë!!</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ì§œì¥ë©´ ê³±ëº´ê¸°</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /></entry><entry><title type="html">TIL) Spring Data JDBC Pagination</title><link href="http://localhost:4000/til/2022/10/31/til.html" rel="alternate" type="text/html" title="TIL) Spring Data JDBC Pagination" /><published>2022-10-31T00:00:00+09:00</published><updated>2022-10-31T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/10/31/til</id><content type="html" xml:base="http://localhost:4000/til/2022/10/31/til.html"><![CDATA[<p>í•œ ì£¼ê°€ ì§€ë‚˜ê³  ìƒˆë¡œìš´ ì£¼ê°€ ì°¾ì•„ì™”ë‹¤.<br />
ë‚´ê°€ ê³µë¶€í•˜ê³  ìˆëŠ” ì™€ì¤‘ì—ë„<br />
ì„¸ìƒì€ ëŒì•„ê°€ê³  ìˆë‹¤.</p>

<p>ëˆ„êµ°ê°€ì˜ ì‹œê°„ì€ ëŠë¦¬ê²Œ ê°€ê³  ëˆ„êµ°ê°€ì˜ ì‹œê°„ì€ ë¹ ë¥´ê²Œ ê°ˆ ê²ƒ ê°™ë‹¤.<br />
ì‹œê°„ì„ ì–´ë–»ê²Œ ì¨ì•¼ ì˜ ì»ì§€? ë¼ëŠ” ë¬¼ìŒì´ ìš”ì¦˜ ìê¾¸ ìƒê¸´ë‹¤.</p>

<p>ê³µë¶€ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•˜ê¸°ì—ëŠ” ì˜ì§€ê°€ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒ ê°™ë‹¤.<br />
ì£¼ë§ë™ì•ˆ ì—¬ëŸ¬ê°€ì§€ ìê·¹ì„ ë°›ìœ¼ë©´ì„œ, ë‹¤ì‹œí•œë²ˆ ê³µë¶€ì— ëŒ€í•œ ì˜ì§€ì™€<br />
ë‚´ê°€ ëª©í‘œë¡œê°€ì§„ ë‚´ìš©ì„ ìƒê¸°í•˜ë©´ì„œ ì´ë²ˆì£¼ë¶€í„° ë‹¤ì‹œ ì„í•´ë³´ë ¤í•œë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQXIC8mWHwkvUJVmPkxrKAdOzOu1PCHFrLIQEOAjT3mrp4fwj0NsNUw2Pfv6Ju2EYysMjkR0rU=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<hr />

<p>ì˜¤ëŠ˜ë„ Spring data JDBCë¥¼ ì—°ìŠµí•´ë³´ëŠ” ë‚ ì´ë‹¤.<br />
ë§ˆì§€ë§‰ìœ¼ë¡œ ì—°ìŠµí•´ë³´ëŠ” ë‚ ì´ê³ <br />
ë‚´ì¼ë¶€í„°ëŠ” ë³¸ê²©ì ìœ¼ë¡œ JPAì— ëŒ€í•´ ê³µë¶€í•´ë³´ëŠ” ì‹œê°„ì´ë‹¤.</p>

<p>ì‚¬ì‹¤ JDBCì‚¬ìš© ë°©ë²•ë³´ë‹¤ëŠ” ê°ì²´ê°„ ì´ë™<br />
Mapper, DTO, Service ë“± ë¡œì§ êµ¬í˜„ì„ ì£¼ë¡œ ì—°ìŠµí•œ ê²ƒ ê°™ë‹¤.</p>

<h2 id="pagination">Pagination</h2>
<p>ì˜¤ëŠ˜ êµ¬í˜„í•´ë³¼ ë‚´ìš©ì€ Paginationì„ êµ¬í˜„í•  ê²ƒì´ë‹¤.<br />
í•œê¸€ë¡œ í˜ì´ì§€ë„¤ì´ì…˜ì´ë¼ ë¶€ë¥¸ë‹¤.<br />
í˜ì´ì‹œë„¤ì´ì…˜ì´ë€?</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQ8Zaxag8YR_XCL1ZHlXct3gU2Ai1QnIiP0-1fEbT8ol69R3RStfVwuhswGxDBKzTPMB6nfwAM=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ê°„ë‹¨í•œ ì˜ˆì œë¡œ êµ¬ê¸€ì„ í†µí•´ ê²€ìƒ‰í•  ê²½ìš°<br />
ìš°ë¦¬ëŠ” í•´ë‹¹ ê²€ìƒ‰ì–´ì— ëŒ€í•œ ë‚´ìš©ì´ ì­‰ë‚˜ì˜¤ê³ , ë‹¤ìŒ ë‚´ìš©ì€<br />
í˜ì´ì§€ë¡œ ë‹¤ìŒì„ ëˆŒëŸ¬ ë„˜ì–´ê°€ì„œ í™•ì¸í•œë‹¤.</p>

<p>ì´ì— í•´ë‹¹í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ êµ¬í˜„í•  ê²ƒì´ë‹¤.</p>

<h2 id="êµ¬í˜„">êµ¬í˜„</h2>

<p>ë¬¸ì œ1. RequsetParamë¥¼ í†µí•´ page, sizeê°’ì„ ë°›ëŠ”ë‹¤<br />
-&gt; page: ëª‡ë²ˆ í˜ì´ì§€, size: í‘œì‹œ ìˆ˜ëŸ‰</p>

<p>ë¬¸ì œ2. ì•„ë˜ì™€ ê°™ì´ ë°ì´í„°ê°€ ë‹´ê¸´ Json ê°ì²´ë¥¼ ë°˜í™˜<br />
-&gt; ì¡°íšŒí•œ ë°ì´í„°ëŠ” memberId ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•  ê²ƒ</p>

<p>ì°¸ê³ </p>
<ol>
  <li>DBì—ëŠ” 20ê°œì˜ ë°ì´í„°ê°€ ì €ì¥ë˜ì–´ìˆë‹¤.</li>
</ol>

<p>Page = 1, Size = 10 ì¼ ë•Œì˜ ì˜ˆì œ</p>

<pre><code class="language-JSON">{
    "data": [
        {
            "memberId": 20,
            "email": "hgd20@gmail.com",
            "name": "í™ê¸¸ë™20",
            "phone": "010-2020-2020"
        },
        {
            "memberId": 19,
            "email": "hgd19@gmail.com",
            "name": "í™ê¸¸ë™19",
            "phone": "010-1919-1919"
        },
        {
            "memberId": 18,
            "email": "hgd18@gmail.com",
            "name": "í™ê¸¸ë™18",
            "phone": "010-1818-1818"
        },
        {
            "memberId": 17,
            "email": "hgd17@gmail.com",
            "name": "í™ê¸¸ë™17",
            "phone": "010-1717-1717"
        },
        {
            "memberId": 16,
            "email": "hgd16@gmail.com",
            "name": "í™ê¸¸ë™16",
            "phone": "010-1616-1616"
        },
        {
            "memberId": 15,
            "email": "hgd15@gmail.com",
            "name": "í™ê¸¸ë™15",
            "phone": "010-1515-1515"
        },
        {
            "memberId": 14,
            "email": "hgd14@gmail.com",
            "name": "í™ê¸¸ë™14",
            "phone": "010-1414-1414"
        },
        {
            "memberId": 13,
            "email": "hgd13@gmail.com",
            "name": "í™ê¸¸ë™13",
            "phone": "010-1313-1313"
        },
        {
            "memberId": 12,
            "email": "hgd12@gmail.com",
            "name": "í™ê¸¸ë™12",
            "phone": "010-1212-1212"
        },
        {
            "memberId": 11,
            "email": "hgd11@gmail.com",
            "name": "í™ê¸¸ë™11",
            "phone": "010-1111-1111"
        }
    ],
    "pageInfo": {
        "page": 1,
        "size": 10,
        "totalElements": 20,
        "totalPages": 2
    }
}
</code></pre>

<p>DBì— 20ê°œì˜ ë°ì´í„°ê°€ MEMBER Tableì— ì €ì¥ì´ ë˜ì–´ìˆê³ <br />
ìš°ë¦¬ê°€ í•´ì•¼í•˜ëŠ” ê²ƒì€ page, sizeì˜ ê°’ì„ ë°›ì•„<br />
í•´ë‹¹ ê°ì²´ë¥¼ ì¡°ë¦½í•˜ì—¬ JSONìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì–´ì•¼í•œë‹¤.</p>

<p>ê·¸ë ‡ê²Œ ìƒê°í•˜ì—¬ ë‚˜ëŠ” í¬ê²Œ 6ê°€ì§€ ê³¼ì •ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì§„í–‰í–ˆë‹¤.</p>

<ol>
  <li>í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì—ì„œ ë°ì´í„° ìš”ì²­ ë°›ì€ë°ì´í„°ë¥¼ ë§µí•‘í•œ ê°ì²´ë¥¼ ë§Œë“¬</li>
  <li>Serviceì—ì„œ Member ì „ì²´ ì¡°íšŒí•œ í›„ í•„ìš”í•œ ë°ì´í„°ë§Œ ì •ë¦¬í•´ ê°ì²´ë¡œ ë§Œë“¬</li>
  <li>1,2ë²ˆì—ì„œ ë§Œë“  ê°ì²´ë¡œ ResponseDto ë§µí•‘í•¨.</li>
  <li>3ë²ˆì—ì„œ ë§µí•‘í•˜ì—¬ ë§Œë“  ì „ì²´ List ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ ì‘ë‹µ</li>
</ol>

<p>í•´ë‹¹ ê³¼ì •ì„ í†µí•´ì„œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í–ˆê³ ,  ì‹¤ì œë¡œ Paginationì„ í•˜ê¸°ìœ„í•´<br />
Springì—ì„œ ë„ì›€ìŒ ì£¼ëŠ” í´ë˜ìŠ¤ Page, Pageable, PageRequestë¥¼ ì´ìš©í•´<br />
ìë™ìœ¼ë¡œ Paginationì„ í•´ì¤„ ìˆ˜ ë„ ìˆë‹¤.</p>

<p>ìš°ì„  ë‚˜ëŠ” ìœ„ë°©ë²•ì„ ì•ˆì“°ê³  ì§ì ‘ ì½”ë“œë¡œ ì •ë¦¬í•´ì„œ ë³´ë‚´ëŠ” ë°©ë²•ì„ íƒí–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@GetMapping</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">getMembers</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">"page"</span><span class="o">)</span> <span class="nd">@Positive</span> <span class="kt">int</span> <span class="n">page</span><span class="o">,</span>
                                 <span class="nd">@RequestParam</span><span class="o">(</span><span class="s">"size"</span><span class="o">)</span> <span class="nd">@Positive</span> <span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//PageInfo ë°ì´í„° ë§µí•‘</span>
    <span class="nc">MemberPageInfoDto</span> <span class="n">memberPageInfoDto</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">dataToMemberPageInfoDto</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="n">size</span><span class="o">);</span>

    <span class="c1">//Member ì „ì²´ì¡°íšŒ ì„œë¹„ìŠ¤ ë¡œì§ ì‹¤í–‰</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span> <span class="n">memberService</span><span class="o">.</span><span class="na">findMembers</span><span class="o">(</span><span class="n">memberPageInfoDto</span><span class="o">);</span>

    <span class="c1">//ê°ì²´ë“¤ ResponsePageDto Mapping</span>
    <span class="nc">MemberResponsePageDto</span> <span class="n">response</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">membersToMemberResponsePageDto</span><span class="o">(</span><span class="n">members</span><span class="o">,</span><span class="n">memberPageInfoDto</span><span class="o">);</span>

    <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">response</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">OK</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìš°ì„  Controllerì˜ getMembersë¥¼ ì‘ì„±.<br />
0ì´ì•„ë‹Œ ì–‘ì˜ì •ìˆ˜ë§Œ í¬í•¨í•œ ë°ì´í„°ë¡œ page,sizeë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ ì²«ë²ˆì§¸ ì¤„ PageInfoì— ë°ì´í„° ë§µí•‘ í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³ <br />
Mapperë¥¼ êµ¬í˜„í•˜ì—¬ ë°ì´í„°ë¥¼ ì „ë‹¬í–ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">default</span> <span class="nc">MemberPageInfoDto</span> <span class="nf">dataToMemberPageInfoDto</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">){</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">MemberPageInfoDto</span><span class="o">(</span><span class="n">page</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">);</span>
<span class="o">};</span>
<span class="k">default</span> <span class="nc">MemberResponsePageDto</span> <span class="nf">membersToMemberResponsePageDto</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span><span class="o">,</span> <span class="nc">MemberPageInfoDto</span> <span class="n">memberPageInfoDto</span><span class="o">){</span>
    <span class="nc">MemberResponsePageDto</span> <span class="n">memberResponsePageDtos</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MemberResponsePageDto</span><span class="o">(</span><span class="n">members</span><span class="o">,</span><span class="n">memberPageInfoDto</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">memberResponsePageDtos</span><span class="o">;</span>
<span class="o">};</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberPageInfoDto</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">page</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">totalElements</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">totalPages</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>page, sizeë¥¼ ì´ìš©í•´ ë‚˜ë¨¸ì§€ ê°’ì´ 0ì¸ ê°ì²´ë¥¼ ë§Œë“¤ì—ˆë‹¤.<br />
ê·¸ë¦¬ê³  ì•„ë˜ìˆëŠ” ë©”ì„œë“œëŠ” ì‘ë‹µí• ë•Œ ì¡°ë¦½ì„ í•´ì£¼ëŠ” ë©”ì„œë“œì´ë‹¤.<br />
ì¸ìë¡œëŠ” Memberë¥¼ Listí™”í•œ ë°ì´í„°ì™€ ë°©ê¸ˆ ìœ„ì—ì„œ ì „ë‹¬í•œ<br />
MemberPageInfoDtoê°ì²´ë¥¼ ë°›ëŠ”ë‹¤.<br />
ì´ ë‘ê°œì˜ ë°ì´í„°ë¥¼ ë°›ì•„ ìµœì¢…ì ìœ¼ë¡œ</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberResponsePageDto</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">;</span>
    <span class="nc">MemberPageInfoDto</span> <span class="n">pageInfo</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì´ ì‘ë‹µí´ë˜ìŠ¤ì— ë°ì´í„°ë¥¼ ë‹´ì•„ì„œ ë°˜í™˜í•˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p>ì´ë ‡ê²Œ Mapperì™€ ì‘ë‹µë°ì´í„° í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆê³ <br />
ì´ì œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ Member í´ë˜ìŠ¤ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•´<br />
ìš°ë¦¬ê°€ ì›í•˜ëŠ” page, sizeì˜ ë§ì¶°ì„œ Member Listë¥¼ ë°˜í™˜í•´ì¤˜ì•¼í•œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findMembers</span><span class="o">(</span><span class="nc">MemberPageInfoDto</span> <span class="n">memberPageInfoDto</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// member ì „ì²´ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬ ì¡°íšŒ</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span> <span class="o">=</span>  <span class="n">memberRepository</span><span class="o">.</span><span class="na">findAllByOrderByMemberIdDesc</span><span class="o">();</span>

    <span class="c1">// Pagenation Service ë¡œì§, ì •ë¦¬ëœ Member Listë§Œ ë°˜í™˜</span>
    <span class="k">return</span> <span class="nf">executionPagenation</span><span class="o">(</span><span class="n">members</span><span class="o">,</span> <span class="n">memberPageInfoDto</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">executionPagenation</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">members</span><span class="o">,</span> <span class="nc">MemberPageInfoDto</span> <span class="n">pageInfo</span><span class="o">){</span>
    <span class="c1">// page, size ê°€ì ¸ì˜¤ê¸°</span>
    <span class="kt">int</span> <span class="n">page</span> <span class="o">=</span> <span class="n">pageInfo</span><span class="o">.</span><span class="na">getPage</span><span class="o">();</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">pageInfo</span><span class="o">.</span><span class="na">getSize</span><span class="o">();</span>

    <span class="c1">// members ìˆ˜ëŸ‰ íŒŒì•… í›„ TotalElements, TotalPages Data ì¶”ê°€</span>
    <span class="n">pageInfo</span><span class="o">.</span><span class="na">setTotalElements</span><span class="o">(</span><span class="n">members</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="k">if</span><span class="o">(</span><span class="n">members</span><span class="o">.</span><span class="na">size</span><span class="o">()&lt;=</span><span class="n">size</span><span class="o">){</span>
        <span class="n">pageInfo</span><span class="o">.</span><span class="na">setTotalPages</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">memberSize</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="n">members</span><span class="o">.</span><span class="na">size</span><span class="o">()/</span><span class="n">size</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">memberLeft</span> <span class="o">=</span> <span class="n">members</span><span class="o">.</span><span class="na">size</span><span class="o">()%</span><span class="n">size</span><span class="o">;</span>
    <span class="k">if</span><span class="o">(</span><span class="n">memberLeft</span><span class="o">!=</span><span class="mi">0</span><span class="o">)</span> <span class="n">memberSize</span><span class="o">++;</span>
        <span class="n">pageInfo</span><span class="o">.</span><span class="na">setTotalPages</span><span class="o">(</span><span class="n">memberSize</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// page, sizeë§Œí¼ì˜ Dataë§Œ ë‹´ì€ List ë°˜í™˜</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">membersMakeUp</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
    <span class="kt">int</span> <span class="n">remainPage</span> <span class="o">=</span> <span class="n">members</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">%</span> <span class="n">size</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">from</span> <span class="o">=</span> <span class="o">(</span><span class="n">page</span><span class="o">-</span><span class="mi">1</span><span class="o">)*</span><span class="n">size</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">to</span> <span class="o">=</span> <span class="o">(</span><span class="n">remainPage</span><span class="o">!=</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">pageInfo</span><span class="o">.</span><span class="na">getTotalPages</span><span class="o">()==</span><span class="n">page</span><span class="o">)</span> <span class="o">?</span> <span class="n">from</span><span class="o">+</span><span class="n">remainPage</span> <span class="o">:</span> <span class="n">from</span><span class="o">+</span><span class="n">size</span><span class="o">;</span>

    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">from</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">to</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
        <span class="n">membersMakeUp</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">members</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>
    <span class="o">}</span>
    
    <span class="k">return</span> <span class="n">membersMakeUp</span><span class="o">;</span>
<span class="o">}</span>
        
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MemberRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="nf">findAllByOrderByMemberIdDesc</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ Service ë¡œì§ì„ êµ¬í˜„í–ˆë‹¤.<br />
ì²˜ìŒì— ë§µí•‘í–ˆë˜ PageInfo ê°ì²´ì— ë‚˜ë¨¸ì§€ ê°’ì„ì„<br />
setterë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì…ë ¥í•´ì¤€ ë‹¤ìŒì—</p>

<p>Member í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ì—¬<br />
ë°›ì€ ë°ì´í„°ë¥¼ pageì™€ sizeê°’ìœ¼ë¡œ ì›í•˜ëŠ” í˜ì´ì§€ì—<br />
ìˆ˜ëŸ‰ë³„ë¡œ í‘œì‹œê°€ ë  ìˆ˜ ìˆê²Œë” í”„ë¡œê·¸ë˜ë°í•˜ì—¬<br />
Member Listë¥¼ ìµœì¢…ì ìœ¼ë¡œ ë°˜í™˜í•˜ê²Œ í•´ì£¼ì—ˆë‹¤.</p>

<p>ì´ë ‡ê²Œ ë˜ë©´ ìµœì¢…ì ìœ¼ë¡œ í˜ì´ì§€ì— ë§ëŠ” Member List ê°ì²´ì™€<br />
PageInfo ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ìµœì¢…ì ìœ¼ë¡œ<br />
MemberResponsePageDto í´ë˜ìŠ¤ íƒ€ì…ìœ¼ë¡œ ë§µí•‘í•´ì„œ ì‘ë‹µë°ì´í„°ë¥¼<br />
ResponseEntityë¥¼ í†µí•´ ë°˜í™˜í•˜ë„ë¡ í•˜ë©´ !!</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQULqdlINeqzZ_bz-zE7r0uUK9OxGxwpQRGjmUuF-O8-xqZcIe1swGHu0Z2JgvVykvTYEut4aI=w1512-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>page=1, size=2 ë¡œ í•˜ì˜€ì„ ê²½ìš°ì˜ ë°˜í™˜ëœ Jsonì˜ ëª¨ìŠµ.<br />
totalElements = 20ê°œì˜ ë°ì´í„°<br />
totalPages = 10ê°œì˜ í˜ì´ì§€.</p>

<p>ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ëª¨ìŠµì´ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.<br />
<a href="https://velog.io/@bagt/0704-Spring-Pagination-API-%ED%8E%98%EC%9D%B4%EC%A7%80%EB%84%A4%EC%9D%B4%EC%85%98">Spring Pagination API</a>ë¥¼ ì´ìš©í•´ ì‘ì„±í•˜ëŠ” ë°©ë²•ì„ ì°¸ê³ í•´ë³´ì<br />
í•´ë‹¹ ë°©ë²•ì€ ì„ ë°°ê¸°ìˆ˜ì—ì„œ Spring APIë¥¼ ì´ìš©í•´ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•œ ëª¨ìŠµì´ë‹¤.</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸ <br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ë¼ë©´</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[í•œ ì£¼ê°€ ì§€ë‚˜ê³  ìƒˆë¡œìš´ ì£¼ê°€ ì°¾ì•„ì™”ë‹¤. ë‚´ê°€ ê³µë¶€í•˜ê³  ìˆëŠ” ì™€ì¤‘ì—ë„ ì„¸ìƒì€ ëŒì•„ê°€ê³  ìˆë‹¤.]]></summary></entry><entry><title type="html">TIL) Spring JDBC ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ê³„ì¸µ 2</title><link href="http://localhost:4000/til/2022/10/28/til.html" rel="alternate" type="text/html" title="TIL) Spring JDBC ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ê³„ì¸µ 2" /><published>2022-10-28T00:00:00+09:00</published><updated>2022-10-28T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/10/28/til</id><content type="html" xml:base="http://localhost:4000/til/2022/10/28/til.html"><![CDATA[<p>ì–´ëŠìƒˆ ë²Œì¨ í•œì£¼ê°€ ëë‚¬ë‹¤.</p>

<p>ì½”ë“œìŠ¤í…Œì´ì¸  ì‹œì‘ ì „ë¶€í„° 5ê°œì›” ë™ì•ˆ<br />
ì œëŒ€ë¡œ ì‰¬ì§€ ëª»í•˜ê³  ê³µë¶€ë¥¼ ì§€ì†í•˜ë‹¤ë³´ë‹ˆ ì‚´ì§ ë²ˆì•„ì›ƒì´<br />
ì˜¤ê¸´í•˜ëŠ” ê²ƒ ê°™ë‹¤.. ê³µë¶€ëŠ” ì¦ê²ê³  ì–¼ë¥¸ ì´ ê¸°ìˆ ì„ ìŠµë“í•´<br />
ì ìš©í•˜ê³  ì‹¶ì§€ë§Œ,, ë„ˆë¬´ ì˜¤ë«ë™ì•ˆ ì—¬í–‰ì„ ê°€ì§€ ëª»í•´ì„œ<br />
ì–´ë””ë¡ ê°€ í›Œì© ë– ë‚˜ê³  ì‹¶ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSBGqdkMkYbzBmUzeLdSEzgYHBaRbLNMmENQpr1mjJdIXzRObuGsIxR3g7G770hOSSAJTkT3Gc=w1512-h810" align="left" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<p>ê·¸ë˜ë„ ëª©í‘œì— ë„ë‹¬í•˜ê¸°ìœ„í•´ ì—´ì‹¬íˆ í•´ë³´ì !!</p>

<hr />

<p>ì–´ì œëŠ” Spring data JDBCë¥¼ ì‚¬ìš©í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì•˜ë‹¤.</p>

<p>ëª‡ì¼ì „ê¹Œì§€ëŠ” ì´í•´ê°€ ë˜ì„œ ì¬ë°Œì—ˆëŠ”ë°,,<br />
ê¸‰ê²©í•œ ë‚œì´ë„ ìƒìŠ¹ìœ¼ë¡œ ì¸í•œ  ì¦ê±°ì›€ê³¼ ì–´ì§€ëŸ¬ì›€ì´ ê³µì¡´í–ˆë‹¤.</p>

<p>ìš”ëŠ” JDBC ì‚¬ìš©ë²•ì´ ì–´ë ¤ì› ë˜ ê²ƒ ë³´ë‹¤ëŠ”<br />
Database, Service, Dto, Mapper, Controllerì˜ ì—°ë™ê³¼<br />
ë°ì´í„° ì „ë‹¬íë¦„ì„ ì •í™•íˆ ìºì¹˜í•˜ê¸°ê°€ ì–´ë ¤ìš´ê²Œ ë„ˆë¬´ ì»·ì—ˆë‹¤.</p>

<p>ê·¸ë„ ê·¸ëŸ´ ê²ƒì´ ì´ ëª¨ë“  ë‚´ìš©ì„ ì¼ì£¼ì¼ì•ˆì—<br />
ì „ë¶€ í•™ìŠµí•œ ë‚´ìš©ì´ë¼ ê·¸ëŸ° ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤.</p>

<p>ê·¸ë˜ë„ ì˜¤ëŠ˜ ë°°ìš´ ê²ƒì„ ì°¨ê·¼ì°¨ê·¼ ì •ë¦¬í•´ë³´ì</p>

<p><br /></p>

<h3 id="domain-driven-design">Domain Driven Design</h3>

<p>Domain Driven DesignëŠ” DDDë¼ê³  ì¤„ì—¬ ë¶ˆë¥¸ë‹¤.<br />
ìš°ë¦¬ë§ë¡œ ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„ ì •ë„ë¡œ í•´ì„í•  ìˆ˜ ìˆëŠ”ë°<br />
ìš©ì–´ì˜ ì˜ë¯¸ ê·¸ëŒ€ë¡œ ë„ë©”ì¸ ìœ„ì£¼ì˜ ì„¤ê³„ ê¸°ë²•ì„ ì˜ë¯¸í•œë‹¤.</p>

<p><strong>Aggregateë€?</strong><br />
ê´€ë ¨ ë„ë©”ì¸ì„ í•˜ë‚˜ì˜ êµ°ì§‘ìœ¼ë¡œ ë¬¶ì€ ê²ƒì„ ì˜ë¯¸í•œë‹¤.<br />
ì˜ˆë¥¼ë“¤ì–´ ì»¤í”¼ì£¼ë¬¸ì„ ì•±ìœ¼ë¡œ ë§Œë“ ë‹¤ê³  ê°€ì •í•˜ ì˜€ì„ ê²½ìš°</p>

<p>íšŒì› (íšŒì›Id, íšŒì›ì´ë¦„, íšŒì›ì´ë©”ì¼ ë“±..)<br />
ì£¼ë¬¸ (ì£¼ë¬¸Id, ì£¼ë¬¸ì‹œê°„, ì£¼ë¬¸ìƒíƒœ ë“±..)<br />
ìŒë£Œ (ìŒë£ŒId, ìŒë£Œì¢…ë¥˜, ìŒë£Œê°€ê²©, ìŒë£Œì¡°ë¦¬ì‹œê°„ ë“±..)</p>

<p>ì´ë ‡ê²Œ 3ê°œì˜ êµ°ì§‘(íšŒì›,ì£¼ë¬¸,ìŒë£Œ)ë¡œ ë‚˜ëŠ” ê²ƒì„ Aggregateë¼ê³  í•œë‹¤.</p>

<p><strong>Aggregate routeë€?</strong><br />
Aggregate routeëŠ” ë§ê·¸ëŒ€ë¡œ êµ°ì§‘ì¤‘ì— ê¸°ì¤€ì´ ë˜ëŠ” ë¿Œë¦¬. ì¦‰ ì •ë³´ë‹¤<br />
ê°ì²´ë¥¼ ì°¸ì¡°í•˜ê¸° ìœ„í•œ ê¸°ì¤€ì´ë˜ëŠ” ê°’ì´ë¼ê³  ìƒê°í•˜ë©´ ê°„ë‹¨í•  ê²ƒ ê°™ë‹¤.<br />
ë§ ëœ»ì—ì„œ ì˜¤ë“¯ì´ ë³€ê²½ì´ë˜ì§€ ì•ŠëŠ” ê°’ìœ¼ë¡œ ì¡ì•„ì•¼í•œë‹¤. (ex: id)</p>

<p>í•œë§ˆë”” ì •ë¦¬ : Aggregateì˜ ëŒ€í‘œë‹¤ !</p>

<p><br /></p>

<h3 id="entity-ì„¤ê³„">Entity ì„¤ê³„</h3>
<p>ì´ì „ì— í•™ìŠµí–ˆë˜ RDBMS ì±•í„°ì—ì„œ<br />
ERD(Entity Relationship Diagram) ì„¤ê³„í• ë•Œ ì ê¹ ê³µë¶€í–ˆì—ˆë‹¤.<br />
1:1, 1:N, N:N ê´€ê³„ë¥¼ ì •ì˜í•˜ê³ , ì™¸ë˜í‚¤(foreign key)ë¡œ<br />
ë‹¤ë¥¸ Entityë¥¼ Joiní•´ ê°’ì„ ì°¸ì¡°ê°€ ê°€ëŠ¥í–ˆì—ˆë‹¤.</p>

<p>ìš°ë¦¬ê°€ ì˜ˆì œë¡œ ë§Œë“¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Entityì˜ ê´€ê³„ë¥¼ ì •ì˜í•˜ê³ <br />
í”„ë¡œê·¸ë¨ì„ ì‹œì‘í•˜ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>

<h3 id="ì˜¤ëŠ˜-ë°°ìš´-ê²ƒì„-ì ì–´ë³´ì-">ì˜¤ëŠ˜ ë°°ìš´ ê²ƒì„ ì ì–´ë³´ì !</h3>

<p><strong>1). AggregateReference</strong><br />
-. JDBC ë¼ì´ë¸ŒëŸ¬ë¦¬ ì•ˆì— ë“¤ì–´ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.<br />
-. Table ì™œë˜í‚¤ì²˜ëŸ¼ ë‹¤ë¥¸ í´ë˜ìŠ¤ì˜ Aggregate Routeë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤.</p>

<p><strong>2). @Table</strong><br />
-. Tableì˜ ì´ë¦„ì„ ì •ì˜í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.<br />
-. .sql íŒŒì¼ì— ì •ì˜ëœ í…Œì´ë¸”ì˜ ì´ë¦„ê³¼ ì—°ê²°í•´ì¤€ë‹¤ê³  ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.<br />
-. @Tableì´ ì„¤ì •ì´ ì•ˆë˜ì–´ ìˆì„ ê²½ìš° í´ë˜ìŠ¤ì´ë¦„ê³¼ ë™ì¼í•œ í…Œì´ë¸”ì„ ì—°ê²°í•´ì¤€ë‹¤.</p>

<p><strong>3). @MappedCollection</strong><br />
-. Entity í´ë˜ìŠ¤ ê°„ì˜ ì—°ê´€ ê´€ê³„ë¥¼ ë§ºì–´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì´ë‹¤.</p>

<p>1,2,3ë²ˆì— ëŒ€í•œ ì˜ˆì œë¥¼ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì‚´í´ë³´ì</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE IF NOT EXISTS ORDERS (
    ORDER_ID bigint NOT NULL AUTO_INCREMENT,
    MEMBER_ID bigint NOT NULL,
    PRIMARY KEY (ORDER_ID),
    FOREIGN KEY (MEMBER_ID) REFERENCES MEMBER(MEMBER_ID)
);
</code></pre></div></div>
<p>SQLêµ¬ë¬¸ìœ¼ë¡œ ORDERS í…Œì´ë¸”ì„ ë§Œë“¤ì—ˆê³ <br />
ë‚´ë¶€ì˜ ORDER_ID, MEMBER_IDë¥¼ ì»¬ëŸ¼ì„ ë§Œë“¤ì—ˆë‹¤.<br />
ê°ê° ê¸°ë³¸í‚¤ì™€ ì™¸ë˜í‚¤ë¡œ ë“±ë¡í•˜ì˜€ë‹¤.</p>

<p><br /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@Table</span><span class="o">(</span><span class="s">"ORDERS"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Order</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">orderId</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">AggregateReference</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">memberId</span><span class="o">;</span>

    <span class="nd">@MappedCollection</span><span class="o">(</span><span class="n">idColumn</span> <span class="o">=</span> <span class="s">"ORDER_ID"</span><span class="o">)</span>
    <span class="kd">private</span> <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">CoffeeRef</span><span class="o">&gt;</span> <span class="n">orderCoffees</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedHashSet</span><span class="o">&lt;&gt;();</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìš°ë¦¬ê°€ DBì™€ ì—°ê²°í•˜ê¸°ìœ„í•´ Repository ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ì—ˆê³ <br />
Spring data JDBC ê¸°ìˆ ì„ ì´ìš©í•˜ëŠ” CrudRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•„<br />
DBì— ì ‘ê·¼í•˜ì—¬ CRUDë¥¼ ì‚¬ìš©í–ˆì—ˆë‹¤.</p>

<p>Order í´ë˜ìŠ¤ëŠ” ìš°ë¦¬ê°€ ê°ì²´ë¥¼ ë§Œë“¤ì–´<br />
ê°’ì„ ì €ì¥í•´ë‘”ë‹¤ìŒ. í•´ë‹¹ ê°ì²´ë¥¼ CrudRepositoryì˜<br />
ë©”ì„œë“œë¥¼ ì´ìš©í•´ .save();ë¥¼í•˜ì—¬ ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ë©´<br />
ìš°ë¦¬ê°€ ìœ„ì—ì„œ ì •ì˜í•´ë‘” í…Œì´ë¸”ì— ê°’ì´ ì €ì¥ë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p>1).
ì—¬ê¸°ì„œ @Tableì˜ ì—­í• ì„ ì•Œ ìˆ˜ ìˆë‹¤. 
.save();ë¥¼ ì§„í–‰í• ë–„, ì–´ëŠ í…Œì´ë¸”ì— ì €ì¥ì„í•´ì•¼í• ì§€<br />
ì•Œìˆ˜ê°€ ì—†ë‹¤. ê·¸ê²ƒì„ ì§€ì •í•´ì£¼ëŠ” ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ
Tableì´ ORDERSë¡œ ì§€ì •ëœ í…Œì´ë¸”ì„ ì—°ê²°í•´ì¤€ë‹¤.<br />
@Tableì„ ì•ˆë¶™ì—¬ì¤¬ì„ ê²½ìš° ìë™ìœ¼ë¡œ í´ë˜ìŠ¤ì´ë¦„ì˜ í…Œì´ë¸”ì„ ì°¾ì•„ê°„ë‹¤.</p>

<p>2). AggregateReference íƒ€ì…ìœ¼ë¡œ ë§Œë“  memberIdë¼ëŠ” ê°’ì€<br />
Member í´ë˜ìŠ¤ì˜ Longìœ¼ë¡œ ì§€ì •ëœ Idê°’ì„ ì°¸ì¡°í•  ìˆ˜ ìˆê²Œëœë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">AggregateReference</span><span class="o">.</span><span class="na">IdOnlyAggregateReference</span><span class="o">();</span>
</code></pre></div></div>
<p>ìœ„ì˜ ì½”ë“œë¥¼ ì´ìš©í•´ Order ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, ì–´ë–¤ Memberê°€ ì„ íƒí–ˆëŠ”ì§€<br />
ì „ë‹¬ë°›ì€ Idë¥¼ ìœ„ì˜ ë©”ì„œë“œ ì•ˆì— ë„£ì–´ ì¤€ ê°ì²´ë¥¼ ì´ìš©í•´ì„œ ë§Œë“¤ì–´ì£¼ë©´ëœë‹¤.</p>

<p>ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ orderí´ë˜ìŠ¤ ê°ì²´ì˜ memberIdê°’ìœ¼ë¡œ<br />
memberRepositoryì— ì ‘ê·¼í•´ Idë¥¼ ì´ìš©í•´ ê°ì²´ë¥¼ ì°¾ê³ <br />
ë‹¤ë¥¸ ê°’ë“¤ë„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>3). @MappedCollection
N:N ê´€ê³„ì˜ ê²½ìš° ì¤‘ê°„ Entity í´ë˜ìŠ¤ê°€ í•˜ë‚˜ í•„ìš”í•˜ë‹¤.<br />
Order - OrderCoffee - Coffee (1 : N : 1)ê³¼ ê°™ì€ ê·¸ë¦¼ì´ë‹¤.<br />
ê·¸ ì¤‘ê°„ í´ë˜ìŠ¤ëŠ” CoffeeRefê³  í…Œì´ë¸”ì€ ORDER_COFFEEë¡œ ì •í–ˆë‹¤.</p>

<p>idColumn, keyColumnì— ëŒ€í•œ ì„¤ì •ì´ í•„ìš”í•˜ê³ 
Listë¥¼ ì‚¬ìš©í•  ê²½ìš° 2ê°œë‹¤ ì§€ì •í•´ì•¼í•˜ë©°, Setì„ ì‹¸ìš©í•  ê²½ìš° IdColumnë§Œ ì§€ì •í•´ë„ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.</p>

<p>idColumnì€ CoffeeRefì—ì„œ ì‚¬ìš©í•  ì™¸ë˜í‚¤ë¥¼ ì ì–´ì£¼ë©´ëœë‹¤.<br />
CoffeeRef(N): Order(1)ì´ê¸° ë•Œë¬¸ì—<br />
ORDER_IDë¥¼ ì°¸ì¡°í•˜ê²Œ ì ì–´ì£¼ë©´ëœë‹¤.</p>

<p>keyColumnì€ ì™¸ë˜í‚¤ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” í…Œì´ë¸”ì˜ ê¸°ë³¸í‚¤ë¥¼ ì»¬ëŸ¼ëª…ì„ ì§€ì •í•˜ë©´ëœë‹¤.<br />
í˜„ì¬ ê°™ì€ ê²½ìš° keyColumn = â€œORDER_COFFEE_IDâ€ë¡œ ì ì–´ì£¼ë©´ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<hr />

<p>ì´ë ‡ê²Œ ì˜¤ëŠ˜ì€ Spring data JDBCì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ë‹¤.<br />
ì‚¬ì‹¤ ëª‡ê°œëŠ” ê°„ë‹¨í•˜ê²Œ ëŠê»´ì¡ŒëŠ”ë°<br />
ì—°ê´€ ê´€ê³„ Mappingì€ ì•„ì§ ìµìˆ™ì¹˜ì•Šì•„ì„œ ê·¸ëŸ°ì§€<br />
ì¡°ê¸ˆ ë§ì´ ì–´ë µê²Œ ëŠê»´ì¡Œë‹¤.<br />
ë‹¤ìŒì£¼ì— ì‹¤ìŠµì´ ë˜ ìˆëŠ”ë° ì‹¤ìŠµì„ í†µí•´ì„œ ìµìˆ™í•´ì§€ë„ë¡ ë…¸ë ¥í•´ì•¼ê² ë‹¤.</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ë¶ˆê³ ê¸°, ê³„ë€ë¶€ì¹¨, ë°¥</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[ì–´ëŠìƒˆ ë²Œì¨ í•œì£¼ê°€ ëë‚¬ë‹¤.]]></summary></entry><entry><title type="html">TIL) Spring JDBC ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ê³„ì¸µ 1</title><link href="http://localhost:4000/til/2022/10/27/til.html" rel="alternate" type="text/html" title="TIL) Spring JDBC ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ê³„ì¸µ 1" /><published>2022-10-27T00:00:00+09:00</published><updated>2022-10-27T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/10/27/til</id><content type="html" xml:base="http://localhost:4000/til/2022/10/27/til.html"><![CDATA[<p>í•œì£¼ í•œì£¼ê°€ ì •ë§ ë¹ ë¥´ê²Œ ì§€ë‚˜ê°„ë‹¤.<br />
ìƒê°ë³´ë‹¤ ê³µë¶€ë¥¼ ë§ì´í•œ ê²ƒ ê°™ì§€ë§Œ ë³µìŠµí•˜ë©´ì„œ ë’¤ëŒì•„ë³´ë©´<br />
ê·¸ë ‡ê²Œ ë§ì€ ì–‘ì„ ê³µë¶€í•œ ê²ƒë„ ì•„ë‹ˆë‹¤.</p>

<p>ì–¼ë¥¸ ì§€ì‹ì„ ìµíˆê³  í”„ë¡œì íŠ¸ë¥¼ í•´ë³´ê³  ì‹¶ë‹¤ ã… ã… <br />
ê·¸ë‚ ì„ ìœ„í•´ì„œ ì—´ì‹¬íˆ ì§€ì‹ ì¶•ì²™ì„ !!</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSXU951Um_58x0b3_0a2GfPEYsLXEs-jRIv8ABUveSo7Iw5c_T-fB_Qq0joTmnrxVKOQF2vwPY=w1512-h753" align="left" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<hr />

<h2 id="spring-jdbc-ê¸°ë°˜-ì•¡ì„¸ìŠ¤-ê³„ì¸µ">Spring JDBC ê¸°ë°˜ ì•¡ì„¸ìŠ¤ ê³„ì¸µ</h2>

<h3 id="jdbc">JDBC</h3>

<p>JDBCëŠ” Java Database Connectivity ì•½ìë¡œ<br />
Java ë ˆë²¨ì—ì„œ ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ ë° ì—…ë°ì´íŠ¸ í•˜ê±°ë‚˜<br />
ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ Java ë ˆë²¨ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡<br />
Javaì—ì„œ ì œê³µí•´ì£¼ëŠ” í‘œì¤€ ì‚¬ì–‘ ì´ë‹¤.</p>

<p>JDBCì˜ APIë¥¼ ìš°ë¦¬ê°€ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ì—†ë‹¤ê³ í•œë‹¤.<br />
í›„ì— Spring Data JDBC,JPA ê°™ì€ ê¸°ìˆ ë¡œ ë¡œì§ì„ êµ¬í˜„í•  ê²ƒì´ê³ <br />
ìœ„ì™€ ê°™ì€ ê¸°ìˆ ì´ ë‚´ë¶€ì ìœ¼ë¡œëŠ” JDBCë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì—<br />
ë™ì‘ íë¦„ì •ë„ íŒŒì•…í•˜ë ¤ê³  ì´ë²ˆ ì±•í„°ë¥¼ ë°°ìš´ë‹¤ê³  ìƒê°í•˜ë©´ ë  ê²ƒ ê°™ë‹¤.</p>

<h3 id="jdbc-ë™ì‘-íë¦„">JDBC ë™ì‘ íë¦„</h3>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSdBYjY4b6XPdkagpwC70Pqeh7vCehwy-RxI8ijRSwEJfSex_hSMNp9kqyn8Ecs__d_A4XcBU0=w1920-h921" align="left" width="500px" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<p>JDBC APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”<br />
JDBC ë“œë¼ì´ë¸Œë¥¼ ë¨¼ì € ë¡œë”©í•œ í›„ì— ë°ì´í„°ë² ì´ìŠ¤ì™€ ì—°ê²°í•œë‹¤.</p>

<p>ë“œë¼ì´ë²„ëŠ” ê·¸ë¦¼ê³¼ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ì™€ í†µì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë‹¤.<br />
ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ íšŒì‚¬ì— ë§ê²Œ ë“œë¼ì´ë²„ë¥¼ êµ¬í˜„í•´ì„œ ì œê³µí•´ì¤€ë‹¤.</p>

<p><br /></p>

<h3 id="data-access-ê¸°ìˆ -ìœ í˜•">Data Access ê¸°ìˆ  ìœ í˜•</h3>

<p>Springì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ì•¡ì„¸ìŠ¤ ê¸°ìˆ ì—ëŠ”<br />
mybatis, Spring JDBC, Spring Data JDBC, JPA, Spring Data JPA ë“±ì´ ìˆë‹¤ê³ í•œë‹¤.<br />
ì–´ë””ì„ ê°€ í•œë²ˆì”© ë“¤ì–´ë³¸ì ìˆëŠ” ì´ë¦„ë“¤ì´ë‹¤..</p>

<p>ê³¼ê±°ì—ëŠ” SQL ì¿¼ë¦¬ë¬¸ì„ ì§ì ‘ í¬í•¨í•˜ê³  ìˆëŠ” ë°©ì‹ì„ ë§ì´ ì‚¬ìš©í–ˆë‹¤ê³ í•œë‹¤.<br />
í•˜ì§€ë§Œ í˜„ì¬ Java ì§„ì˜ì—ì„œëŠ” SQLì¤‘ì‹¬ì´ ì•„ë‹ˆë¼ <strong>ê°ì²´ì¤‘ì‹¬ì˜ ê¸°ìˆ </strong>ë¡œ<br />
ì§€ì†ì ìœ¼ë¡œ ì´ì „í•˜ê³  ìˆëŠ” ì¶”ì„¸ë¼ê³ í•œë‹¤.  ì¦‰, SQLì¤‘ì‹¬ì˜ í•™ìŠµë³´ë‹¤ëŠ” í˜„ì¬<br />
ë§ì´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¶”ì„¸ì˜ ê°ì²´ì¤‘ì‹¬ì˜ ê¸°ìˆ ì„ í•™ìŠµí•˜ëŠ” ë°©í–¥ì´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>

<p><strong>ê°ì²´ì¤‘ì‹¬ ê¸°ìˆ ?</strong><br />
SQL ì¿¼ë¦¬ë¬¸ì„ ì§ì ‘ ë‹¤ë£¨ê¸°ë³´ë‹¨, ê°ì²´ë¥¼ SQL ì¿¼ë¦¬ë¬¸ìœ¼ë¡œ ë³€í™˜í•´ì£¼ê³ <br />
ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì„ ë§í•œë‹¤ê³  í•œë‹¤. ì´ëŸ¬í•œ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê¸°ìˆ ì„<br />
ê¸°ìˆ ì„ ORM(Object Relational Mapping)ë¼ê³  í•œë‹¤.<br />
ì´í›„ì— ìš°ë¦¬ê°€ ë°°ìš¸ JPAê°€ Javaì—ì„œ ëŒ€í‘œì ì¸ ORM ê¸°ìˆ ì´ë¼ê³ í•œë‹¤.</p>

<h3 id="spring-data-jdbc">Spring Data JDBC</h3>

<p>JPAì˜ ê¸°ìˆ ì ì¸ ë‚œì´ë„ì— ë¹„í•´ ì‹¬í”Œí•˜ë‹¤.<br />
ìš°ì„  Spring data JDBCë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>implementation 'org.springframework.boot:spring-boot-starter-data-jdbc'
</code></pre></div></div>

<p>ì´ì „ì— ìš°ë¦¬ê°€ ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€í–ˆë˜ ê²ƒ ì²˜ëŸ¼<br />
build.gradle ì˜ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ ëœë‹¤.</p>

<p><br /></p>

<p>ë°ì´í„° ë² ì´ìŠ¤ëŠ” ì¸ë©”ëª¨ë¦¬ë¥¼ ì´ìš©í•˜ëŠ” DB H2ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ìŠµí•´ë³´ì</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>runtimeOnly 'com.h2database:h2'
</code></pre></div></div>
<p>ë™ì¼í•˜ê²Œ build.gradleì— h2ë¥¼ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ<br />
ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì£¼ì</p>

<p>ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ì½˜ì†”ì— ì•„ë˜ì™€ ê°™ì´ ë…¸ì¶œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:48abebe3-424c-4a03-a74b-8d1ff2ebc750'
</code></pre></div></div>
<p>ì´ë§ì€, /h2-consle ì£¼ì†Œë¡œ ì ‘ì†í›„ ì—°ê²°í•˜ê¸° ìœ„í•œ<br />
JDBC URL: jdbc:h2:mem:48abebe3-424c-4a03-a74b-8d1ff2ebc750 ë¥¼<br />
ì…ë ¥í•˜ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRZqftCtzQKEaQYKgtzjp9fZAuex8V7dMaxWx4cCGm2lyPXTDljumo3m-BK-BaD9qgz7kZ9Q4s=w1920-h921" align="left" width="500px" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br /><br /></p>

<p>ìœ„ì™€ ê°™ì´ ì…ë ¥í•˜ë©´ H2 DBì— ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤.<br />
ì—¬ê¸°ì„œ JDBC URLì€ ë¶€íŠ¸ì‹¤í–‰ì‹œí‚¬ì‹œ ëœë¤ìœ¼ë¡œ ë³€ê²½ë˜ë¯€ë¡œ ê°„í¸í•˜ê²Œ ì´ìš©í•˜ê¸°ìœ„í•´ì„ </p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">h2</span><span class="pi">:</span>
    <span class="na">console</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/h2 (1)</span> <span class="c1">#Context path ë³€ê²½</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:h2:mem:test</span> <span class="c1">#(2) #JDBC URL ë³€ê²½</span>
</code></pre></div></div>
<p>resources -&gt; application.ymlì—ì„œ ìœ„ì™€ ê°™ì´ ì„¤ì •ì„í•˜ë©´<br />
ì£¼ì†Œë¥¼ h2, JDBC URLì„ ê°„ë‹¨í•˜ê²Œ ì…ë ¥í•´<br />
ì ‘ì†ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ì°¸ê³ í•˜ì!<br />
(application.propertiesë¥¼ application.ymlë¡œ ì´ë¦„ì„ ë°”ê¾¸ë©´ ì‚¬ìš©ê°€ëŠ¥)</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQBCkbEd80Pbqc1LNcCwAqu6urror_D1lOoRgCqj5Eq7UEgpjduEBaq9Jx1XifABSU5eWY7kIg=w1920-h921" align="left" width="500px" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /></p>

<p>ì ‘ì†ì— ì„±ê³µí•  ê²½ìš° ìœ„ì™€ ê°™ì€ í™”ë©´ìœ¼ë¡œ ë“¤ì–´ì™€ì§„ë‹¤.<br />
(ì™¼ìª½ì˜ í…Œì´ë¸”ì€ í˜„ì¬ ë§Œë“¤ì–´ë‘” ê²ƒì´ë¼ ìƒì„±ë˜ì–´ ìˆì§€ë§Œ ì²˜ìŒì—” ì—†ìŒ)</p>

<p>ì—¬ê¸°ê¹Œì§€ê°€ build.gradleì— ì‚¬ìš©í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì˜ì¡´ì£¼ì…í•´ì£¼ì—ˆê³ <br />
application.yml íŒŒì¼ì— ì‚¬ìš©í•  DBë¥¼ ì—°ë™í–ˆë‹¤.<br />
ì´ì œ ìš°ë¦¬ê°€ Spring Data JDBC ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¥¼ ì§„í–‰í•´ì•¼í•œë‹¤.</p>

<p><br /></p>

<p>1). .sql íŒŒì¼ì— í•„ìš”í•œ Table Scriptë¥¼ ì‘ì„±í•œë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE IF NOT EXISTS BABO (
    BABO_ID bigint NOT NULL AUTO_INCREMENT,
    MESSAGE varchar(100) NOT NULL,
    PRIMARY KEY (BABO_ID)
);
</code></pre></div></div>
<p>resources ê²½ë¡œì—ì„œ -&gt; ìƒˆë¡œ ë§Œë“¤ê¸° -&gt; íŒŒì¼ -&gt; ì´ë¦„.sql <br />
ë¡œ ì…ë ¥í•˜ë©´ .sql íŒŒì¼ì´ ìƒê¸¸ ê²ƒì´ë‹¤.</p>

<p>ê·¸ë¦¬ê³  íŒŒì¼ ë‚´ìš©ì—ëŠ” í…Œì´ë¸”ì„ ìƒì„±í•˜ê³  ì•ˆì— BABO_IDë¼ëŠ” <br />
Primary keyë¥¼ ë§Œë“¤ê³   MESSAGEë¼ëŠ” columnë„ ìƒì„±í•˜ëŠ” ì¿¼ë¦¬ë¬¸ì„<br />
ì‘ì„±í•œ íŒŒì¼ì„ ë„£ì–´ë‘ë©´ ëœë‹¤.</p>

<p>2). ì‘ì„±í•œ sqlíŒŒì¼ì„ ì½ì–´ì„œ í…Œì´ë¸”ì„ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ application.ymlíŒŒì¼ì— ì´ˆê¸°í™” ì„¤ì •ì„ ì¶”ê°€í•œë‹¤.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">h2</span><span class="pi">:</span>
    <span class="na">console</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/h2</span>     
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:h2:mem:test</span>    
  <span class="na">sql</span><span class="pi">:</span>
    <span class="na">init</span><span class="pi">:</span>
      <span class="na">schema-locations</span><span class="pi">:</span> <span class="s">classpath*:schema.sql</span> <span class="c1"># ê²½ë¡œ ì¶”ê°€</span>
</code></pre></div></div>
<p>ì´ì œ ìš°ë¦¬ê°€ ë§Œë“  sqlíŒŒì¼ì˜ ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ëŠ” ë°©ë²•ì¸ë°.<br />
íŒŒì¼ì´ë¦„ì„ schema.sqlì´ë¼ê³  ì§€ì •í–ˆê³  í•´ë‹¹ íŒŒì¼ì„<br />
ìœ„ì˜ ì½”ë“œ ì²˜ëŸ¼ ê²½ë¡œë¥¼ ì§€ì •í–ˆë‹¤.<br />
ì˜ˆë¥¼ë“¤ì–´ íŒ¨í‚¤ì§€ êµ¬ì¡°ë¥¼ ë§Œë“ ë‹¤ë©´  ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ìœ„ì¹˜ë¥¼ ì ì–´ ì£¼ë©´ëœë‹¤.<br />
ex) dbë¼ëŠ” í´ë”ì•ˆì— íŒŒì¼ìˆì„ ê²½ìš° = classpath*:db/schema.sql</p>

<p>ì´ë ‡ê²Œ ìœ„ì™€ ê°™ì´ ë‘ ê°€ì§€ ì¤€ë¹„ë¥¼ í•´ì£¼ê³ <br />
ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì‹œ, h2 DBì— ìš°ë¦¬ê°€ ì‘ì„±í•œ<br />
sql êµ¬ë¬¸ëŒ€ë¡œ í…Œì´ë¸”ì´ ìë™ìœ¼ë¡œ ìƒì„±ì´ëœë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQiNzJHU9VaYPm33r-cPauTJm_nL3OsrQbCKTRWufcWP5grpuUIlwe76hRUcyzxILSR53g764I=w1920-h921" align="left" width="500px" /></p>

<p><br /><br /><br /><br /></p>

<p>ì´ë ‡ê²Œ H2 DBì— ë“¤ì–´ê°€ì„œ í™•ì¸í•´ë³´ë©´ ìš°ë¦¬ê°€ ë§Œë“ <br />
í…Œì´ë¸”ì˜ ì´ë¦„ëŒ€ë¡œ Columnë“¤ì´ ìƒì„±ë˜ëŠ”  ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ ì´ì œ ìš°ë¦¬ëŠ” ë ˆì½”ë“œê°’(í–‰ê°’)ì„ ì—¬íƒœê¹Œì§€ ë°°ìš´ ë°©ë²•ì„ í†µí•´ì„œ<br />
DBì— ì €ì¥ì„ í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>

<p><strong>ë§¨ì²˜ìŒì— JDBCëŠ” ìë°”ë ˆë²¨ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜<br />
ë°˜ëŒ€ë¡œ ë°›ì„ ìˆ˜ ìˆë‹¤ê³  ë§¨ì²˜ìŒì— ì–˜ê¸°ë¥¼ í–ˆìŠµë‹ˆë‹¤.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>implementation 'org.springframework.boot:spring-boot-starter-data-jdbc'
</code></pre></div></div>
<p>ë§¨ì²˜ìŒì— ì˜ì¡´ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìš°ë¦¬ê°€ ì¶”ê°€í–ˆì—ˆëŠ”ë°<br />
ì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì•ˆì— ê¸°ëŠ¥ì¤‘ CrudRepositoryë¼ëŠ” í´ë˜ìŠ¤ë¡œ<br />
ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.data.repository.CrudRepository</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MessageRepository</span> <span class="kd">extends</span> <span class="nc">CrudRepository</span><span class="o">&lt;</span><span class="nc">Babo</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="o">{}</span>
</code></pre></div></div>
<p>ì¸í„°í˜ì´ìŠ¤ë¡œ Repositoryë¥¼ ë§Œë“¤ê³  CrudRepositoryë¥¼ ìƒì†í•´ì¤€ ë‹¤ìŒì—<br />
&lt;í´ë˜ìŠ¤, PrimaryKey íƒ€ì…&gt;ì„ ì…ë ¥í•´ì£¼ë©´ ìš°ë¦¬ëŠ” ë‹¤í˜•ì„±ì— ì˜í•´<br />
CrudRepositoryì— ìˆëŠ” ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p><em>(CrudRepositoryë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ì„œ ìœ„ì— importê°€ í•„ìš”í•˜ë©°<br />
importê°€ ë˜ë ¤ë©´ ì˜ì¡´ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼í•œë‹¤ !!)</em></p>

<p>ìœ„ì— ì½”ë“œë¡œ ì´ì œ ìš°ë¦¬ëŠ” infterface MessageRepositoryë¥¼ ì‚¬ìš©í•´<br />
Service í´ë˜ìŠ¤ì—ì„œ Overridingí•˜ì—¬ ì‚¬ìš©í•˜ë©´<br />
ë°ì´í„°ê°€ H2 DBì— ì €ì¥ì´ë˜ëŠ” ì•„ì£¼ ì‹ ë¹„ë¡œìš´ ì¼ì„ ê²ªì„ ìˆ˜ ìˆë‹¤.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MessageService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MessageRepository</span> <span class="n">messageRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">MessageService</span><span class="o">(</span><span class="nc">MessageRepository</span> <span class="n">messageRepository</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">messageRepository</span> <span class="o">=</span> <span class="n">messageRepository</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">Babo</span> <span class="nf">createMessage</span><span class="o">(</span><span class="nc">Babo</span> <span class="n">message</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">messageRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì… í›„<br />
í•´ë‹¹ ê°ì²´ì˜ .save(); ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´<br />
Entityì˜ ë§ëŠ” ë°ì´í„°ê°€ ë“¤ì–´ì™”ì„ ë•Œ, ë°ì´í„°ê°€ ë§µí•‘ë˜ì–´ ìë™ìœ¼ë¡œ<br />
DBì— ì €ì¥ë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<hr />
<p>ì´ë ‡ê²Œ ì˜¤ëŠ˜ì€ JDBCì— ë‚´ìš©ì„ ì•Œì•„ ë³´ì•˜ê³ <br />
ê·¸ ì¤‘ì—ì„œë„ Spring data JDBCë¥¼ ì‚¬ìš©í•´ë³´ì•˜ë‹¤.<br />
ì•ìœ¼ë¡œë„ ë§ì€ DBì ‘ê·¼ ê¸°ìˆ ì„ ì ‘í•  í…ë°<br />
ì„¤ë ˜ë°˜ ê±±ì •ë°˜ì¸ ëŠë‚Œì´ë‹¤..</p>

<p>ìµœëŒ€í•œ ë§ì€ ê¸°ìˆ ì„ ë°°ìš¸ìˆ˜ ìˆë„ë¡ êµ¬ê¸€ë§í•´ë³´ë©´ì„œ<br />
ê³µë¶€í•´ë³¼ ìƒê°ì´ë‹¤</p>

<p>ì˜¤ëŠ˜ ê³µë¶€ëŠ” ì—¬ê¸°ì„œ ë!!</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ë¶ˆê³ ê¸°, ë¼ë©´, ë°¥</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[í•œì£¼ í•œì£¼ê°€ ì •ë§ ë¹ ë¥´ê²Œ ì§€ë‚˜ê°„ë‹¤. ìƒê°ë³´ë‹¤ ê³µë¶€ë¥¼ ë§ì´í•œ ê²ƒ ê°™ì§€ë§Œ ë³µìŠµí•˜ë©´ì„œ ë’¤ëŒì•„ë³´ë©´ ê·¸ë ‡ê²Œ ë§ì€ ì–‘ì„ ê³µë¶€í•œ ê²ƒë„ ì•„ë‹ˆë‹¤.]]></summary></entry><entry><title type="html">TIL) Spring Exception 2</title><link href="http://localhost:4000/til/2022/10/26/til.html" rel="alternate" type="text/html" title="TIL) Spring Exception 2" /><published>2022-10-26T00:00:00+09:00</published><updated>2022-10-26T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/10/26/til</id><content type="html" xml:base="http://localhost:4000/til/2022/10/26/til.html"><![CDATA[<p>ìš”ì¦˜ ìŠ¤í”„ë§ ê³µë¶€í•˜ëŠ”ê²Œ ë„ˆë¬´ ì¬ë°Œë‹¤.</p>

<p>ì²˜ìŒì— ì´í•´ê°€ ê°€ì§€ì•Šì•˜ì„ ë•ŒëŠ” ì´ê²Œ ë­”ê°€ ì‹¶ê¸°ë„í•˜ê³ ,,<br />
í•™ìŠµì˜ì§€ê°€ ë–¨ì–´ì¡ŒëŠ”ë° ì–´ëŠ ìˆœê°„ ê¹¨ë‹¬ìŒì„ ì–»ê³  ë‚˜ì„œëŠ”<br />
ë‹¤ìŒ í•™ìŠµì´ ê¸°ëŒ€ë˜ê³  ì–¼ë¥¸ ë” ë‹¤ë¥¸ê±¸ í•´ë³´ê³  ì‹¶ë‹¤.</p>

<p>ì–´ì œëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ ì˜ˆì™¸ì²˜ë¦¬í•˜ëŠ”<br />
ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤.</p>

<p>ì˜¤ëŠ˜ì€ ì˜ˆì™¸ ë˜ì§€ê¸°ì— ëŒ€í•´ ê³µë¶€í•´ ë³´ëŠ” ë‚ ì´ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSQnaE21aVigm3UisbtYcpIDvy2dUTKPe9eBRofjjG5-ECCzS8FRO0Md_pXQkLTbl23ajRuf_s=w1920-h921" align="left" width="400px" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<hr />

<p><br /></p>

<p>ì–´ì œëŠ” @Vaild, @Vaildated ìœ íš¨ì„¤ ì‹¤íŒ¨ì— ëŒ€í•œ<br />
ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ê³µë¶€ í–ˆë‹¤.<br />
ì˜¤ëŠ˜ì€ ë‹¤ë¥¸ ì˜ˆì™¸ë“¤ì˜ ì˜ˆì™¸ì²˜ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ê³µë¶€í•´ ë³´ì.</p>

<p><strong>1). ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ê¸°</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span>
<span class="nd">@ResponseStatus</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">ErrorResponse</span> <span class="nf">handleResourceNotFoundException</span><span class="o">(</span><span class="nc">RuntimeException</span> <span class="n">error</span><span class="o">){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">error</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>@ExceptionHandlerë¡œ ì—ëŸ¬ë¥¼ ê°ì§€í•˜ê²Œ í•´ì£¼ê³ <br />
ì—ëŸ¬ê°€ ê°ì§€ë˜ì—ˆëŠ”ë° RuntimeExceptionì—ëŸ¬ê°€ ë°œìƒí•˜ë©´<br />
RuntimeException í´ë˜ìŠ¤ë¡œ ê°ì²´ë¥¼ ë°›ì•„ì„œ<br />
ì—ëŸ¬ì˜ ì •ë³´ë“¤ì„ ê°ì²´ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ getMessage(); ë©”ì„œë“œëŠ”<br />
<strong>Throwalbe</strong>ì˜ ë©”ì„œë“œë¥¼ <strong>ìƒì†</strong>ë°›ì•„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">throw</span> <span class="k">new</span> <span class="nc">RuntimeException</span><span class="o">(</span><span class="s">"Not found"</span><span class="o">);</span>
</code></pre></div></div>

<p>ë§Œì•½ ë‹¤ë¥¸ ë©”ì„œë“œì—ì„œ ìœ„ì™€ ê°™ì´ ê°•ì œë¡œ RuntimeExceptionì„ ë°œìƒì‹œí‚¤ê³ <br />
Messageë¡œ â€œNot foundâ€ë¼ê³  ì ì–´ë‘ì—ˆì„ ê²½ìš°.<br />
ìƒì„±ìë¡œ RuntimeExceptionì˜ String ê°’ì„ ë„£ì„ ê²½ìš°<br />
ìµœìƒìœ„ í´ë˜ìŠ¤ì¸ Throwableì˜ messageê°€ ì €ì¥ë˜ê²Œëœë‹¤.</p>

<p>í•´ë‹¹ ë©”ì„œë“œê°€ ì‹¤í–‰ ë˜ë©´, @ExceptionHandlerì— ì˜í•´<br />
RuntimeException ê°ì²´ê°€ ë§¤ê°œë³€ìˆ˜ë¥¼ í†µí•´ ì „ë‹¬ëœë‹¤.</p>

<p>ë¬¸ì œì ì€ ìœ„ì˜ ì˜ˆì™¸ìƒí™©ì€ RuntimeExceptionë§Œ ì‘ì„±í–ˆì„ ë¿<br />
ì˜ë„ì ìœ¼ë¡œ ë°œìƒ ì‹œí‚¬ ì˜ˆì™¸ ìƒí™©ì´ ë” ìˆì„ ìˆ˜ ìˆë‹¤.<br />
ê·¸ë¦¬ê³  ì˜ˆì™¸ ì˜ë„ê°€ ëª…í™•í•˜ì§€ ì•Šë‹¤ëŠ” ì .</p>

<p><br /></p>

<p><strong>2). ê°œì„ ëœ ì˜ˆì™¸ ìƒí™© ì²˜ë¦¬</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="nc">ExceptionCode</span> <span class="o">{</span>
    <span class="no">MEMBER_NOT_FOUND</span><span class="o">(</span><span class="mi">404</span><span class="o">,</span> <span class="s">"Member Not Found"</span><span class="o">);</span>
    <span class="nd">@Getter</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">status</span><span class="o">;</span>

    <span class="nd">@Getter</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>

    <span class="nc">ExceptionCode</span><span class="o">(</span><span class="kt">int</span> <span class="n">status</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BusinessLogicException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="nd">@Getter</span>
    <span class="kd">private</span> <span class="nc">ExceptionCode</span> <span class="n">exceptionCode</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nf">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span> <span class="n">exceptionCode</span><span class="o">){</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">exceptionCode</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="k">this</span><span class="o">.</span><span class="na">exceptionCode</span> <span class="o">=</span> <span class="n">exceptionCode</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">handleResourceNotFoundException</span><span class="o">(</span><span class="nc">BusinessLogicException</span> <span class="n">e</span><span class="o">){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getExceptionCode</span><span class="o">().</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getExceptionCode</span><span class="o">().</span><span class="na">getStatus</span><span class="o">()));</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ì— í´ë˜ìŠ¤ë¥¼ 3ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ì„œ<br />
BusinessLogicException í´ë˜ìŠ¤ë¥¼ í†µí•´<br />
ê°ì²´ë¥¼ ë°›ëŠ” ë°©ë²•ì´ë‹¤.</p>

<p>ë¨¼ì € enum í´ë˜ìŠ¤ë¥¼ í†µí•´ì„œ<br />
ì‚¬ìš©í•  ìƒì„±ìì˜ ë°ì´í„°ë¥¼ ë§µí•‘í•´ì£¼ê³ </p>

<p>BusinessLogicException í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´<br />
RuntimeExceptionì„ ìƒì†í•´ spuer(); ìƒì„±ìë¥¼ í†µí•´<br />
Throawbleê¹Œì§€ ë©”ì„¸ì§€ë¥¼ ì˜¬ë ¤ì£¼ê³ , ê°ì²´ë¥¼ ì €ì¥í•˜ê²Œ ì‘ì„±í–ˆë‹¤.<br />
í•´ë‹¹ ê°ì²´ëŠ” @Getterë¥¼ ì´ìš©í•´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê³ <br />
ê·¸ ê°ì²´ë¥¼ í†µí•´ì„œ Enumì˜ Statusê°’ê³¼ Messageë¥¼ ê°€ì ¸ì˜¤ëŠ” ëª¨ìŠµì´ë‹¤.</p>

<p><br /></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">throw</span> <span class="k">new</span> <span class="nc">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span><span class="o">.</span><span class="na">MEMBER_NOT_FOUND</span><span class="o">);</span>
</code></pre></div></div>

<p>ìµœì¢…ì ìœ¼ë¡œ ì˜ˆì™¸ë¥¼ ê°•ì œë¡œ ìœ„ì™€ ê°™ì´<br />
MEMBER_NOT_FOUNDë¡œ ë˜ì¡Œì„ ê²½ìš°</p>

<p>BusinessLogicException í´ë˜ìŠ¤ì™€ ExceptionCode í´ë˜ìŠ¤ë¥¼<br />
ì´ìš©í•´ ê°ì²´ì¸¨ ë§Œë“¤ê³  ì˜ˆì™¸ì²˜ë¦¬ë¡œ íë¦„ì„ ë„˜ê²¨<br />
ìš°ë¦¬ê°€ ì»¤ìŠ¤í„° ë§ˆì´ì§•í•œ ê°’ì„ ì¶œë ¥í•˜ëŠ” ê²ƒ ê¹Œì§€ ë³´ì•˜ë‹¤.</p>

<p>ê·¸ëŸ¼ ìš°ë¦¬ê°€ ì´ì œ ì´ ê¸°ë°˜ìœ¼ë¡œ<br />
ì‘ë‹µí•˜ëŠ” ê°ì²´ë¥¼ ìƒˆë¡œ ì •ë¦¬í•´ì„œ ë³´ë‚¸ë‹¤ë“ ì§€?<br />
ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ê°€ëŠ¥í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<p>ì¤‘ìš”í•œ ì ì€ ì—ëŸ¬ê°€ ê°•ì œë¡œ ë°œìƒ ë˜ì—ˆì„ ê²½ìš°<br />
ìš°ë¦¬ê°€ íë¦„ì„ ê°€ì ¸ì™€ ì œì–´í•  ìˆ˜ìˆë‹¤ëŠ” ì ì„ ì–»ì–´ê°„ ê²ƒ ê°™ë‹¤.</p>

<p><br /></p>

<p>ì–´ì œ ê³µë¶€í–ˆë˜ê±°ì™€ ë”ë¶ˆì–´ ë‹¤ì‹œ ì •ë¦¬í•´ë³´ìë©´</p>
<ol>
  <li>
    <p>MethodArgumentNotValidException<br />
-&gt;@Vaild ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨í•œ ì˜ˆì™¸ì¡ê¸°</p>
  </li>
  <li>
    <p>ConstraintViolationException <br />
-&gt;@Vaildated ìœ íš¨ì„± ê²€ì¦ ì‹¤íŒ¨í•œ ì˜ˆì™¸ì¡ê¸°</p>
  </li>
  <li>
    <p>HttpRequestMethodNotSupportedException<br />
-&gt; í•´ë‹¹ í•¸ë“¤ëŸ¬ ë©”ì„œë“œì— ì •ì˜ëœ ë©”ì„œë“œì™€ í˜¸ì¶œí•œ ë©”ì„œë“œê°€ ì˜ëª»ë˜ì—ˆì„ë•Œ ì˜ˆì™¸ì¡ê¸°</p>
  </li>
  <li>
    <p>NullPointerException : NullPoint ì˜ˆì™¸ì²˜ë¦¬ ë°œìƒí•œ ê²ƒ ì¡ê¸°</p>
  </li>
  <li>
    <p>RuntimeException í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì•„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´<br />
ì œì–´íë¦„ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ.</p>
  </li>
</ol>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ë¼ë©´, ë¶ˆê³ ê¸°, ë°¥</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[ìš”ì¦˜ ìŠ¤í”„ë§ ê³µë¶€í•˜ëŠ”ê²Œ ë„ˆë¬´ ì¬ë°Œë‹¤.]]></summary></entry><entry><title type="html">TIL) Spring Exception 1</title><link href="http://localhost:4000/til/2022/10/25/til.html" rel="alternate" type="text/html" title="TIL) Spring Exception 1" /><published>2022-10-25T00:00:00+09:00</published><updated>2022-10-25T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/10/25/til</id><content type="html" xml:base="http://localhost:4000/til/2022/10/25/til.html"><![CDATA[<p>ë§¤ì¼ ë§¤ì¼ ë‹¤ì§í•˜ì§€ë§Œ<br />
ì ìëŠ” ìˆ˜ë©´íŒ¨í„´ ë°”ê¾¸ëŠ”ê±´ ì‰½ì§€ê°€ ì•Šì€ ê²ƒ ê°™ë‹¤ ã…..</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmR0ojECPgvr59qNqcpS6o9lEXTD-ON7Y-v4gZAV7K5p1nohAe7rImugv-030uzKwua0HVAn6Sk=w3024-h1728" align="left" /><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<hr />

<p>ì–´ì œê¹Œì§€ Spring Service ê³„ì¸µì— ëŒ€í•´ ê³µë¶€í–ˆë‹¤.<br />
ì˜¤ëŠ˜ì€ Spring Exceptionì— ëŒ€í•´ ê³µë¶€í•˜ëŠ” ë‚ ì´ë‹¤.<br />
ì´ 2ì¼ë¡œ ì¡í˜€ìˆê³ , 2ì¼ì´ ì¡í˜€ìˆë‹¤ëŠ” ê²ƒì— ì•½ê°„ ì–´ë–¤ ë‚´ìš©ì´ ìˆì„ì§€<br />
ë²Œì¨ ê²ì´ë‚˜ê¸° ì‹œì‘í•œë‹¤ ã… ã… ..</p>

<p>ê·¸ë˜ë„ ì°¨ê·¼ì°¨ê·¼ í•™ìŠµí•´ë³´ì</p>

<h2 id="spring-exception">Spring Exception</h2>

<p>í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬ ë°›ëŠ” Response BodyëŠ”<br />
ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ, ë‚´ë¶€ì ìœ¼ë¡œ Springì—ì„œ<br />
ì—ëŸ¬ ì‘ë‹µ ë©”ì„¸ì§€ë¥¼ ì „ì†¡í•´ì¤€ë‹¤.<br />
<em>ex) Postman API ìš”ì²­ì‹œ, 400 Bad Requset</em></p>

<p>í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë³´ë‚´ì£¼ë©´ Response Bodyì˜ ë‚´ìš©ë§Œìœ¼ë¡œ<br />
ìš”ì²­ ë°ì´í„° ì¤‘ì—ì„œ ì–´ë–¤ í•­ëª©ì´ ìœ íš¨ì„± ê²€ì¦ì— ì‹¤íŒ¨í–ˆëŠ”ì§€ ì•Œìˆ˜ê°€ ì—†ë‹¤.</p>

<p>ì´ì œ í´ë¼ì´ì–¸íŠ¸ìª½ì— ì—ëŸ¬ë©”ì„¸ì§€ë¥¼ ë” êµ¬ì²´ì ìœ¼ë¡œ í•´ì¤„ ìˆ˜ ìˆëŠ”<br />
ë°©ë²•ì— ëŒ€í•´ ê³µë¶€í•´ë³´ì</p>

<h3 id="exceptionhandler">@ExceptionHandler</h3>

<p>Controller ë ˆë²¨ì—ì„œ í•˜ëŠ” ì˜ˆì™¸ì²˜ë¦¬ë‹¤.</p>

<p>ì˜ˆë¥¼ ë“¤ì–´ Controller ë¶€ë¶„ì—ì„œ Handler ë§¤ì„œë“œë¥¼ <br />
POST ì´ìš©í•´ Json ê°’ì„ ë°›ì•„ì˜¨ë‹¤ê³  ê°€ì •í•˜ì˜€ì„ ê²½ìš°<br />
ì´ì „ì— í•™ìŠµí•œ @Vaildë¥¼ ì´ìš©í•´ ìœ íš¨ì„±ê²€ì¦ì„ í•  ìˆ˜ ìˆë‹¤.</p>

<p>ë§Œì•½ì— í•¸ë“œí°ë²ˆí˜¸ ê°’ì„ ë°›ì•„ì˜¤ëŠ” ìœ íš¨ì„±ê²€ì¦ì— â€˜-â€˜ê°€ ì—†ê±°ë‚˜ ìˆ«ìê°€ ì•„ë‹ë–„<br />
ë“± ìœ íš¨ì„± ì‹¤íŒ¨ ì¡°ê±´ì„ ê±¸ì–´ë†“ê³  í•´ë‹¹í•˜ëŠ” ê°’ì´ í†µê³¼ë˜ì§€ ëª»í•  ë•Œ<br />
ê¸°ì¡´ì—ëŠ” Postmanì— 400, Bad Requestë§Œ ë°œìƒí•˜ì˜€ì§€ë§Œ</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmSMqRKzD80yxkbX7I4jYRK0K0_5STWS73tt53lDVFwNAZSh62xKMthXdt_aHKCYJIcj9bWH1GY=w3024-h1728" align="left" /></p>

<p><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<p>ìœ„ì™€ ê°™ì´ ì–´ë–»ê²Œ ìœ íš¨ì„± ê²€ì¦ì´ ì‹¤íŒ¨ë˜ì—ˆëŠ”ì§€<br />
List í˜•íƒœë¡œ ì—¬ëŸ¬ê°€ì§€ ì •ë³´ë“¤ì„ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆëŠ” ë©”ì„œë“œê°€<br />
@ExceptionHandler ë¼ê³  ìƒê°í•´ë³´ë©´ ë  ê²ƒ ê°™ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">handleException</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span> <span class="n">e</span><span class="o">){</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">();</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="n">fieldErrors</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ì˜ ì½”ë“œëŠ” ExceptionHandler ì• ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.<br />
Controller í´ë˜ìŠ¤ ì•„ë˜ì— @ExceptionHandlerë¥¼ ì‚¬ìš©í• <br />
ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì£¼ê³ , MethodArgumentNotVaildExceptionì´ë¼ëŠ” í´ë˜ìŠ¤ë¡œ<br />
ì˜ˆì™¸ì— ëŒ€í•œ ê°ì²´ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.</p>

<p>ì´ì œ ê°ì²´ë¥¼ ì´ìš©í•´ ì›í•˜ëŠ” ë°ì´í„°ë“¤ë§Œ í˜¸ì¶œí•´<br />
(.getBindingResult().getFieldErrors() ë“±ë“±..)<br />
ResponseEntityì— ìƒíƒœë¥¼ ë‹´ì•„ì„œ ëŒë ¤ë³´ë‚´ì£¼ë©´</p>

<p>ë˜‘ê°™ì´ Bad Requestë¥¼ ì‘ë‹µ ë°›ì•„ë„<br />
JSON ê°ì²´ë¡œ ì–´ë–¤ ì •ë³´ë“¤ì´ ë‹´ê²¨ì ¸ìˆëŠ”ì§€ ì¹œì ˆí•˜ê²Œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì !</p>

<p><br /></p>

<h4 id="-ë°ì´í„°-êµ¬ì¡°ëŠ”-"><span style="color:#0066CC"> ë°ì´í„° êµ¬ì¡°ëŠ”? </span></h4>

<p>ê·¸ëŸ¼ ì „ë‹¬ ë°›ì€ ê°ì²´ì˜ ë‚´ìš©ì„ ìì„¸íˆ ë³´ìë©´</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">();</span>  
</code></pre></div></div>

<p>ë¥¼ í†µí•´ì„œ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤. fieldErrorsë¥¼ Jsonìœ¼ë¡œ ë³€í™˜í•˜ë©´<br />
ì•„ë˜ì™€ ê°™ì´ ëª¨ìŠµì´ ë‚˜ì˜¤ê²Œëœë‹¤. (ì´ë©”ì¼í˜•ì‹ê³¼ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ í‹€ë ¸ë‹¤ê³  ê°€ì •)</p>

<pre><code class="language-Json">[
    {
        "codes": [
            "Pattern.memberPostDto.phone",
            "Pattern.phone",
            "Pattern.java.lang.String",
            "Pattern"
        ],
        "arguments": [
            {
                "codes": [
                    "memberPostDto.phone",
                    "phone"
                ],
                "arguments": null,
                "defaultMessage": "phone",
                "code": "phone"
            },
            [],
            {
                "arguments": null,
                "defaultMessage": "^010-\\d{3,4}-\\d{4}$",
                "codes": [
                    "^010-\\d{3,4}-\\d{4}$"
                ]
            }
        ],
        "defaultMessage": "íœ´ëŒ€í° ë²ˆí˜¸ëŠ” 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” 11ìë¦¬ ìˆ«ìì™€ '-'ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.",
        "objectName": "memberPostDto",
        "field": "phone",
        "rejectedValue": "010-12345678",
        "bindingFailure": false,
        "code": "Pattern"
    },
    {
        "codes": [
            "Email.memberPostDto.email",
            "Email.email",
            "Email.java.lang.String",
            "Email"
        ],
        "arguments": [
            {
                "codes": [
                    "memberPostDto.email",
                    "email"
                ],
                "arguments": null,
                "defaultMessage": "email",
                "code": "email"
            },
            [],
            {
                "arguments": null,
                "defaultMessage": ".*",
                "codes": [
                    ".*"
                ]
            }
        ],
        "defaultMessage": "ì˜¬ë°”ë¥¸ í˜•ì‹ì˜ ì´ë©”ì¼ ì£¼ì†Œì—¬ì•¼ í•©ë‹ˆë‹¤",
        "objectName": "memberPostDto",
        "field": "email",
        "rejectedValue": "dhfif718",
        "bindingFailure": false,
        "code": "Email"
    }
]
</code></pre>
<p>êµ¬ì¡°ë¥¼ ìì„¸íˆ ë³´ë©´ ì–´ë µì§€ ì•Šë‹¤.<br />
ìœ íš¨ì„± ê²€ì¦ì´ í‹€ë¦° ë¶€ë¶„ë§ˆë‹¤ List&lt;&gt;ì— ì •ë³´ê°€ addê°€ ë˜ì–´ì§„ë‹¤.<br />
í¬ê²Œ ë‚˜ëˆ„ìë©´ ì•„ë˜ì™€ ê°™ì´</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"codes"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="err">,</span><span class="w">
</span><span class="nl">"arguments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="err">,</span><span class="w">
</span><span class="nl">"defaultMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ì˜¬ë°”ë¥¸ í˜•ì‹ì˜ ì´ë©”ì¼ ì£¼ì†Œì—¬ì•¼ í•©ë‹ˆë‹¤"</span><span class="err">,</span><span class="w">
</span><span class="nl">"objectName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"memberPostDto"</span><span class="err">,</span><span class="w">
</span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="err">,</span><span class="w">
</span><span class="nl">"rejectedValue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dhfif718"</span><span class="err">,</span><span class="w">
</span><span class="nl">"bindingFailure"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="err">,</span><span class="w">
</span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
</span></code></pre></div></div>
<p>8ê°œì˜ í° í•­ëª©ìœ¼ë¡œ ë¶„ë¦¬ë˜ê³  ê·¸ ì•ˆì—ì„œ<br />
codes, argumentsë¥¼ ê¹Šì´íƒìƒ‰ì„ í†µí•´ì„œ ë‹¤ë¥¸ ì •ë³´ë„<br />
ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><br /></p>

<h4 id="-ì›í•˜ëŠ”-ë°ì´í„°ë§Œ-"><span style="color:#0066CC"> ì›í•˜ëŠ” ë°ì´í„°ë§Œ? </span></h4>

<p>ìœ„ì˜ ë°ì´í„° êµ¬ì¡°ë¡œë§Œ ë³´ì•˜ì„ ë•Œ Listë¡œ ì‘ì„±í–ˆê¸° ë•Œë¬¸ì—<br />
ë°ì´í„° ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ì—¬, ì›í•˜ëŠ” ë°ì´í„°ë§Œ ì¶œë ¥ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p>ë§Œì•½ì— field, rejectedValue, reasonì´ë€ ê°’ë§Œ ê°€ì ¸ì˜¨ë‹¤ê³  ê°€ì •í•˜ê³ <br />
ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorResponse</span> <span class="o">{</span>
    <span class="c1">// AllArgsConstructor ë•ë¶„ì— ìƒì„±ìê°€ ìë™ìœ¼ë¡œ ìƒê¸°ë©´ ì˜ì¡´ì„± ì£¼ì…ë„ë¨</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span><span class="o">;</span>

    <span class="nd">@Getter</span>
    <span class="nd">@AllArgsConstructor</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">FieldError</span><span class="o">{</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">field</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">Object</span> <span class="n">rejectedValue</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">reason</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ExceptionHandler</span>
<span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">handleException</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span> <span class="n">e</span><span class="o">){</span>
    <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">();</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">FieldError</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">fieldErrors</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
            <span class="o">.</span><span class="na">peek</span><span class="o">(</span><span class="n">error</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">error</span><span class="o">))</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">error</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">FieldError</span><span class="o">(</span>
                    <span class="n">error</span><span class="o">.</span><span class="na">getField</span><span class="o">(),</span>
                    <span class="n">error</span><span class="o">.</span><span class="na">getRejectedValue</span><span class="o">(),</span>
                    <span class="n">error</span><span class="o">.</span><span class="na">getDefaultMessage</span><span class="o">()</span>
            <span class="o">))</span>
            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="n">errors</span><span class="o">,</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>í¸ì˜ìƒ Class ë¶€ë¶„ê³¼ POST í•¸ë“¤ëŸ¬ ë©”ì„œë“œëŠ” ìƒëµí–ˆë‹¤.<br />
ì´ì „ê³¼ ë™ì¼í•˜ê²Œ fieldErrorsë¼ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ê³ <br />
ê·¸ ê°ì²´ë¥¼ streamì„ ì´ìš©í•´ ì›í•˜ëŠ” ëª©ë¡ì˜ ë°ì´í„°ë¥¼ getí•˜ì—¬<br />
ìƒì„±ìë¡œ ErrorResponse.FieldError();ì„ í†µí•´ ê°ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤<br />
ê·¸ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ê°ì²´ë¥¼ Listì•ˆì— ë„£ì–´ ë°˜í™˜í•´ì£¼ê³ </p>

<p>Postmanì—ì„œ API ìš”ì²­ ì‹œ<br />
ì•„ë˜ì™€ ê°™ì´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë°ì´í„°ë§Œ Listí™”í•˜ì—¬<br />
Json ê°ì²´ë¡œ ë°˜í™˜í•˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<pre><code class="language-Json">[
    {
        "field": "phone",
        "rejectedValue": "010-12345678",
        "reason": "íœ´ëŒ€í° ë²ˆí˜¸ëŠ” 010ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” 11ìë¦¬ ìˆ«ìì™€ '-'ë¡œ êµ¬ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤."
    },
    {
        "field": "email",
        "rejectedValue": "dhfif718naver.com",
        "reason": "ì˜¬ë°”ë¥¸ í˜•ì‹ì˜ ì´ë©”ì¼ ì£¼ì†Œì—¬ì•¼ í•©ë‹ˆë‹¤"
    }
]
</code></pre>

<p>ì´ë ‡ê²Œ ExceptionHandlerë¥¼ ì‚¬ìš©í•˜ì—¬<br />
ìœ íš¨ì„± ê²€ì¦ì— í†µê³¼í•˜ì§€ ëª»í•˜ë©´, ìš°ë¦¬ê°€ ì›í•˜ëŠ”ëŒ€ë¡œ<br />
ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì¸¡ì— ë°ì´í„°ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆê²Œëœë‹¤.</p>

<p>í•˜ì§€ë§Œ ì´ ë©”ì„œë“œì˜ í° ë‹¨ì ì´ ì¡´ì¬í•œë‹¤.</p>

<p><strong>1. MethodArgumentNotValidException í´ë˜ìŠ¤ì˜ ì˜ˆì™¸ ë§ê³  ë‹¤ë¥¸ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í• ë•Œ?</strong><br />
-&gt; ê·¸ì— í•´ë‹¹í•˜ëŠ” ì—ëŸ¬ í•¸ë“¤ëŸ¬ ë©”ì„œë“œë¥¼ ë˜ ë§Œë“¤ì–´ì¤˜ì•¼í•¨..</p>

<p><strong>2. Controller í´ë˜ìŠ¤ê°€ 2ê°œì´ìƒ ì¼ê²½ìš°</strong><br />
-&gt; ìœ„ì—ì„œ í–ˆë˜ ë©”ì„œë“œë“¤ì„ ê° Controller í´ë˜ìŠ¤ë§ˆë‹¤ ë˜‘ê°™ì´ ë§Œë“¤ì–´ì•¼í•¨. (ì¤‘ë³µë°œìƒ !!)</p>

<p><br /></p>

<h3 id="restcontrolleradvice">@RestControllerAdvice</h3>
<p>ExceptionHandlerì™€ ê°™ì´ ì‚¬ìš©í•˜ê²Œ ë  ê²½ìš°<br />
ìœ„ì—ì„œ í•™ìŠµí–ˆë˜ ë‹¨ì ì„ í•´ê²°í•´ì£¼ê¸°ìœ„í•œ ì• ë…¸í…Œì´ì…˜ì´ë‹¤ !</p>

<p>ì´ì „ì—ëŠ” ìš°ë¦¬ê°€ Controllerì— ì§ì ‘<br />
ExecptionHandlerë¥¼ ì‘ì„±í•´ì£¼ì—ˆì§€ë§Œ..</p>

<p>ë³„ë„ì˜ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ê³  @RestControllerAdviceë¥¼<br />
í´ë˜ìŠ¤ ì• ë…¸í…Œì´ì…˜ì„ ë‹¬ì•„ì£¼ê²Œëœë‹¤ë©´<br />
REST API ìš”ì²­ì‹œ Vaild ê²€ì¦ì‹¤íŒ¨í•  ê²½ìš° í•´ë‹¹ í´ë˜ìŠ¤ì˜<br />
ExceptionHandlerì— ì¡í˜€ êµ¬í˜„ëœ ë™ì‘ì„ ì‹¤í–‰í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</p>

<p><em>!! SSR ë°©ì‹ì—ì„œëŠ” ì£¼ë¡œ @InitBinder, @ModelAttributeë¥¼ ì‚¬ìš©í•œë‹¤ê³ í•œë‹¤.<br />
ìš°ë¦¬ëŠ” CSR ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸°ë•Œë¬¸ì— @ExceptionHandler ì‚¬ìš©.</em></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestControllerAdvice</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalExceptionAdvice</span> <span class="o">{</span>

    <span class="nd">@ExceptionHandler</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">handleMethodArgumentNotValidException</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span> <span class="n">e</span><span class="o">){</span>

        <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">FieldError</span><span class="o">&gt;</span> <span class="n">fieldErrors</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getFieldErrors</span><span class="o">();</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">FieldError</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">fieldErrors</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">error</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">FieldError</span><span class="o">(</span>
                        <span class="n">error</span><span class="o">.</span><span class="na">getField</span><span class="o">(),</span>
                        <span class="n">error</span><span class="o">.</span><span class="na">getRejectedValue</span><span class="o">(),</span>
                        <span class="n">error</span><span class="o">.</span><span class="na">getDefaultMessage</span><span class="o">()</span>
                <span class="o">))</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>

        <span class="c1">//ìµœì¢… ê°ì²´ Json + ì‘ë‹µìƒíƒœ ë°˜í™˜í•˜ê¸°</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="k">new</span> <span class="nc">ErrorResponse</span><span class="o">(</span><span class="n">errors</span><span class="o">),</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì´ì „ì— Controllerì— ìˆì—ˆë˜ êµ¬í˜„ ë©”ì„œë“œë¥¼<br />
ìƒˆë¡œ ë§Œë“  GlobalExceptionAdivceë¼ëŠ” í´ë˜ìŠ¤ë¡œ ì˜®ê¸°ê³ <br />
@RestControllerAdviceë¥¼ ë‹¬ì•„ì¤€ ëª¨ìŠµì´ë‹¤.</p>

<p>ìœ„ì—ì„œ í•™ìŠµí–ˆë˜ ê²ƒê³¼ ë™ì¼í•˜ê²Œ<br />
ì›í•˜ëŠ” ë°ì´í„°ë§Œ ë½‘ì•„ Json ê°ì²´ë¡œ ëŒë ¤ì£¼ê²Œ í•˜ì˜€ë‹¤</p>

<p>ì§€ê¸ˆì€ ê°„ë‹¨í•˜ê²Œ<br />
MethodArgumentNotValidExceptionë¥¼ í†µí•´ì„œ<br />
FieldErrorsë§Œ ê°€ì ¸ì˜¤ë„ë¡ í”„ë¡œê·¸ë¨ì„ í•˜ì˜€ëŠ”ë°</p>

<p>ConstraintViolationExceptionë¥¼ í†µí•´ì„œ<br />
ConstraintViolationErrorsë„ ê°€ì ¸ì™€ì•¼í•˜ëŠ” í”„ë¡œê·¸ë¨ì„<br />
ì‘ì„±í•´ì•¼í•œë‹¤.</p>

<p><br /></p>

<h2 id="-í•œì¤„-ì •ë¦¬-"><span style="color:#0066CC"> í•œì¤„ ì •ë¦¬ </span></h2>
<p>@Vaild ì˜ˆì™¸ì²˜ë¦¬ - MethodArgumentNotValidException<br />
@Vaildated ì˜ˆì™¸ì²˜ë¦¬ - ConstraintViolationException</p>

<hr />

<p>ë³„ë„ì˜ í´ë˜ìŠ¤ìƒì„±ê³¼ ì• ë…¸í…Œì´ì…˜ í•˜ë‚˜ë¡œ ì´ë ‡ê²Œ<br />
í”„ë¡œê·¸ë¨ì´ ê°„ë‹¨í•´ì§€ê³  ë³´ê¸° í¸í•´ì§ˆì¤„ì´ì•¼..</p>

<p>ì •ë§ ë¨¼ì € ê°œë°œì„ ì‹œì‘í•˜ê³  ì´ëŸ¬í•œ ê°œë…ì„ ì •ì°©ì‹œí‚¨<br />
ì„ ë°° ê°œë°œìë¶„ë“¤ì´ ì¡´ê²½ìŠ¤ëŸ½ë‹¤</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ë¶ˆê³ ê¸° ë®ë°¥, ìŠ¤íŒ¸, ë°¥</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[ë§¤ì¼ ë§¤ì¼ ë‹¤ì§í•˜ì§€ë§Œ ì ìëŠ” ìˆ˜ë©´íŒ¨í„´ ë°”ê¾¸ëŠ”ê±´ ì‰½ì§€ê°€ ì•Šì€ ê²ƒ ê°™ë‹¤ ã…..]]></summary></entry><entry><title type="html">êµ¬ê¸€ ë“œë¼ì´ë¸Œë¡œ ì´ë¯¸ì§€ url ì ìš©í•˜ê¸°</title><link href="http://localhost:4000/it/2022/10/25/it-etc-imageurl.html" rel="alternate" type="text/html" title="êµ¬ê¸€ ë“œë¼ì´ë¸Œë¡œ ì´ë¯¸ì§€ url ì ìš©í•˜ê¸°" /><published>2022-10-25T00:00:00+09:00</published><updated>2022-10-25T00:00:00+09:00</updated><id>http://localhost:4000/it/2022/10/25/it-etc-imageurl</id><content type="html" xml:base="http://localhost:4000/it/2022/10/25/it-etc-imageurl.html"><![CDATA[<h1 id="ì´ë¯¸ì§€-url-ì ìš©í•˜ê¸°">ì´ë¯¸ì§€ url ì ìš©í•˜ê¸°</h1>
<p>ë„¤ì´ë²„ ë¸”ë¡œê·¸ë‚˜ Tistory ë“±â€¦<br />
íƒ€ í”Œë«í¼ì˜ ë¸”ë¡œê·¸ë¥¼ ì‘ì„±í•˜ì‹œëŠ” ë¶„ë“¤ì€ ì‚¬ì§„ì„ í†µí•´ì„œ<br />
ì˜¬ë¦¬ê¸° ë•Œë¬¸ì— í•´ë‹¹ í”Œë«í¼ì´ ì•Œì•„ì„œ ê´€ë¦¬ë¥¼ í•´ì¤€ë‹¤.</p>

<p>í•˜ì§€ë§Œâ€¦ ë‚˜ì™€ ê°™ì´ GitHub Pageë¥¼ ì‚¬ìš©í•œë‹¤ê±°ë‚˜<br />
ê°œì¸ ë¸”ë¡œê·¸ë¥¼ ìš´ì˜ì¤‘ì¸ ë¶„ë“¤ì€<br />
ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦¬ê¸° ìœ„í•´ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ì•¼í•œë‹¤.</p>

<ol>
  <li>GitHubì— ì‚¬ì§„ì„ ê°™ì´ ì˜¬ë¦¬ê³  , ê²½ë¡œë¡œ ì‚¬ì§„í‘œì‹œ<br />
-&gt; í•´ë‹¹ ë°©ë²•ì€ GitHub ì €ì¥ì†Œê°€ ì´ˆê³¼í•˜ë©´ ì• ë§¤í•´ì§„ë‹¤..</li>
  <li>ì´ë¯¸ì§€ë¥¼ urlë¡œ ë³€ê²½ ì‹œì¼œ ê´€ë¦¬í•˜ê¸°<br />
-&gt; ì´ë¯¸ì§€ë¥¼ urlë¡œ ë³€ê²½ì‹œí‚¤ê³  ì €ì¥ì„ ìœ ì§€ì‹œì¼œì£¼ëŠ” ì•ˆì „í•œ í”Œë«í¼ì´ í•„ìš”</li>
</ol>

<p>ì´ë ‡ê²Œ ë– ì˜¬ë¦¬ê²Œë˜ì–´ ë‚˜ëŠ” <strong>2ë²ˆ</strong>ì„ ì„ íƒí•˜ê²Œ ë˜ì—ˆê³ </p>

<p>ì²˜ìŒì—ëŠ” ë‹¤ë¥¸ ì‚¬ëŒë“¤ì´ ì˜¬ë ¤ë†“ì€ <a href="https://ifh.cc/">iFH ì´ë¯¸ì§€ í˜¸ìŠ¤íŒ…</a>ê³¼ ê°™ì€<br />
í™ˆí˜ì´ì§€ë¥¼ ì´ìš©í•´ ì •ë¦¬ë¥¼ í•˜ì˜€ì—ˆëŠ”ë° â€¦.</p>

<p>ë¶ˆí˜„ë“¯ í˜„ì¬ëŠ” ì´ ì‚¬ì´íŠ¸ì—ì„œ ë‚´ì‚¬ì§„ì„ ì €ì¥í•´ ê´€ë¦¬í•˜ê³  ìˆëŠ”ë°<br />
ì´ ì‚¬ì´íŠ¸ì˜ ì„œë¹„ìŠ¤ë¥¼ ì¢…ë£Œí•œë‹¤ë˜ê°€? ì‚¬ë¼ì§€ê²Œëœë‹¤ë©´<br />
ë‚´ê°€ ì—¬íƒœê¹Œì§€ ì €ì¥í•´ë†“ì€ ëª¨ë“  ì‚¬ì§„ë“¤ì€ í—ˆê³µì†ìœ¼ë¡œ ê°€ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤..</p>

<p><br /></p>

<h3 id="ì•ˆì „í•˜ê²Œ-ì €ì¥í•˜ëŠ”-ë°©ë²•ì€-"><span style="color:#0066CC">ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ëŠ” ë°©ë²•ì€ ?</span></h3>

<p>ë‹¤ë¥¸ ë³€ê²½ í˜¸ìŠ¤íŒ… í˜ì´ì§€ë¥¼ ì´ìš©í•˜ë©´ ìœ„ì—ì„œ ë§í–ˆë˜ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì—<br />
ë¹„êµì ìœ¼ë¡œ ì•ˆì „í•œ <strong>â€œêµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ í†µí•´ ì´ë¯¸ì§€ url ë°”ê¾¸ëŠ” ë°©ë²•</strong>ì„ ì„¤ëª…í•˜ë ¤í•œë‹¤.</p>

<p><strong>1). ë‚´ê°€ ë³€ê²½í•˜ê³ ìí•˜ëŠ” ì´ë¯¸ì§€ë¥¼ êµ¬ê¸€ë“œë¼ì´ë¸Œì— ë„£ëŠ”ë‹¤.</strong><br />
-&gt; ë„£ì€ ì´ë¯¸ì§€ íŒŒì¼ì„ ë§ˆìš°ìŠ¤ ì˜¤ë¥¸ìª½ í´ë¦­ !<br />
-&gt; í•„ìëŠ” ìŠ¤í¬ë¦°ìƒ· 2022-10~~ ë­ì‹œê¸°ë¡œëœ í”„ë¡œê·¸ë¨ ìº¡ì²˜ì‚¬ì§„ì„ ë„£ì—ˆë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQVcLiSu-ykhVbtab_etZPl1pHZEPtUPerbz_EIPeek-aTWiCg0enyE5L2b7We-d3nOX4bJC_o=w3024-h1728" align="left" /></p>

<p><strong>2). ë§í¬ê°€ ìˆëŠ” ëª¨ë“  ì‚¬ìš©ìë¡œ ë°”ê¿”ì¤€ë‹¤.</strong><br />
-&gt; ë°”ê¾¼í›„ ì™„ë£Œ í´ë¦­<br />
-&gt; ë§í¬ ë³µì‚¬ë¥¼ í•œë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRWQGDSjQWsBm5kM9hE4Iulyr7vj2dHkp2XFx-LXxMuJbTHffLKx-B79RdD7llp3yh8fiIZ9LU=w3024-h1728" align="left" />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<p><strong>3). ë‚´ê°€ ì‘ì„±ì¤‘ì¸ ë¸”ë¡œê·¸ì— í•´ë‹¹ ë§í¬ë¥¼ ë¶™ì—¬ë„£ëŠ”ë‹¤.</strong><br />
-&gt; ë³´í†µ GitHub pageë¥¼ ì‘ì„±í•˜ëŠ” ë¶„ë“¤ì€ MarkDown ì–¸ì–´ë¡œ í¬ìŠ¤íŒ…ì„ í•˜ê¸°ì—</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">![</span><span class="nv">example image</span><span class="p">](</span><span class="sx">ë§í¬ì£¼ì†Œ</span><span class="p">)</span>
</code></pre></div></div>
<p>ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì£¼ì†Œë¥¼ ë„£ì–´ ì´ë¯¸ì§€ë¥¼ ë„£ê±°ë‚˜</p>

<p>í¬ê¸° ì¡°ì ˆì´ë‚˜ ì •ë ¹ì„ í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ë“¤ì€</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"ë§í¬ì£¼ì†Œ"</span> <span class="na">align=</span><span class="s">"left"</span><span class="nt">&gt;</span>
</code></pre></div></div>
<p>html ë¬¸ë²•ìœ¼ë¡œ ë§í¬ ì£¼ì†Œë¥¼ ë„£ì–´ ì‘ì„±í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ë„£ì–´ë„ ë¬´ë°©í•˜ë‹¤.</p>

<p><br /></p>

<h3 id="íŒŒì¼ì´-ë¡œë”©ë˜ì§€-ì•Šì•„ìš”-"><span style="color:#0066CC">íŒŒì¼ì´ ë¡œë”©ë˜ì§€ ì•Šì•„ìš” !</span></h3>

<p>ì—¬ê¸°ì„œ ë§Œì•½ ìœ„ì— 1),2)ë²ˆì„ ë”°ë¼í–ˆì§€ë§Œ ì•„ë˜ì™€ ê°™ì´ ì‚¬ì§„ ì´ë¯¸ì§€ê°€<br />
ë³´ì´ì§€ ì•Šê³  íŒŒì¼ë¡œ ë‚˜ì˜¬ê²½ìš°?</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmTFm2_anq_vjKEzlpnDEC5kFnBj5i_vYGIALa0GC8bH4NstmFC88WmthnmEf-glizCiNxdObFA=w3024-h1728" align="left" /></p>

<p><br /><br /><br /><br /><br /><br /></p>

<p>ì´ë ‡ê²Œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°ëŠ”<br />
ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì‚¬ì§„ ì£¼ì†Œë¥¼ ë‹¤ì‹œ ê²€ìƒ‰ í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ë¨¼ì € ì•„ê¹Œ ìœ„ì—ì„œ ë³µì‚¬í–ˆë˜ ì£¼ì†Œë¥¼<br />
Google Chrome ë¸Œë¼ìš°ì €ì—ì„œ <strong>ìƒˆíƒ­</strong>ìœ¼ë¡œ ì—´ì–´ì£¼ë©´<br />
ì•„ë˜ì™€ ê°™ì´ êµ¬ê¸€ë“œë¼ì´ë¸Œë¡œ ì—°ë™ëœ ì‚¬ì§„ì´ ë‚˜ì˜¤ê²Œ ë  ê²ƒì´ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQY7wKQYjWRwh8o6PanbsXgp_0EbT97NG5HgCB1bLfSPI0ljEjzN6uT_BQfnsukgdH81SCmJ7E=w3024-h1728" align="left" /></p>

<p><br /></p>

<p>ìœ„ì— ì‚¬ì§„ì´ ë‚˜ì™”ë‹¤ë©´ ì•„ë˜ì˜ ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ë©´ ëœë‹¤.</p>

<ol>
  <li>ë¸Œë¼ìš°ì €ì— ì‚¬ì§„ì´ ë‚˜ì˜¨ë‹¤.</li>
  <li>
    <p>í¬ë¡¬ ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ë¥¼ ì—°ë‹¤<br />
-&gt; ê²½ë¡œ : í¬ë¡¬ ë¸Œë¼ìš°ì € ìƒë‹¨ ìš°ì¸¡ <strong>â«¶</strong> ë¡œëœ ë²„íŠ¼ í´ë¦­ -&gt; ë„êµ¬ ë”ë³´ê¸° -&gt; ê°œë°œì ë„êµ¬<br />
<strong>tip) ë§¥ë¶ ë‹¨ì¶•í‚¤ : âŒ¥ + âŒ˜ + i<br />
tip) ìœˆë„ìš° ë‹¨ì¶•í‚¤ : F12</strong></p>
  </li>
  <li>ê°œë°œì ë„êµ¬ì—ì„œ <strong>ì°¾ê¸° ê¸°ëŠ¥</strong>(ë§¥ë¶:âŒ˜+F, ìœˆë„ìš°:Ctrl+F)ë¥¼ ì—°ë‹¤.</li>
  <li>ì°¾ê¸° ê¸°ëŠ¥ì´ ì—´ë¦¬ë©´ ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ ì¤‘ê°„ì— íƒ€ì´í•‘ì„ í•  ìˆ˜ ìˆëŠ” ì°½ì´ ìƒê¸´ë‹¤.<br />
<strong>img</strong> ë¼ê³  <strong>ì…ë ¥</strong> ì—”í„°ë¥¼ ëˆŒëŸ¬ ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤.</li>
  <li>ì—”í„°ë¥¼ ëˆ„ë¥´ë‹¤ë³´ë©´ ìœ„ì— ì‚¬ì§„ê³¼ ê°™ì´ url ì£¼ì†Œê°€ ë‚˜ì˜¨ë‹¤.<br />
-&gt; í•´ë‹¹ ì£¼ì†Œì— ë§ˆìš°ìŠ¤ë¥¼ ê°€ì ¸ë‹¤ëŒ€ë©´ ì‚¬ì§„ì— í•˜ëŠ˜ìƒ‰ìœ¼ë¡œ í‘œì‹œê°€ë¨</li>
  <li>í•´ë‹¹ ì£¼ì†Œë¥¼ ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤!</li>
</ol>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQau70WaZx0XThiMXSN914-WF8Y-TVNlWxtTuLmQWoXqyTii9qeT4G6COxAN1CXH-PL4eHE0Lg=w3024-h1728" align="left" /></p>

<p><br /></p>

<p>ìœ„ì˜ ë‚´ìš©ì„ ë”°ë¼í•˜ë©´ ëœë‹¤. ë”°ë¼í•˜ë©´ì„œ ìœ„ì— ì‚¬ì§„ê³¼ ë™ì¼í•˜ê²Œ <br />
ì£¼ì†Œë¥¼ ì°¾ì•„ì£¼ë©´ ê·¸ ì£¼ì†Œê°€ ì´ë¯¸ì§€ url ì£¼ì†Œì´ë‹¤.</p>

<p>ê·¸ ì£¼ì†Œë¥¼ ê°€ì§€ê³  ì´ì œ ë¸”ë¡œê·¸ë‚˜ ë‚´ê°€ ì‚¬ìš©í•˜ë ¤ëŠ” ê³³ì—<br />
ì´ìš©í•˜ë©´ ë˜ëŠ” ê²ƒì´ë‹¤!!</p>

<p><br /></p>

<h3 id="í´ë”ë¥¼-ê³µìœ ë¡œ-ì„¤ì •-"><span style="color:#0066CC">í´ë”ë¥¼ ê³µìœ ë¡œ ì„¤ì • !</span></h3>

<p>ì°¸ê³ ë¡œ í•´ë‹¹í•˜ëŠ” ì‚¬ì§„ë§ˆë‹¤ ì¼ì¼íˆ ê³µìœ ë¥¼ ëˆŒëŸ¬ì¤„ ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆê¹Œ<br />
ë‚´ê°€ ê´€ë¦¬í•˜ë ¤ëŠ” í´ë”ì— ìœ„ì—ì„œ ê³µìœ ë¥¼ í•˜ë©´ í•˜ìœ„ ë°ì´í„°ëŠ”<br />
ì „ë¶€ ê³µìœ ë¡œ ë°”ë€Œê²Œëœë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmRzYYtAjIhzT6vvIjHZ-tIrBxLgSBHbHCqwqwrUIuA4MchYwWltF7PFaz0ROvRlBCXXEvOCadA=w3024-h1728" align="left" /></p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/drive-viewer/AJc5JmQK6pfkh96AtgcxVx4TR0g7yWopx7nBubGMiNLL7BtjHnPKAVOTyw8ROJreFSNHeF7ilHIKSIk=w3024-h1728" align="left" /></p>

<p><br /></p>

<p>ì´ë ‡ê²Œ ë‚´ê°€ ë¸”ë¡œê·¸ì— ì‘ì„±í•˜ë ¤ëŠ” ì´ë¯¸ì§€ë¥¼<br />
í´ë” ë³„ë¡œ ì˜ ëª¨ì•„ë†“ì•˜ë‹¤ê°€<br />
ì „ì²´ë¥¼ ê³µìœ ë¡œ ë°”ê¾¸ë“ , ì¼ë¶€ë¶„ë§Œ ë°”ê¾¸ë“  ì ìš©í•´ì„œ<br />
ê·¸ ì´ë¯¸ì§€ë¥¼ ê°œë°œìë„êµ¬ë¥¼ í†µí•´ ì£¼ì†Œë¡œ êº¼ë‚¼ ìˆ˜ ìˆë‹¤.</p>

<hr />

<p><br /></p>

<p>ì´ìƒ êµ¬ê¸€ ë“œë¼ì´ë¸Œë¥¼ í†µí•´<br />
ì´ë¯¸ì§€ë¥¼ urlë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì„¤ëª… ë“œë ¸ë‹¤.</p>

<p>ì‚¬ì‹¤ ì¶”í›„ì— ì´ë ‡ê²Œ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì„ ë§‰ì„ì§€? ì•„ë‹ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤.<br />
í•˜ì§€ë§Œ êµ¬ê¸€ì´ë¼ëŠ” ëŒ€í˜• í”Œë«í¼ì„ í†µí•´ì„œ ê´€ë¦¬ë¥¼ í•œëŠ” ì¸¡ë©´.<br />
ê·¸ë¦¬ê³  ì•„ì´í´ë¼ìš°ë“œë‚˜, êµ¬ê¸€ë“œë¼ì´ë¸Œê°™ì´ ìš°ë¦¬ê°€ ë„ë¦¬ ì‚¬ìš©í•˜ëŠ”<br />
ì„œë¹„ìŠ¤ì´ê¸° ë•Œë¬¸ì—  ë°ì´í„°ê°€ ë‚ ë¼ê°ˆ ê±±ì •ì„ í•  í•„ìš”ëŠ” ì—†ìœ¼ë‹ˆ</p>

<p>ì¡°ê¸ˆ ì•ˆì‹¬ëœ ë¸”ë¡œê·¸ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ë“¯í•œ? ê¸°ë¶„ì´ë‹¤ !!</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="IT" /><category term="IT" /><category term="ì´ë¯¸ì§€ url" /><category term="êµ¬ê¸€ ë“œë¼ì´ë¸Œ" /><summary type="html"><![CDATA[ì´ë¯¸ì§€ url ì ìš©í•˜ê¸° ë„¤ì´ë²„ ë¸”ë¡œê·¸ë‚˜ Tistory ë“±â€¦ íƒ€ í”Œë«í¼ì˜ ë¸”ë¡œê·¸ë¥¼ ì‘ì„±í•˜ì‹œëŠ” ë¶„ë“¤ì€ ì‚¬ì§„ì„ í†µí•´ì„œ ì˜¬ë¦¬ê¸° ë•Œë¬¸ì— í•´ë‹¹ í”Œë«í¼ì´ ì•Œì•„ì„œ ê´€ë¦¬ë¥¼ í•´ì¤€ë‹¤.]]></summary></entry><entry><title type="html">TIL) Spring MVC Serivce ê³„ì¸µ</title><link href="http://localhost:4000/til/2022/10/24/til.html" rel="alternate" type="text/html" title="TIL) Spring MVC Serivce ê³„ì¸µ" /><published>2022-10-24T00:00:00+09:00</published><updated>2022-10-24T00:00:00+09:00</updated><id>http://localhost:4000/til/2022/10/24/til</id><content type="html" xml:base="http://localhost:4000/til/2022/10/24/til.html"><![CDATA[<p>ì£¼ë§ì´ ì§€ë‚˜ê³  ì›”ìš”ì¼ì´ ì™”ë‹¤.</p>

<p><img src="https://ifh.cc/g/Sl0oOY.gif" align="left" width="250px" height="300px" />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /></p>

<p>ì£¼ë§ë™ì•ˆ ì •ê·œì‹ ë³µìŠµê³¼ ë¸”ë¡œê·¸ ê°œì„¤ ì¤€ë¹„ë¥¼í–ˆë‹¤.<br />
ì˜¤ëŠ˜ ë¶€í„°ëŠ” GitHub Pageë¡œ ë§Œë“  ë¸”ë¡œê·¸ë¡œ í¬ìŠ¤íŒ…ì„ í• ë ¤ê³ í•œë‹¤.<br />
í•˜ë ¤ê³ í•˜ë ¤ê³  í–ˆëŠ”ë°, ë“œë””ì–´ ê°œì„¤í•  ìˆ˜ ìˆì–´ì„œ<br />
í¬ìŠ¤íŒ…í•˜ëŠ” ë§›ì´ ë‚  ê²ƒ ê°™ë‹¤ ã…ã…</p>

<hr />

<h2 id="service">Service</h2>

<p>ì €ë²ˆì£¼ì— API ê³„ì¸µì— ëŒ€í•´ì„œ ê³µë¶€ í–ˆì—ˆë‹¤.<br />
Controllerì˜ í•¸ë“¤ëŸ¬ ë©”ì„œë“œë¥¼ í†µí•´ì„œ<br />
í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì–´ë–»ê²Œ ì „ë‹¬ ë°›ì„ ìˆ˜ ìˆëŠ”ì§€?ê¹Œì§€ íŒŒì•…í•´ë³´ì•˜ê³ </p>

<p>ì´ë²ˆ ì‹œê°„ë¶€í„°ëŠ” Service ê³„ì¸µì„ ê³µë¶€í•´ë³¼ ì‹œê°„ì´ë‹¤.</p>
<ol>
  <li>DIë¥¼ ì‚¬ìš©í•´ API ê³„ì¸µê³¼ Service ê³„ì¸µì„ ì—°ë™í•˜ê¸°</li>
  <li>API ê³„ì¸µì˜ DTOí´ë˜ìŠ¤ì™€ Service ê³„ì¸µì˜ Entity í´ë˜ìŠ¤ë¥¼ ë§¤í•‘í•˜ê¸°</li>
</ol>

<p>Service í´ë˜ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìˆì–´<br />
ë„ë©”ì¸ ì—…ë¬´ ì˜ì—­ì„ êµ¬í˜„í•˜ëŠ” ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ê³¼ ê´€ë ¨ì´ ìˆë‹¤.</p>

<p><br /></p>

<h3 id="lombok">lombok</h3>
<p>ì‹œì‘ì— ì•ì„œ <strong>lombok</strong>ì—ì„œ ì§€ì›í•˜ëŠ” ì–´ë…¸í…Œì´ì…˜<br />
5ê°€ì§€ì •ë„ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ì</p>

<p>1). @NoArgsConstructor : íŒŒë¼ë¯¸í„°ê°€ ì—†ëŠ” ê¸°ë³¸ ìƒì„±ìë¡œ ë§Œë“¤ì–´ì¤Œ</p>

<p>2). @RequiredArgsConstructor : final, @NonNullë¡œ ë¶™ì€ ë©¤ë²„ ë³€ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ê°€ì§€ëŠ” ìƒì„±ìë¥¼ ìƒì„±í•´ì¤Œ <br />
   -&gt; ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì£¼ê¸°ë•Œë¬¸ì— ìƒì„±ìê°€ í•˜ë‚˜ì¼ê²½ìš° ìë™ìœ¼ë¡œ @Autowiredê°€ ëœë‹¤.</p>

<p>3). @AllArgsConstructor :í•´ë‹¹ ì• ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í´ë ˆìŠ¤ì— ì¶”ê°€ëœ ëª¨ë“  ë©¤ë²„ ë³€ìˆ˜ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ê°€ì§€ëŠ” ìƒì„±ìë¥¼ ìƒì„±í•´ì¤Œ</p>

<p>4). @Getter : ë©¤ë²„ ë³€ìˆ˜ì˜ Getter ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì¤Œ</p>

<p>5).@Setter : ë©¤ë²„ ë³€ìˆ˜ì˜ Setter ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ì¤Œ</p>

<p>ë§ë¡œ ë“¤ìœ¼ë©´ ì–´ë ¤ìš°ë‹ˆ ì½”ë“œë¡œ í™•ì¸í•´ë³´ì</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">memberId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ìœ„ì˜ ì½”ë“œê°€ lombok ì–´ë…¸í…Œì´ì…˜ì„ ì ìš©í•œ ì½”ë“œì´ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">memberId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getMemberId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">memberId</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getEmail</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">email</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMemberId</span><span class="o">(</span><span class="kd">final</span> <span class="kt">long</span> <span class="n">memberId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">memberId</span> <span class="o">=</span> <span class="n">memberId</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//NoArgsConstructor ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ìƒì„±ì</span>
    <span class="kd">public</span> <span class="nf">Member</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>
    <span class="c1">//AllArgsConstructor ì• ë…¸í…Œì´ì…˜ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ ìƒì„±ì</span>
    <span class="kd">public</span> <span class="nf">Member</span><span class="o">(</span><span class="kd">final</span> <span class="kt">long</span> <span class="n">memberId</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">email</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">memberId</span> <span class="o">=</span> <span class="n">memberId</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>í•´ë‹¹ lombok ì–´ë…¸í…Œì´ì…˜ì„ buildí•˜ë©´ ìœ„ì™€ ê°™ì´ ì½”ë“œê°€<br />
ìë™ìœ¼ë¡œ ìƒì„±ë˜ì„œ ë¹Œë“œë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p>ë§ê·¸ëŒ€ë¡œ ìš°ë¦¬ê°€ ì½”ë“œë¥¼ ì§ì ‘ ë‹¤ ì…ë ¥í•˜ì§€ì•Šì•„ë„<br />
lomobkì˜ ê¸°ëŠ¥ì„ ì´ìš©í•˜ë©´ ì–´ë…¸í…Œì´ì…˜ í•˜ë‚˜ë¡œ<br />
ì–´ë–¤ê¸°ëŠ¥ì´ ìˆëŠ”ì§€ ì‰½ê²Œ ìœ ì¶”ê°€ ê°€ëŠ¥í•˜ê³  ì½”ë“œë„ ê°„ê²°í•´ì§„ë‹¤.</p>

<h3 id="service-ê³„ì¸µ---api-ê³„ì¸µ--dto---entity-ë§µí•‘">Service ê³„ì¸µ - API ê³„ì¸µ / DTO - Entity ë§µí•‘</h3>

<p>ì €ë²ˆì£¼ì— ê³µë¶€í–ˆë˜ API ê³„ì¸µì˜ ë°ì´í„°ë¥¼ ë°›ê¸°ìœ„í•´<br />
í•¸ë“¤ëŸ¬ ë©”ì„œë“œë¥¼ í†µí•´ JSON ê°ì²´ ê°’ì„ DTOë¡œ ë°›ì•„ì˜¤ëŠ” ê²ƒ ê¹Œì§€ ê³µë¶€ë¥¼ í–ˆì—ˆë‹¤.<br />
ì´ì œ ì´ë ‡ê²Œ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ Service ê³„ì¸µê³¼ ì–´ë–»ê²Œ<br />
ì—°ë™ ì‹œí‚¤ê³  ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ ìœ ì—°í•œì§€ ê³µë¶€í•´ë³´ì.</p>

<p>ìš°ì„  ê¸°ë³¸ë¡œì§ì„ ì‘ì„±í•´ë³´ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Coffee</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">coffeeId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">korName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">engName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Entity í´ë˜ìŠ¤ì¸ Coffee í´ë˜ìŠ¤ì´ë‹¤.<br />
lombokì„ ì´ìš©í•´ Getter,Setter ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ê³ <br />
ìƒì„±ìëŠ” ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ì 1ê°œ (NoArgsConstructor)<br />
ë§¤ê°œë³€ìˆ˜ê°€ 4ê°œì¸ ìƒì„±ì 1ê°œ (AllArgsConstructor)<br />
í•´ì„œ ì´ 2ê°œì˜ ìƒì„±ìê°€ ë§Œë“¤ì–´ì¡Œë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoffeePostDto</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">korName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">engName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ê·¸ë¦¬ê³  API ê³„ì¸µì—ì„œ ë³´ë‚´ì¤„ ë°ì´í„°<br />
3ê°œë¥¼ ë©¤ë²„ë³€ìˆ˜ë¡œ ë§Œë“¤ì—ˆë‹¤.</p>

<p><br /></p>

<p>ì—­í• ê³¼ ê¸°ëŠ¥ì„ ë‚˜ëˆ„ê¸°ìœ„í•´ì„œ<br />
Controllerì—ëŠ” API ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ë°˜í™˜í•´ì£¼ëŠ” ì—­í• ë§Œ ë‘ê³ <br />
Service í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë¹„ì§€ë‹ˆìŠ¤ë¡œì§ì„ ë§Œë“¤ê³ <br />
Mapperë¥¼ ì´ìš©í•´ Dtoì™€ Entityí´ë˜ìŠ¤ë¥¼ ë§¤í•‘í•˜ì—¬ ì—°ë™í•´ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoffeeService</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">Coffee</span> <span class="nf">createCoffee</span><span class="o">(</span><span class="nc">Coffee</span> <span class="n">coffee</span><span class="o">){</span>
        
        <span class="c1">// coffee ê°ì²´ëŠ” ì¶”í›„ DBì—°ê²°í›„ ë¦¬í„´ë°›ëŠ” ê±¸ë¡œ ë³€ê²½ í•„ìš”.</span>
        <span class="nc">Coffee</span> <span class="n">toss</span> <span class="o">=</span> <span class="n">coffee</span><span class="o">;</span>

        <span class="k">return</span> <span class="n">toss</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ìš°ì„  Service í´ë˜ìŠ¤ë¥¼ Beanìœ¼ë¡œ ë“±ë¡í•´ë†“ê³ <br />
ì˜ì¡´ì„± ì£¼ì…ì„ í†µí–‰ createCoffee(); ë©”ì„œë“œë¥¼<br />
ë‹¤ë¥¸ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/api/coffees"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoffeeController</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CoffeeService</span> <span class="n">coffeeService</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CoffeeMapper</span> <span class="n">coffeeMapper</span><span class="o">;</span>
   
   <span class="nd">@Autowired</span> <span class="c1">// ì˜ì¡´ì„± ì£¼ì…, ìƒì„±ìê°€ 1ê°œë¼ ìƒëµê°€ëŠ¥í•¨</span>
   <span class="kd">public</span> <span class="nf">CoffeeController</span><span class="o">(</span><span class="nc">CoffeeService</span> <span class="n">coffeeService</span><span class="o">,</span> <span class="nc">CoffeeMapper</span> <span class="n">coffeeMapper</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">coffeeService</span> <span class="o">=</span> <span class="n">coffeeService</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">coffeeMapper</span> <span class="o">=</span> <span class="n">coffeeMapper</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="nd">@PostMapping</span>
   <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">postCoffee</span><span class="o">(</span><span class="nd">@Valid</span> <span class="nd">@RequestBody</span> <span class="nc">CoffeePostDto</span> <span class="n">coffeePostDto</span><span class="o">)</span> <span class="o">{</span>

      <span class="nc">Coffee</span> <span class="n">coffee</span> <span class="o">=</span> <span class="n">coffeeMapper</span><span class="o">.</span><span class="na">coffeePostDtoToCoffee</span><span class="o">(</span><span class="n">coffeePostDto</span><span class="o">);</span> <span class="c1">// DTO &lt;-&gt; Entity ë³€í™˜</span>
      <span class="nc">Coffee</span> <span class="n">response</span> <span class="o">=</span> <span class="n">coffeeService</span><span class="o">.</span><span class="na">createCoffee</span><span class="o">(</span><span class="n">coffee</span><span class="o">);</span> <span class="c1">// Coffee ìƒì„±</span>

      <span class="k">return</span> <span class="k">new</span> <span class="nc">ResponseEntity</span><span class="o">&lt;&gt;(</span><span class="n">coffeeMapper</span><span class="o">.</span><span class="na">coffeeToCoffeeResponseDto</span><span class="o">(</span><span class="n">response</span><span class="o">),</span> <span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Controller í´ë˜ìŠ¤ì—ì„œëŠ” CoffeeService,CoffeeMapper ë¥¼ ì˜ì¡´ì„± ì£¼ì…í•´ë†“ê³ <br />
Mapper í´ë˜ìŠ¤ì¸ coffeeMapperë¥¼ ë§Œë“¤ì–´ coffeePostDtoë¥¼ &lt;-&gt; entityì˜ ë§µí•‘ì„ ì‹œì¼œì£¼ëŠ”<br />
ë°©ë²•ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í–ˆë‹¤. ìµœì¢…ì ìœ¼ë¡œ ë§µí•‘ì‹œì¼œ ë°›ì€ ê°ì²´ë¥¼<br />
Serviceë¡œì§ì˜ createCoffeeë¡œ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë°˜í™˜ë°›ì€ Coffee í´ë˜ìŠ¤ ì°¸ì¡° ë³€ìˆ˜ë¥¼<br />
coffeeToCoffeeResponseDtoë¼ëŠ” ë§µí¼ë¥¼ ì´ìš©í•´ Json ê°ì²´ë¥¼ í†µí•´ ë°˜í™˜í•´ì£¼ëŠ” ëª¨ìŠµì´ë‹¤.</p>

<p><br /></p>

<p>ì´ì œ @Mapperë¼ëŠ” ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•´<br />
ì¶”ìƒí™” ì‹œì¼œ Mapper í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ë³´ì.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">mapstruct</span><span class="o">:</span><span class="nl">mapstruct:</span><span class="mf">1.4</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="na">Final</span><span class="err">'</span>
<span class="n">annotationProcessor</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">mapstruct</span><span class="o">:</span><span class="n">mapstruct</span><span class="o">-</span><span class="nl">processor:</span><span class="mf">1.4</span><span class="o">.</span><span class="mi">2</span><span class="o">.</span><span class="na">Final</span><span class="err">'</span>
</code></pre></div></div>
<p>ìš°ì„  gradle dependenciesì— ìœ„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ Mapperë¥¼ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Mapper</span><span class="o">(</span><span class="n">componentModel</span> <span class="o">=</span> <span class="s">"spring"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CoffeeMapper</span> <span class="o">{</span>
    <span class="nc">Coffee</span> <span class="nf">coffeePostDtoToCoffee</span><span class="o">(</span><span class="nc">CoffeePostDto</span> <span class="n">coffeePostDto</span><span class="o">);</span>
    <span class="nc">CoffeeResponseDto</span> <span class="nf">coffeeToCoffeeResponseDto</span><span class="o">(</span><span class="nc">Coffee</span> <span class="n">coffee</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì´ë ‡ê²Œ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ë©”ì„œë“œë¥¼ ì¶”ìƒí™” ì‹œì¼œë†“ìœ¼ë©´<br />
Mapper í´ë˜ìŠ¤ê°€ ìë™ìœ¼ë¡œ ë¹Œë“œê³¼ì •ì—ì„œ êµ¬í˜„ì²´ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.<br />
í•´ë‹¹ êµ¬í˜„ì²´ì˜ ë‚´ìš©ì€ ì²«ì¤„ë¶€í„° ë³´ìë©´</p>

<p>Coffee coffeePostDtoToCoffee(CoffeePostDto coffeePostDto);<br />
coffeePostDtoë¡œ ì „ë‹¬ëœ ê°ì²´ë¥¼ Coffee íƒ€ì…ì˜ ë³€ìˆ˜ë¡œ ê°’ì„ ë„£ì–´ì¤€ë‹¤.<br />
ë„£ì„ë•ŒëŠ” ìƒì„±ìì™€ Setterë¡œ ë„£ì–´ì¤€ë‹¤. ë§ê·¸ëŒ€ë¡œ @Mapperí•˜ë‚˜ë¥¼<br />
ë‹¬ì•„ë†“ìŒìœ¼ë¡œì„œ ìë™ìœ¼ë¡œ ì½”ë“œê°€ ì£¼ì…ë˜ëŠ” ê²ƒì´ë‹¤.<br />
ì‹¤ì œë¡œ ë¹Œë“œí•´ë†“ì€ ì½”ë“œë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ë‚˜ì˜¨ë‹¤.</p>

<p><strong>&lt;@Mapperë¥¼ í†µí•´ ìë™ìœ¼ë¡œ Buildëœ ì½”ë“œ&gt;</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">Coffee</span> <span class="nf">coffeePostDtoToCoffee</span><span class="o">(</span><span class="nc">CoffeePostDto</span> <span class="n">coffeePostDtoo</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">coffeePostDtoo</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="nc">Coffee</span> <span class="n">coffee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Coffee</span><span class="o">();</span>
      <span class="n">coffee</span><span class="o">.</span><span class="na">setKorName</span><span class="o">(</span><span class="n">coffeePostDtoo</span><span class="o">.</span><span class="na">getKorName</span><span class="o">());</span>
      <span class="n">coffee</span><span class="o">.</span><span class="na">setEngName</span><span class="o">(</span><span class="n">coffeePostDtoo</span><span class="o">.</span><span class="na">getEngName</span><span class="o">());</span>
      <span class="n">coffee</span><span class="o">.</span><span class="na">setPrice</span><span class="o">(</span><span class="n">coffeePostDtoo</span><span class="o">.</span><span class="na">getPrice</span><span class="o">());</span>
      <span class="k">return</span> <span class="n">coffee</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ë‹¤ë¥¸ ë¶€ë¶„ë“¤ì€ ìƒëµí•˜ê³  coffeePostDto ë¶€ë¶„ë§Œ ë³´ë©´<br />
ìœ„ì²˜ëŸ¼ coffeePostDtoë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´<br />
ì°¸ì¡°ë³€ìˆ˜ì— ê°’ì´ ìˆìœ¼ë©´, Coffee ê°ì²´ë¥¼ ìƒì„±ìë¥¼ í†µí•´ ìƒˆë¡œë§Œë“¤ì–´<br />
setterë¡œ í•„ë“œë³€ìˆ˜ì— ê°’ì„ ë„£ì–´ì£¼ëŠ” ëª¨ìŠµì´ë‹¤.</p>

<p>ì‹¤ì œë¡œ Coffee í´ë˜ìŠ¤ì—ëŠ” @NoArgsConstructorê°€ ìˆê¸° ë•Œë¬¸ì—<br />
ë§¤ê°œë³€ìˆ˜ê°€ ì—†ëŠ” ìƒì„±ìë¥¼ í†µí•´ ê°ì²´ê°€ ë§Œë“¤ì–´ì§€ê³ <br />
@Setteê°€ ìˆê¸°ì— í•„ë“œë³€ìˆ˜ì— ê°’ì„ ë„£ì–´ ì¤„ ìˆ˜ ìˆê²Œë˜ì–´ì§„ë‹¤.<br />
ì‹¤ì œë¡œ @Setterë¥¼ ì§€ìš°ê²Œë˜ë©´ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ê°’ì„ ë„£ì„ ë°©ë²•ì„ ì°¾ëŠ”ë‹¤.</p>

<p><strong>&lt;Coffee í´ë˜ìŠ¤ì˜ @Setterë¥¼ ì§€ìš´ê³  @Mapperë¥¼ í†µí•´ ìë™ìœ¼ë¡œ Buildí•œ ì½”ë“œ &gt;</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">Coffee</span> <span class="nf">coffeePostDtoToCoffee</span><span class="o">(</span><span class="nc">CoffeePostDto</span> <span class="n">coffeePostDtoo</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">coffeePostDtoo</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="nc">Coffee</span> <span class="n">coffee</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Coffee</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">coffee</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>@Setterë¥¼ ì§€ì› ì„ ê²½ìš°ì— ìœ„ì²˜ëŸ¼ ë¹Œë“œê³¼ì •ì—ì„œ Mapperë¥¼ í†µí•´<br />
ê°’ì„ ì „ë‹¬í•´ì£¼ëŠ” ì½”ë“œê°€ ë‹¬ë¼ì§€ê²Œëœë‹¤. ì´ë ‡ê²Œ ë˜ë©´<br />
Setterê°€ ì—†ê¸°ë•Œë¬¸ì— ê°ì²´ë§Œ ë§Œë“¤ì–´ì ¸ì„œ ì „ë‹¬ë  ë¿ Dtoë¡œ ì „ë‹¬ëœ ê°’ì´<br />
ìƒˆë¡œìš´ ê°ì²´ë¡œ ì €ì¥ë˜ì–´ì§€ì§€ ì•Šìœ¼ë‹ˆ ì£¼ì˜í•´ì•¼í•œë‹¤.</p>

<p><br /></p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì‘ë‹µì„í•  ë•Œ ì „ë‹¬í•´ì¤€ Dtoë¥¼ ë§Œë“¤ì—ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@Setter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CoffeeResponseDto</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">coffeeId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">korName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">engName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>
<p>í•´ë‹¹ í´ë˜ìŠ¤ë„ ìƒì„±ìì™€, Getter,Setterë¥¼ ë§Œë“¤ì–´ì£¼ê³ <br />
Controllerì—ì„œ returní•˜ì—¬ ê°’ì„ ì‘ë‹µí•  ë•Œ<br />
Coffeeê°ì²´ë¥¼ CoffeeMapperë¡œ ë§µí•‘í•˜ì—¬ ë‹¤ì‹œ ë¦¬í„´í•˜ê²Œë  ìˆ˜ ìˆê²Œ<br />
ë§Œë“¤ì–´ì¤€ í´ë˜ìŠ¤ì´ë‹¤.</p>

<p><br /></p>

<p>ì´ë ‡ê²Œ ì˜¤ëŠ˜ í”„ë¡œê·¸ë¨í•´ë³¸ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ìë©´</p>

<ol>
  <li>@Mapper ê¸°ëŠ¥ì„ í†µí•´ í•¸ë“¤ëŸ¬ë©”ì„œë“œë¡œ ë°›ì€ ê°’ DTOë¥¼ -&gt; Entity ê°ì²´ìƒì„± ë° ê°’ì„ ë§µí•‘í•¨<br />
ex) coffeePostDto -&gt; Coffee í•„ë“œë³€ìˆ˜ì˜ ê°’ì„ ì €ì¥.</li>
  <li>coffeeMapper í´ë˜ìŠ¤ë¥¼ í†µí•´ ë°˜í™˜ ë°›ì€ ê°ì²´ë¥¼ ì €ì¥</li>
  <li>2ë²ˆì—ì„œ ë°˜í™˜ë°›ì€ Coffeeê°ì²´ë¥¼ Service ë¡œì§ì˜ í™œìš©</li>
  <li>Service ë¡œì§ì—ì„œ ë°˜í™˜ ë°›ì€ ê°ì²´ë¥¼ coffeeMapperë¡œ ì „ë‹¬</li>
  <li>ì „ë‹¬ë°›ì€ coffeeMapperì—ì„œ ì‘ë‹µì— í•´ë‹¹í•˜ëŠ” ê°ì²´ë¥¼ ResponEntity ê°ì²´ì™€ í•¨ê»˜ ë°˜í™˜<br />
í•˜ì—¬ Json ê°ì²´ë¡œ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬</li>
</ol>

<hr />

<p>ì˜¤ëŠ˜ì€ ì´ë ‡ê²Œ @Mapper ê¸°ëŠ¥ì„ ì´ìš©í•´<br />
ìë™ìœ¼ë¡œ ë§µí•‘í•´ì£¼ê³  ì‚¬ìš©í•œëŠ” ë°©ë²•ì„ ë°°ì›Œ ë³´ì•˜ê³ <br />
ì•„ì§ê¹Œì§€ ì–´ìƒ‰í•˜ê¸´í•˜ì§€ë§Œ ëŒ€ëµì ìœ¼ë¡œ ì–´ë–»ê²Œ<br />
ì „ë‹¬ë˜ê³  ë¬¶ì—¬ì§€ëŠ”ì§€ ê°ì´ ì¡íˆê¸° ì‹œì‘í•˜ê³  ìˆë‹¤.</p>

<p>ì•„ì§ DataBaseê°€ ì—°ê²°ì´ì•ˆë˜ ì´í•´ê°€ ì•ˆê°€ëŠ” ë¶€ë¶„ì´ ì‚¬ì‹¤ ìˆì§€ë§Œ<br />
ì°¨ê·¼ì°¨ê·¼ Step by Stepìœ¼ë¡œ ì•Œì•„ê°€ë³´ì</p>

<p>ì˜¤ëŠ˜ê³µë¶€ëŠ” ì—¬ê¸°ì„œ ë!!</p>

<p><br /></p>

<p><span style="color:#994C00"><strong>ì˜¤ëŠ˜ì˜ ì»¤í”¼ëŸ‰</strong></span>: â˜•ï¸ â˜•ï¸ â˜•ï¸ â˜•ï¸<br />
<strong>ì˜¤ëŠ˜ì˜ ì ì‹¬</strong>: ê°„ì§œì¥, ê³µê¸°ë°¥</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="TIL" /><category term="TIL" /><category term="ë¶€íŠ¸ìº í”„" /><category term="ì½”ë“œìŠ¤í…Œì´ì¸ " /><summary type="html"><![CDATA[ì£¼ë§ì´ ì§€ë‚˜ê³  ì›”ìš”ì¼ì´ ì™”ë‹¤.]]></summary></entry></feed>