<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.0">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2023-01-15T21:38:18+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">LeeJellan</title><subtitle>ì•ˆë…•í•˜ì„¸ìš”!ğŸ™‚ IT,ì—¬í–‰,ê¸°íƒ€ ë“± ê¸°ë¡ì„ ë‚¨ê¸°ê¸°ìœ„í•œ ë¸”ë¡œê·¸ ì…ë‹ˆë‹¤ !</subtitle><author><name>LEE JAEHYEOK</name></author><entry><title type="html">Spring) AWS S3 FileUpload í•˜ì—¬ URLë¡œ ê´€ë¦¬í•˜ê¸°</title><link href="http://localhost:4000/spring/2023/01/15/spring-fileupload.html" rel="alternate" type="text/html" title="Spring) AWS S3 FileUpload í•˜ì—¬ URLë¡œ ê´€ë¦¬í•˜ê¸°" /><published>2023-01-15T00:00:00+09:00</published><updated>2023-01-15T00:00:00+09:00</updated><id>http://localhost:4000/spring/2023/01/15/spring-fileupload</id><content type="html" xml:base="http://localhost:4000/spring/2023/01/15/spring-fileupload.html"><![CDATA[<p>ì˜¤ëŠ˜ì€ AWS S3ì— íŒŒì¼ ì—…ë¡œë“œë¥¼ í•˜ëŠ”<br />
ì˜ˆì œë¥¼ ë‹¤ë¤„ë³´ë ¤í•œë‹¤.</p>

<p>êµ¬ê¸€ì—ì„œ ì—¬ëŸ¬ê°€ì§€ ë¸”ë¡œê·¸ë¥¼ ëŒì•„ë‹¤ë‹ˆë©° í•™ìŠµí–ˆê³ <br />
ìˆœì„œì™€ ì½”ë“œì— ëŒ€í•´ ì •ë¦¬í•´ë³´ë ¤í•œë‹¤. <br />
ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œëŠ” <a href="https://github.com/MyCatlikesChuru/ImageFileUpload">GitHub ë ˆí¬ì§€í† ë¦¬</a>ë¡œ ê³µìœ í•´ë³¸ë‹¤.</p>

<p><br /></p>

<h3 id="-ì‘ì—…-í™˜ê²½">âœ… ì‘ì—… í™˜ê²½</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AWS S3 ë²„í‚·
Spring Boot 2.7.7  
Java 11 
macOs Monterey 12.6 ë²„ì „ 
ë¡œì»¬í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ì§„í–‰
</code></pre></div></div>

<p><br /></p>

<h3 id="-ì‘ì—…-ìˆœì„œ-ë°-ì¤€ë¹„">ğŸ“Œ ì‘ì—… ìˆœì„œ ë° ì¤€ë¹„</h3>

<p>ë‚´ê°€ êµ¬ìƒí•˜ë ¤ê³  ìƒê°í•˜ëŠ” ì•„í‚¤í…ì²˜ë¥¼ ê·¸ë ¤ë³´ì•˜ë‹¤.<br />
ìˆœì„œë¥¼ ê°„ë‹¨íˆ ì§šê³  ë„˜ì–´ê°€ì</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212537839-f1ebee39-3c06-449e-b3f0-359bb3c3d1c6.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>1). í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ë¯¸ì§€íŒŒì¼ì„ ì—…ë¡œë“œ ìš”ì²­<br />
-&gt; multipart/form-data íƒ€ì…ìœ¼ë¡œ ìš”ì²­<br />
-&gt; Key=file / value=ì´ë¯¸ì§€ í˜•íƒœë¡œ ìš”ì²­ì„ ë³´ëƒ„</p>

<p>2). ìš”ì²­ì„ ë°›ì€ ì„œë²„ì—ì„œ íŒŒì¼ì„ AWS S3 ë²„í‚·ì— ì €ì¥í•¨.<br />
-&gt; ì „ë‹¬ ë°›ì€ íŒŒì¼ì„ AWS ì €ì¥ì†Œì— ì›í•˜ëŠ” í´ë”ì— ì €ì¥í•¨.<br />
-&gt; ì €ì¥ì™„ë£Œí›„ DataBaseì— URLì„ ì €ì¥í•¨.</p>

<p>3). ì €ì¥ì´ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆë‹¤ê³  í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•¨.<br />
-&gt; ë§Œì•½ ì €ì¥ì— ì‹¤íŒ¨ ë° ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•ŒëŠ” ì˜ˆì™¸ì²˜ë¦¬í•˜ì—¬ ì‘ë‹µí•´ì¤Œ</p>

<p>â—ï¸ì½”ë“œê°€ ê¸¸ì–´ì§ˆ ê²ƒì„ ìš°ë ¤í•´ DBì— ì €ì¥í•˜ëŠ” ê³¼ì •ì€ ìƒëµí•©ë‹ˆë‹¤!<br />
AWS S3ì— ì €ì¥ë˜ê³  URLì„ ì¶”ì¶œí•˜ëŠ” ê³¼ì •ë§Œ ë‹´ìœ¼ë ¤í•©ë‹ˆë‹¤.</p>

<p><br /></p>

<h3 id="-aws-s3-ìƒì„±">ğŸ“Œ AWS S3 ìƒì„±</h3>

<p>ì²«ë²ˆì§¸ë¡œ í•´ì•¼í•  ê²ƒì´ S3 ë²„í‚·ì„ ìƒì„±í•´ì•¼í•œë‹¤. <br />
ì—¬ëŸ¬ê°€ì§€ ê¸€ì„ ì°¸ê³ í•´ë³´ë©´ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. <br />
ê·¸ë˜ë„ ì´ëŸ¬í•œ ê³¼ì •ì„ ì ì–´ë³´ë ¤í•œë‹¤.</p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ëŠ” í”„ë¦¬í‹°ì–´ ê³„ì •ì´ ìˆê¸°ì— ë¬´ë£Œë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í–ˆë‹¤. <br />
ë¬´ë£Œ ê¸°ì¤€ì— ë„˜ì–´ê°€ì§€ë§Œ ì•Šê²Œ ì˜ ì‚¬ìš©í•˜ë©´ ë¬´ë¦¬ëŠ” ì—†ì„ ê²ƒ ê°™ë‹¤.</p>

<p>ë³¸ê²©ì ìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538169-ec74cc60-1060-40d0-8e44-df280f9571dc.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë²„í‚· ì´ë¦„ê³¼ ë¦¬ì „ì„ ì„ íƒí•´ì£¼ì.<br />
í•œêµ­ì— ìˆê¸°ë•Œë¬¸ì— ì„œìš¸ë¦¬ì „ì„ ì„ íƒí–ˆë‹¤.</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538230-331609e3-66e3-4d2d-8f55-aa7cb22b4792.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìš°ì„  ì—‘ì„¸ìŠ¤ ì°¨ë‹¨ì˜ ì²´í¬ë°•ìŠ¤ëŠ” í•´ì œì‹œì¼œë‘ì—ˆê³ <br />
ì´ì—ë”°ë¼ ì•„ë˜ ê²½ê³ ë¬¸êµ¬ê°€ ëœ¬ë‹¤. í•´ë‹¹ë¶€ë¶„ì„ ì²´í¬í•´ì¤˜ì•¼<br />
ë²„í‚·ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</p>

<p>ì´ë¯¸ì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ê³µìš©ìœ¼ë¡œ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— <br />
ìš°ì„ ì€ í¼ë¸”ë¦­ ì•¡ì„¸ì„œë¥¼ ì°¨ë‹¨í•˜ì§€ ì•Šì•˜ë‹¤.</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538236-33952455-c626-4cad-99df-69af51b0ecf2.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538244-c3dbfff3-1865-4a8f-9b49-1874cd5ca7c0.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì´ì™¸ ì„¤ì •ì€ ê¸°ë³¸ìœ¼ë¡œ ë‘ê³  ë²„í‚· ìƒì„±ì„ ì§„í–‰í•˜ë©´ <br />
ë²„í‚·ì´ ë§Œë“¤ì–´ì§„ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>í•´ë‹¹ ë²„í‚·ì—ì„œ í´ë”ë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.<br />
ë‚˜ëŠ” í”„ë¡œí•„ì‚¬ì§„ì„ ëª¨ì•„ë†“ëŠ” í´ë”ì— <br />
ì´ë¯¸ì§€ ì—…ë¡œë“œí•œ íŒŒì¼ì„ ê´€ë¦¬í•˜ë ¤í•œë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538533-35027900-bebf-458b-b258-bd28fe7a5025.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë²„í‚·ì—ì„œ í´ë” ë§Œë“¤ê¸°ë¥¼ ëˆŒëŸ¬ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538576-c6629514-ad7d-406f-9c39-3b9ce24562e8.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë§Œë“¤ê²Œë  ê²½ìš° ìœ„ì™€ ê°™ì€ í´ë”ê°€ ìƒê¸°ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. <br />
ìµœì¢…ì ìœ¼ë¡œ ìœ„ì— í´ë”ì— ì´ë¯¸ì§€ë¥¼ ì˜¬ë ¤ë³¼ ì˜ˆì •ì´ë‹¤.</p>

<p><br /></p>

<h3 id="-iam-ì„¤ì •">ğŸ“Œ IAM ì„¤ì •</h3>

<p>IAM -&gt; ì—‘ì„¸ìŠ¤ ê´€ë¦¬ -&gt; ì‚¬ìš©ì -&gt; ì‚¬ìš©ì ì¶”ê°€ë¥¼ ëˆŒëŸ¬ ì¤ë‹ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538540-44bf93ef-9803-4f48-9f86-827a3d36f4fe.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì‚¬ìš©ìì´ë¦„ì„ ì›í•˜ëŠ”ëŒ€ë¡œ ì„¤ì •í•˜ê³  <br />
ì—‘ì„¸ìŠ¤ í‚¤ ì²´í¬ ë°•ìŠ¤ë¥¼ ì²´í¬í•œë‹¤.</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538545-cdcaad32-3f64-4a44-b73d-6c534338cb6b.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ ê¸°ì¡´ ì •ì±… ì§ì ‘ ì—°ê²°ì—ì„œ<br />
<code class="language-plaintext highlighter-rouge">AmazonS3FullAcess</code>ë¥¼ ì¶”ê°€í•´ì¤€ë‹¤.</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538553-619d2f40-f900-4376-a9f7-c79633571007.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë‹¤ìŒì„ ëˆŒëŸ¬ ë„˜ì–´ê°€ì¤€ë‹¤.</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538556-b8fff09d-fe94-4dc2-bdfc-58f3625efee0.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì‚¬ìš©ì ë§Œë“¤ê¸° ì¶”ê°€</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538557-7d71c867-db35-4be6-bd34-a1b9fc4a99e9.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì§€ì •í•œ ì‚¬ìš©ìì´ë¦„ìœ¼ë¡œ ì—‘ì„¸ìŠ¤ í‚¤IDì™€ ë¹„ë°€ ì—‘ì„¸ìŠ¤ í‚¤ê°€ ë°œê¸‰ëœë‹¤. <br />
ì´ ë‘ê°€ì§€ê°€ ì¤‘ìš”í•˜ë‹¤. í›„ì— ì—°ê²°í• ë•Œ ì‚¬ìš©ë˜ë‹ˆ ë”°ë¡œ ì €ì¥í•´ë‘ì</p>

<p>ì´ í‚¤ëŠ” ì ˆëŒ€ë¡œ Githubì— ì˜¬ë¦¬ê±°ë‚˜ ê³µìœ ë˜ë©´ ì•ˆë˜ëŠ” í‚¤ê°’ì´ë‹ˆ <br />
ì£¼ì˜í•´ì„œ ê´€ë¦¬í•˜ë„ë¡ í•˜ì</p>

<p><br /></p>

<p><img src="https://user-images.githubusercontent.com/95069395/212538560-2247c35c-3d06-46c3-b4ef-215f9e8ca6ac.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìµœì¢…ì ìœ¼ë¡œ IAM ì‚¬ìš©ìê°€ ë§Œë“¤ì–´ì§„ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. <br />
í•´ë‹¹ í‚¤ê°’ìœ¼ë¡œ S3ì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì¡Œê³  <br />
ì´ì œ ì½”ë“œë¥¼ ì‘ì„±í•´ ì´ë¯¸ì§€ë¥¼ ì˜¬ë ¤ë³´ë„ë¡ í•˜ì</p>

<p><br /></p>

<h3 id="-ì½”ë“œ-ì‘ì„±">ğŸ“Œ ì½”ë“œ ì‘ì„±</h3>

<h4 id="-ê¸°ë³¸-ì…‹íŒ…">ğŸ›  ê¸°ë³¸ ì…‹íŒ…</h4>

<p><code class="language-plaintext highlighter-rouge">application.yml</code> ì„ ì„¤ì •í•´ì£¼ì</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">servlet</span><span class="pi">:</span>
    <span class="na">multipart</span><span class="pi">:</span>
      <span class="na">max-file-size</span><span class="pi">:</span> <span class="s">10MB</span>
      <span class="na">max-request-size</span><span class="pi">:</span> <span class="s">10MB</span>
<span class="na">cloud</span><span class="pi">:</span>
  <span class="na">aws</span><span class="pi">:</span>
    <span class="na">credentials</span><span class="pi">:</span>
      <span class="na">access-key</span><span class="pi">:</span> <span class="s">${S3_ACCESS_KEY}</span>
      <span class="na">secret-key</span><span class="pi">:</span> <span class="s">${S3_SECRET_KEY}</span>
    <span class="na">s3</span><span class="pi">:</span>
      <span class="na">bucket</span><span class="pi">:</span> <span class="s">indiego-fileupload/profileimage</span>
    <span class="na">region</span><span class="pi">:</span>
      <span class="na">static</span><span class="pi">:</span> <span class="s">ap-northeast-2</span>
    <span class="na">stack</span><span class="pi">:</span>
      <span class="na">auto</span><span class="pi">:</span> <span class="no">false</span>
</code></pre></div></div>

<p>ì²˜ìŒìœ¼ë¡œëŠ” servletì˜ multipart ìš©ëŸ‰ ì‚¬ì´ì¦ˆë¥¼ ì§€ì •í•´ì£¼ì—ˆë‹¤. <br />
10MB ì´ìƒì„ ë„˜ì§€ëª»í•˜ë„ë¡ ì§€ì •í–ˆê³ , ë„˜ì€ íŒŒì¼ì´ ì˜¬ ê²½ìš°ì—<br />
ì˜ˆì™¸ì²˜ë¦¬ëŠ” ê°€ì¥ ë§¨ ì•„ë˜ì—ì„œ ì•Œì•„ë³´ì</p>

<p>ìœ„ì—ì„œ S3 ì„¤ì •í–ˆë˜ ê²ƒê³¼ ê°™ì´ <br />
regionì€ ì„œìš¸(ap-northeast-2)ë¡œ ì§€ì •<br />
bucketì€ ë‚˜ì˜ ë²„í‚·ì´ë¦„ì¸ indiego-fileuploadì— <br />
í´ë” ê²½ë¡œì¸ /profileimageë¥¼ ë¶™ì—¬ì£¼ì—ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³  acees-key, secret-keyì— ëŒ€í•œ ì„¤ì •ì€ <br />
í™˜ê²½ë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê³  ì§€ì •í•´ë‘ì—ˆë‹¤. ê°ì í™˜ê²½ì— ë§ê²Œ<br />
ê°’ì„ í™˜ê²½ë³€ìˆ˜ì— ë„£ê³  ì‚¬ìš©í•˜ê±°ë‚˜ í•˜ë“œì½”ë”©ìœ¼ë¡œ í•´ë‘ì–´ë„ëœë‹¤.(ê¹ƒì—ì˜¬ë¦¬ì§€ë§Œ ë§ê²ƒ..)</p>

<p><br /></p>

<p>ê·¸ë¦¬ê³  build.gradleì„ ì„¤ì •í•´ì£¼ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dependencies</span> <span class="o">{</span>
	<span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">cloud</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">cloud</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="nl">aws:</span><span class="mf">2.2</span><span class="o">.</span><span class="mi">6</span><span class="o">.</span><span class="na">RELEASE</span><span class="err">'</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë‹¤ìŒìœ¼ë¡œëŠ”<br />
AmazonS3Config í´ë˜ìŠ¤ë¥¼ ì‘ì„±í•´ë³´ì.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AmazonS3Config</span> <span class="o">{</span>
    
	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${cloud.aws.credentials.access-key}"</span><span class="o">)</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">accessKey</span><span class="o">;</span>

	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${cloud.aws.credentials.secret-key}"</span><span class="o">)</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">secretKey</span><span class="o">;</span>

	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${cloud.aws.region.static}"</span><span class="o">)</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">region</span><span class="o">;</span>

	<span class="nd">@Bean</span>
	<span class="kd">public</span> <span class="nc">AmazonS3Client</span> <span class="nf">amazonS3Client</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">BasicAWSCredentials</span> <span class="n">awsCreds</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BasicAWSCredentials</span><span class="o">(</span><span class="n">accessKey</span><span class="o">,</span> <span class="n">secretKey</span><span class="o">);</span>
		<span class="k">return</span> <span class="o">(</span><span class="nc">AmazonS3Client</span><span class="o">)</span> <span class="nc">AmazonS3ClientBuilder</span><span class="o">.</span><span class="na">standard</span><span class="o">()</span>
			<span class="o">.</span><span class="na">withRegion</span><span class="o">(</span><span class="n">region</span><span class="o">)</span>
			<span class="o">.</span><span class="na">withCredentials</span><span class="o">(</span><span class="k">new</span> <span class="nc">AWSStaticCredentialsProvider</span><span class="o">(</span><span class="n">awsCreds</span><span class="o">))</span>
			<span class="o">.</span><span class="na">build</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">AmazonS3Client</code>íƒ€ì…ìœ¼ë¡œ ë¹ˆì„ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤. <br />
ì´ìš©ëœ ì •ë³´ëŠ” í™˜ê²½ë³€ìˆ˜ì— ì„¤ì •í–ˆë˜ ê°’ë“¤ì´ ì´ìš©ë˜ì—ˆë‹¤.
ì´ë ‡ê²Œê¹Œì§€ë§Œ ì„¤ì •í•´ë†“ê³  ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì˜ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì</p>

<p><br /></p>

<h4 id="-ë¬¸ì œë°œìƒ-ì²˜ë¦¬">ğŸ ë¬¸ì œë°œìƒ ì²˜ë¦¬</h4>

<p>ì‹¤í–‰ì¤‘ ì—¬ëŸ¬ê°€ì§€ ì˜ˆì™¸ë“¤ì„ ë§Œë‚˜ê²Œ ë  ìˆ˜ ìˆë‹¤. <br />
ë‚´ê°€ ë§Œë“  ì˜ˆì™¸ë“¤ì˜ í•´ê²°ë°©ë²•ì„ ì ì–´ë³¸ë‹¤.</p>

<p><strong>1). AmazonClientException ë¬¸ì œ</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">com</span><span class="o">.</span><span class="na">amazonaws</span><span class="o">.</span><span class="na">AmazonClientException</span><span class="o">:</span> <span class="no">EC2</span> <span class="nc">Instance</span> <span class="nc">Metadata</span> <span class="nc">Service</span> <span class="n">is</span> <span class="n">disabled</span>
</code></pre></div></div>

<p>ìœ„ì™€ ê°™ì€ ì˜ˆì™¸ê°€ ì½˜ì†”ì— ì°í˜€ìˆì—ˆë‹¤.<br />
<a href="https://h-kkaemi.tistory.com/24">AmazonClientException ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</a>ë¥¼ ì°¸ê³ í•´ì„œ í•´ê²°í•´ë³´ì•˜ë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212529483-83bdd3c5-1ec1-499e-a7b9-9e4d4143866b.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì²«ë²ˆì§¸ë¡œ êµ¬ì„±í¸ì§‘ì—ì„œ  VM Optionì„ ì¶”ê°€í•´<br />
<code class="language-plaintext highlighter-rouge">-Dcom.amazonaws.sdk.disableEc2Metadata=true</code>ë¥¼ ì¶”ê°€í•´ì£¼ì—ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³  yml íŒŒì¼ ë¡œê¹… ì„¤ì •ì„</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">logging</span><span class="pi">:</span>
  <span class="na">level</span><span class="pi">:</span>
    <span class="na">com</span><span class="pi">:</span>
      <span class="na">amazonaws</span><span class="pi">:</span>
        <span class="na">util</span><span class="pi">:</span>
          <span class="na">EC2MetadataUtils</span><span class="pi">:</span> <span class="s">error</span>
</code></pre></div></div>

<p>ìœ„ì™€ ê°™ì´ ì„¤ì •í•´ì¤€ë‹¤ë©´, ë”ì´ìƒ ì˜¤ë¥˜ ë©”ì„¸ì§€ëŠ” ë³´ì´ì§€ ì•Šì„ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<p><strong>2). AmazonS3Exception ë¬¸ì œ</strong></p>

<p>ì´ë²ˆì— ë°œìƒí•œ ë¬¸ì œëŠ” ë²„í‚·ì—ì„œ ACLsë¥¼ í—ˆìš©í•˜ì§€<br />
ì•Šì•˜ë‹¤ëŠ” ë¬¸êµ¬ê°€ ì¶œë ¥ì™¸ì—ˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>com.amazonaws.services.s3.model.AmazonS3Exception: The bucket does not allow ACLs
</code></pre></div></div>

<p>í•´ë‹¹ ë¬¸ì œë„ AWS S3 ë²„í‚·ì˜</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212529451-bd253a0e-7033-44a9-9749-8704c9223db3.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ACLì„ í™œì„±í™”ì‹œì¼œë‘ì—ˆë”ë‹ˆ í•´ê²°ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<h4 id="-ì½”ë“œ-ì‘ì„±-1">ğŸ›  ì½”ë“œ ì‘ì„±</h4>

<p>ì²«ë²ˆì§¸ë¡œ Controllerë¥¼ ì‘ì„±í•´ë³´ì</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.image.fileupload.controller</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.image.fileupload.service.AwsS3Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.image.fileupload.service.ImageUploadService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.RequiredArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.ResponseEntity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.multipart.MultipartFile</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>

<span class="nd">@Slf4j</span>
<span class="nd">@RestController</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/upload"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UploadController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ImageUploadService</span> <span class="n">awsS3Service</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">UploadController</span><span class="o">(</span><span class="nc">AwsS3Service</span> <span class="n">awsS3Service</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">awsS3Service</span> <span class="o">=</span> <span class="n">awsS3Service</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">saveImage</span><span class="o">(</span><span class="nd">@RequestParam</span> <span class="nc">MultipartFile</span> <span class="n">file</span><span class="o">){</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"multipartFile = {}"</span><span class="o">,</span> <span class="n">file</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="n">awsS3Service</span><span class="o">.</span><span class="na">StoreImage</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"url = {}"</span><span class="o">,</span><span class="n">url</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">url</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì‚¬ì´ì‚¬ì´ì— ë¡œê·¸ë¡œ ê°’ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ì°ì–´ë‘ì—ˆë‹¤. <br />
key = file / value = ì´ë¯¸ì§€ ë¡œ ë°›ì•„ì˜¤ëŠ” ë°©ë²•ì´ë‹¤.<br />
Springì—ì„œëŠ” MultipartFile í˜•ì‹ìœ¼ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤. <br />
ë¬¼ë¡  HttpServletReqeustì—ì„œë„ êº¼ë‚´ì˜¬ ìˆ˜ ìˆë‹¤.</p>

<p>ì—¬ê¸°ì„œ MutipartFile íƒ€ì…ìœ¼ë¡œ ë°›ì•„ì˜¨ file ê°ì²´ë¥¼ ë¡œê·¸ë¡œ ì°ì–´ë³´ë©´<br />
<code class="language-plaintext highlighter-rouge">StandardMultipartFile@57413913</code>ì™€ ê°™ì€ í˜•íƒœë¡œ ì˜¤ëŠ”ê²Œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><br /></p>

<p>ì´ì œ ì„œë¹„ìŠ¤ ë¡œì§ì„ ì‘ì„±í•´ë³´ì <br />
AWS S3 ì™¸ì— ë‹¤ë¥¸ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œì— <br />
ì¸í„°í˜ì´ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì—ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ImageUploadService</span> <span class="o">{</span>
	<span class="nc">String</span> <span class="nf">StoreImage</span><span class="o">(</span><span class="nc">MultipartFile</span> <span class="n">img</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„ì²´ë¡œ <br />
AwsS3Service í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Slf4j</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AwsS3Service</span> <span class="kd">implements</span> <span class="nc">ImageUploadService</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kd">final</span> <span class="nc">AmazonS3</span> <span class="n">amazonS3</span><span class="o">;</span>

	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${cloud.aws.s3.bucket}"</span><span class="o">)</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">bucketName</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nc">String</span> <span class="nf">StoreImage</span><span class="o">(</span><span class="nc">MultipartFile</span> <span class="n">file</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">validateFileExists</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
		<span class="nc">String</span> <span class="n">originalFilename</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getOriginalFilename</span><span class="o">();</span>
		<span class="nc">String</span> <span class="n">storeFileName</span> <span class="o">=</span> <span class="n">createStoreFileName</span><span class="o">(</span><span class="n">originalFilename</span><span class="o">);</span>

		<span class="k">try</span> <span class="o">(</span><span class="nc">InputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())</span> <span class="o">{</span>
			<span class="n">amazonS3</span><span class="o">.</span><span class="na">putObject</span><span class="o">(</span><span class="k">new</span> <span class="nc">PutObjectRequest</span><span class="o">(</span><span class="n">bucketName</span><span class="o">,</span> <span class="n">storeFileName</span><span class="o">,</span> <span class="n">inputStream</span><span class="o">,</span> <span class="kc">null</span><span class="o">)</span>
				<span class="o">.</span><span class="na">withCannedAcl</span><span class="o">(</span><span class="nc">CannedAccessControlList</span><span class="o">.</span><span class="na">PublicRead</span><span class="o">));</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">();</span>
		<span class="o">}</span>

		<span class="k">return</span> <span class="n">amazonS3</span><span class="o">.</span><span class="na">getUrl</span><span class="o">(</span><span class="n">bucketName</span><span class="o">,</span> <span class="n">storeFileName</span><span class="o">).</span><span class="na">toString</span><span class="o">();</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="kt">void</span> <span class="nf">validateFileExists</span><span class="o">(</span><span class="nc">MultipartFile</span> <span class="n">multipartFile</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">if</span> <span class="o">(</span><span class="n">multipartFile</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">createStoreFileName</span><span class="o">(</span><span class="nc">String</span> <span class="n">originalFilename</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">String</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">extractExt</span><span class="o">(</span><span class="n">originalFilename</span><span class="o">);</span>
		<span class="nc">String</span> <span class="n">uuid</span> <span class="o">=</span> <span class="no">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
		<span class="k">return</span> <span class="n">uuid</span> <span class="o">+</span> <span class="s">"."</span> <span class="o">+</span> <span class="n">ext</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">extractExt</span><span class="o">(</span><span class="nc">String</span> <span class="n">originalFilename</span><span class="o">)</span> <span class="o">{</span>
		<span class="kt">int</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">originalFilename</span><span class="o">.</span><span class="na">lastIndexOf</span><span class="o">(</span><span class="s">"."</span><span class="o">);</span>
		<span class="k">return</span> <span class="n">originalFilename</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">pos</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ì—¬ê¸°ì„œ AmazonS3 ë¥¼ DI ë°›ì•„ <code class="language-plaintext highlighter-rouge">.putObject();</code> ë©”ì„œë“œë¥¼ ì´ìš©í•´ <br />
AWS S3 ì €ì¥ì†Œì— ì €ì¥ì„í•  ìˆ˜ ìˆê²Œë˜ì–´ì§„ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">.putObject();</code>ì˜ ë§¤ê°œë³€ìˆ˜ë“¤ë¡œëŠ”<br />
(ë²„í‚· ì´ë¦„ê³¼, íŒŒì¼ì´ë¦„, MultipartFile inputsStream ê°ì²´, ObjectMetaData ê°ì²´)<br />
ë¥¼ ë„£ì–´ ì£¼ë©´ ì •ìƒì ìœ¼ë¡œ íŒŒì¼ì´ ì—…ë¡œë“œê°€ ë˜ì–´ì§ˆ ê²ƒì´ë‹¤.</p>

<p>ê·¸ë¦¬ê³  ì™¸ë¶€ì— ê³µê°œí•  ì´ë¯¸ì§€ì´ê¸° ë•Œë¬¸ì—<br />
<code class="language-plaintext highlighter-rouge">.withCannedAcl(CannedAccessControlList.PublicRead)</code>ë¥¼ ê±¸ì–´ì£¼ì—ˆë‹¤.</p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ì— íŒŒì¼ì´ë¦„ê°™ì€ ê²½ìš°ëŠ” <br />
ê¸°ì¡´ì— ë°›ì€ originalFilenameì„ UUIDë¥¼ ì´ìš©í•´ <br />
ì¢…ë³µë  í™•ë¥ ì´ ë§¤ìš° ë‚®ê²Œ íŒŒì¼ì´ë¦„ì„ ë³€ê²½í•´ì£¼ê³  ë§ˆì§€ë§‰ì—ëŠ”<br />
í™•ì¥ì ë°ì´í„°ë¥¼ ë½‘ì•„ ë¶™ì—¬ì£¼ê²Œ ë˜ì–´ íŒŒì¼ì´ë¦„ì„ ì™„ì„±ì‹œì¼œì£¼ì—ˆë‹¤.</p>

<p>ì˜ˆë¥¼ë“¤ìë©´ <code class="language-plaintext highlighter-rouge">e491b9f6-c528-4a47-bd5c-0381aad21ed5.png</code>ì™€ ê°™ì´ <br />
íŒŒì¼ì´ë¦„ì´ ë§Œë“¤ì–´ì§€ê²Œ ë˜ëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ì—¬ê¸°ê¹Œì§€ ì‘ì„±ì„ í—€ë‹¤ë©´ ì´ì œ í´ë¼ì´ì–¸íŠ¸ ìª½ì—ì„œ <br />
ì´ë¯¸ì§€ë¥¼ ë³´ë‚´ AWS S3ì— ì €ì¥ë˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p>í´ë¼ì´ì–¸íŠ¸ì„ SSR ë°©ì‹ìœ¼ë¡œ<br />
thymeleafë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212540211-2ec688c8-b5c4-4630-8b45-56f08ae246f9.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>í¬ìŠ¤íŠ¸ë§¨ì„ í†µí•´ì„œë„ ì „ì†¡ì´ ê°€ëŠ¥í•˜ë‹¤. <br />
multipart/form-data í˜•ì‹ìœ¼ë¡œ ì„¤ì •í•´ì¤€ë‹¤ìŒ. <br />
Bodyì— Key,Valueë¥¼ ì„¤ì •í•´ì£¼ë©´ëœë‹¤.</p>

<p>Keyê°’ ì„¤ì •ì‹œì—ëŠ” ì˜¤ë¥¸ìª½ì— Textê°€ì•„ë‹Œ Fileë¡œ ë³€ê²½í•´ì£¼ì–´ì•¼í•œë‹¤.<br />
ê·¸ëŸ¬ë©´ Valueì— ì´ë¯¸ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆëŠ” ì°½ì´ë‚˜ì˜¨ë‹¤. <br />
ì°½ì„ ëˆŒëŸ¬ í˜„ì¬ ë°ìŠ¤í¬íƒ‘ì—ì„œ ì˜¬ë¦´ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì¤€ë‹¤.</p>

<p>ê·¸ë¦¬ê³  APIë¥¼ ìš”ì²­ë³´ë‚´ê²Œ ëœë‹¤ë©´</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212540224-4a1655bc-b22f-4694-a948-dcb7d368e697.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë‚´ê°€ ì§€ì •í–ˆë˜ indiego-fileupload ë²„í‚·ì—<br />
profileimageë¼ëŠ” í´ë”ì— ë‚´ê°€ ì§€ì •í•œ í˜•ì‹ì˜ í´ë”ì´ë¦„ê³¼ í™•ì¥ìë¡œ <br />
ê°ì²´ê°€ ì˜¬ë¼ê°€ìˆëŠ” ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212540227-70c09e05-f781-4a21-9236-8f60b8872d04.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ê°ì²´ë¥¼ ëˆŒëŸ¬ ë“¤ì–´ê°€ë©´ ê°ì²´ URLì´ ë‚˜ì˜¤ê²Œë˜ëŠ”ë°<br />
í•´ë‹¹ URLì„ êº¼ë‚´ì„œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ì „ë‹¬í•˜ê³  ìš°ë¦¬ DBì— ì €ì¥í•˜ë©´ëœë‹¤.</p>

<p>êº¼ë‚´ëŠ” ì½”ë“œëŠ” ì´ë¯¸ ìœ„ì— ì‘ì„±ë˜ì–´ìˆë‹¤.<br />
<code class="language-plaintext highlighter-rouge">amazonS3.getUrl(bucketName, storeFileName).toString();</code> ì½”ë“œë¡œ <br />
<code class="language-plaintext highlighter-rouge">getUrl();</code> ë©”ì„œë“œë¥¼ ì´ìš©í•´ êº¼ë‚´ì˜¬ ìˆ˜ ìˆë‹¤. í•´ë‹¹ ê°’ì„ Stringìœ¼ë¡œ <br />
ë°˜í™˜í•´ì£¼ê³  í•´ë‹¹ê°’ì„ ì´ì œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ëª©ì ì— ë§ê²Œ ì‚¬ìš©í•˜ë©´ëœë‹¤.</p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” ë°˜í™˜í•œ URLì„ text/plainìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì—ˆê³ <br />
ìœ„ì— Postmanìœ¼ë¡œ ë³´ë©´ ì˜ ë°˜í™˜ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ê°€ìˆë‹¤.</p>

<p><br /></p>

<h3 id="-íŒŒì¼-ì‚¬ì´ì¦ˆ-ì˜ˆì™¸ì²˜ë¦¬">ğŸ“Œ íŒŒì¼ ì‚¬ì´ì¦ˆ ì˜ˆì™¸ì²˜ë¦¬</h3>

<p>ì²˜ìŒì— ì„¤ì •í–ˆë˜ yml íŒŒì¼ì— 10MBë¡œ<br />
ìš©ëŸ‰ì„ ì œí•œí•´ë‘ì—ˆì—ˆë‹¤.</p>

<p>ë§Œì•½ ì •ë§ë¡œ ì‚¬ì´ì¦ˆê°€ ë„˜ê²Œ ëœë‹¤ë©´</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>org.springframework.web.multipart.MaxUploadSizeExceededException: Maximum upload size exceeded<span class="p">;</span> nested exception is java.lang.IllegalStateException:
</code></pre></div></div>

<p>ì™€ ê°™ì€ ì˜ˆì™¸ê°€ ë°œìƒí•˜ê²Œ ë  ê²ƒì´ê³  <br />
í•´ë‹¹ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸°ìœ„í•´ì„œ ê°„ë‹¨í•œ ì˜ˆì™¸ì²˜ë¦¬ ë¡œì§ì„ êµ¬í˜„í•´ë³´ì•˜ë‹¤.</p>

<p>@ControllerAdviceë¥¼ ì´ìš©í•´ì„œ<br />
<code class="language-plaintext highlighter-rouge">MaxUploadSizeExceededException</code>ì˜ˆì™¸ë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ControllerAdvice</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span> <span class="o">{</span>

    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">protected</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">&gt;</span> <span class="nf">handleException</span><span class="o">(</span><span class="nc">MaxUploadSizeExceededException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"MaxUploadSizeExceededException"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"# ì˜ˆì™¸ì²˜ë¦¬ ì¡ìŒ"</span><span class="o">);</span>
        <span class="kd">final</span> <span class="nc">ErrorResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">internalServerError</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Getter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@JsonInclude</span><span class="o">(</span><span class="nc">JsonInclude</span><span class="o">.</span><span class="na">Include</span><span class="o">.</span><span class="na">NON_NULL</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorResponse</span> <span class="o">{</span>

	<span class="kd">private</span> <span class="kt">int</span> <span class="n">status</span><span class="o">;</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>

	<span class="kd">private</span> <span class="nf">ErrorResponse</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">,</span> <span class="kt">int</span> <span class="n">status</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">status</span> <span class="o">=</span> <span class="n">status</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="nc">ErrorResponse</span> <span class="nf">of</span><span class="o">(</span><span class="nc">MaxUploadSizeExceededException</span> <span class="n">maxUploadSizeExceededException</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">ErrorResponse</span><span class="o">(</span><span class="n">maxUploadSizeExceededException</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="mi">500</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>ErrorResponseì— ëŒ€í•œ ë‚´ìš©ì€ ìš°ì„  ëŒ€ê°• ì •ì˜í•´ë³´ì•˜ë‹¤. <br />
ì–´ë–»ê²Œ ë°˜í™˜í• ì§€ì—ëŒ€í•´ì„œëŠ” ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í†µí•´ì„œ <br />
ì…ë§›ì— ë§ê²Œ ë³€ê²½í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.</p>

<p><br />
<br /></p>

<p>âœ¨ ì°¸ê³  ë¸”ë¡œê·¸ <br />
<a href="https://antdev.tistory.com/93#recentEntries">AWS S3, FileUpload ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</a>, <a href="https://victorydntmd.tistory.com/334">FileUpload ê´€ë ¨ ì°¸ê³  ë¸”ë¡œê·¸ ë ˆí¼ëŸ°ìŠ¤</a></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="Spring" /><category term="Spring" /><category term="S3" /><summary type="html"><![CDATA[ì˜¤ëŠ˜ì€ AWS S3ì— íŒŒì¼ ì—…ë¡œë“œë¥¼ í•˜ëŠ” ì˜ˆì œë¥¼ ë‹¤ë¤„ë³´ë ¤í•œë‹¤.]]></summary></entry><entry><title type="html">Redis JWT Refresh Token ê´€ë¦¬ ë° ì¬ë°œí–‰</title><link href="http://localhost:4000/db/2023/01/14/db-redis.html" rel="alternate" type="text/html" title="Redis JWT Refresh Token ê´€ë¦¬ ë° ì¬ë°œí–‰" /><published>2023-01-14T00:00:00+09:00</published><updated>2023-01-14T00:00:00+09:00</updated><id>http://localhost:4000/db/2023/01/14/db-redis</id><content type="html" xml:base="http://localhost:4000/db/2023/01/14/db-redis.html"><![CDATA[<p>Redisì— ëŒ€í•œ ê°„ë‹¨í•œ CSì§€ì‹ê³¼ <br />
<a href="https://mycatlikeschuru.github.io/db/2023/01/08/db-redissetting.html">Redis ì„¤ì¹˜ ë° CLI ì‚¬ìš©ë²•</a>ì„ ì•Œì•„ë³´ì•˜ì—ˆë‹¤.</p>

<p>ì˜¤ëŠ˜ì€ ì´ì œ ë‚˜ì˜ ì‚¬ìš© ëª©ì ì¸ í”„ë¡œì íŠ¸ì— ë„ì…ì„ í•´ë³´ë ¤í•œë‹¤. <br />
JWT Refresh Tokenê´€ë¦¬ì™€ ì¢‹ì•„ìš”,ì¡°íšŒìˆ˜ ë“± <br />
ë¹ˆë²ˆíˆ updateê°€ ì¼ì–´ë‚˜ëŠ” í•­ëª©ì— ëŒ€í•´ì„œ ê´€ë¦¬í•˜ëŠ” ì°¨ì›ì—ì„œ <br />
ìºì‹œì„œë²„ì¸ Redisë¥¼ ì‚¬ìš©í•´ë³´ë ¤í•œë‹¤.</p>

<p>ê·¸ ì¤‘ì—ì„œë„ Redis ì‚¬ìš©ì— ëŒ€í•œ ì½”ë“œì™€<br />
JWT í† í°ì„ Redisì— ì–´ë–»ê²Œ ê´€ë¦¬í•˜ê³  ì¬ë°œê¸‰ë°›ëŠ”ì§€ì— ëŒ€í•´<br />
ì´ˆì ì„ ë‘ê³  ì‘ì„±í–ˆê¸°ì— ë§ì€ ì½”ë“œë“¤ì´ ìƒëµë˜ì–´ ìˆë‹¤ëŠ”ì  ì°¸ê³  ë¶€íƒë“œë¦°ë‹¤.</p>

<h3 id="-ì‘ì—…í™˜ê²½">âœ… ì‘ì—…í™˜ê²½</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Spring Boot 2.7.7
java 11 
macOS Ventura 13.1
ë¡œì»¬ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ ì§„í–‰
</code></pre></div></div>

<p><br /></p>

<h3 id="-redis-í”„ë¡œê·¸ë¨-ì‘ì„±">ğŸ“Œ Redis í”„ë¡œê·¸ë¨ ì‘ì„±</h3>

<p>Spring Bootì—ì„œëŠ” <code class="language-plaintext highlighter-rouge">Spring Data Redis</code>ë¥¼ ì´ìš©í•´<br />
Lettuce, Jedisë¼ëŠ” ë‘ê°€ì§€ ì˜¤í”ˆì†ŒìŠ¤ Java ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.<br />
LettuceëŠ” ë³„ë„ì˜ ì„¤ì •ì´ í•„ìš”ì—†ê³ , JedisëŠ” ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ì¤˜ì•¼í•œë‹¤.</p>

<p>Gradle ì˜ì¡´ì„±</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">data</span><span class="o">-</span><span class="n">redis</span><span class="err">'</span>
</code></pre></div></div>

<p>Spring data RedisëŠ” ë‘ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì„ ì œê³µí•˜ëŠ”ë°<br />
í•˜ë‚˜ëŠ” Redis Template, í•˜ë‚˜ëŠ” RedisRepositoryë¥¼ ì´ìš©í•œ ë°©ì‹ì´ë‹¤.   <br />
ì´ë²ˆì— ì‚¬ìš©í•´ë³¸ ë°©ë²•ì€ Redis Template ë°©ì‹ì´ê³ </p>

<p><code class="language-plaintext highlighter-rouge">RedisConnectionFactory</code> ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´<br />
<code class="language-plaintext highlighter-rouge">LettuceConnectionFactory</code> ìƒì„±í•˜ì—¬ ë°˜í™˜í•˜ëŠ” Beanì„ ë“±ë¡í•´ì•¼í•œë‹¤.</p>

<p><strong>1). RedisConfig í´ë˜ìŠ¤</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedisConfig</span> <span class="o">{</span>

	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${spring.redis.host}"</span><span class="o">)</span>
	<span class="kd">private</span> <span class="nc">String</span> <span class="n">host</span><span class="o">;</span>

	<span class="nd">@Value</span><span class="o">(</span><span class="s">"${spring.redis.port}"</span><span class="o">)</span>
	<span class="kd">private</span> <span class="kt">int</span> <span class="n">port</span><span class="o">;</span>

	<span class="nd">@Bean</span>
	<span class="kd">public</span> <span class="nc">RedisConnectionFactory</span> <span class="nf">redisConnectionFactory</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="k">new</span> <span class="nf">LettuceConnectionFactory</span><span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">port</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Bean</span>
	<span class="kd">public</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="nf">redisTemplate</span><span class="o">()</span> <span class="o">{</span>
		<span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RedisTemplate</span><span class="o">&lt;&gt;();</span>
		<span class="n">redisTemplate</span><span class="o">.</span><span class="na">setKeySerializer</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringRedisSerializer</span><span class="o">());</span>
		<span class="n">redisTemplate</span><span class="o">.</span><span class="na">setValueSerializer</span><span class="o">(</span><span class="k">new</span> <span class="nc">StringRedisSerializer</span><span class="o">());</span>
		<span class="n">redisTemplate</span><span class="o">.</span><span class="na">setConnectionFactory</span><span class="o">(</span><span class="n">redisConnectionFactory</span><span class="o">());</span>
		<span class="k">return</span> <span class="n">redisTemplate</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">LettuceConnectionFactory</code>ë¥¼ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ ë°˜í™˜í• ë•Œ<br />
host, port ì •ë³´ê°€ í•„ìš”í•˜ë‹¤.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">cache</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">redis</span>
  <span class="na">redis</span><span class="pi">:</span>
    <span class="na">host</span><span class="pi">:</span> <span class="s">localhost</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">6379</span>
</code></pre></div></div>

<p>ë¡œì»¬í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•  ê²ƒì´ê¸° ë•Œë¬¸ì—<br />
ymlíŒŒì¼ì— ì„¤ì •í•´ì£¼ê³  @Value ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ íŒŒì‹±í•˜ë„ë¡ í–ˆë‹¤.</p>

<p>ê·¸ë¦¬ê³  <code class="language-plaintext highlighter-rouge">setKeySerializer</code>,<code class="language-plaintext highlighter-rouge">setValueSerializer</code>ì™€ ê°™ì€<br />
<code class="language-plaintext highlighter-rouge">RedisTemplete</code>ê°ì²´ì— ì„¤ì •ì„ í•´ì£¼ëŠ” ì´ìœ ëŠ”</p>

<p>RedisTemplateë¥¼ ì‚¬ìš©í•  ë•Œ Spring - Redis ê°„ ë°ì´í„°<br />
ì§ë ¬í™”,ì—­ì§ë ¬í™” ì‹œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ JDK ì§ë ¬í™” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— <br />
ë¬¸ì œëŠ” ì—†ì§€ë§Œ redis-clië¥¼ í†µí•´ ì ‘ê·¼í• ë•Œ ì•Œì•„ë³¼ ìˆ˜ ì—†ëŠ” í˜•íƒœë¡œ ì¶œë ¥ë˜ê¸° ë•Œë¬¸ì— <br />
ì„¤ì •ì„ ì§„í–‰ í•´ì¤€ ê²ƒì´ë‹¤!</p>

<p><br /></p>

<p><strong>2). RedisDao í´ë˜ìŠ¤</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RedisDao</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">RedisDao</span><span class="o">(</span><span class="nc">RedisTemplate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">redisTemplate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">redisTemplate</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValues</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ValueOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">();</span>
        <span class="n">values</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValues</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span> <span class="n">data</span><span class="o">,</span> <span class="nc">Duration</span> <span class="n">duration</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ValueOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">();</span>
        <span class="n">values</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">data</span><span class="o">,</span> <span class="n">duration</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getValues</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ValueOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForValue</span><span class="o">();</span>
        <span class="k">return</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">values</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteValues</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">redisTemplate</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">expireValues</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="kt">int</span> <span class="n">timeout</span><span class="o">){</span>
        <span class="n">redisTemplate</span><span class="o">.</span><span class="na">expire</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">timeout</span> <span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHashOps</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">HashOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">();</span>
        <span class="n">values</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getHashOps</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span> <span class="n">hashKey</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">HashOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">values</span><span class="o">.</span><span class="na">hasKey</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">hashKey</span><span class="o">)</span> <span class="o">?</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span><span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">hashKey</span><span class="o">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nc">String</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteHashOps</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">String</span> <span class="n">hashKey</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">HashOperations</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">values</span> <span class="o">=</span> <span class="n">redisTemplate</span><span class="o">.</span><span class="na">opsForHash</span><span class="o">();</span>
        <span class="n">values</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">hashKey</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">validateValue</span><span class="o">(</span><span class="nc">String</span> <span class="n">value</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë‘ë²ˆì§¸ë¡œëŠ” <code class="language-plaintext highlighter-rouge">RedisDao</code>ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ <br />
ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë¹ˆìœ¼ë¡œ ë“±ë¡í•´<br />
DI ë°›ì•„ ì‚¬ìš©í•˜ë„ë¡ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ ë§Œë“¤ì–´ ì£¼ì—ˆë‹¤.</p>

<p>ì•ˆì— ë©”ì„œë“œ ë‚´ìš©ë“¤ì„ ë³´ë©´ <br />
ê¸°ë³¸ì ì¸ Key,Valueë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•, ê·¸ë¦¬ê³  Getí•˜ì—¬ ê°€ì ¸ì˜¤ê¸° <br />
ë˜í•œ ì†Œë©¸ ì‹œê°„ì„¤ì •(TTL)ì„ í•˜ì—¬ Keyë¥¼ ë§Œë“¤ê¸°</p>

<p>Hash ìë£Œêµ¬ì¡°ë¡œ Key,Value ë§Œë“¤ê¸° ì •ë„ ì½”ë“œë¥¼ ì¶”ê°€í•´ë‘ì—ˆë‹¤. <br />
JWTì‚¬ìš©í• ë• ê¸°ë³¸ì  Key,Valueë¡œ ì§„í–‰í•  ì˜ˆì •ì´ê³ <br />
ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ Hash êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ê¸°ë•Œë¬¸ì— ìš°ì„  ì¶”ê°€í•´ì¤¬ë‹¤.</p>

<p><br /></p>

<h3 id="-redisë¥¼-í†µí•œ-refresh-token-ê´€ë¦¬">ğŸ“Œ Redisë¥¼ í†µí•œ Refresh Token ê´€ë¦¬</h3>

<h4 id="redisë¥¼-ì´ìš©í•œ-jwt-í™œìš©">Redisë¥¼ ì´ìš©í•œ JWT í™œìš©</h4>

<p>ì´ëŸ¬í•œ ë°©ë²•ì´ ì •ë§ ìµœì„ ì¼ì§€? <br />
í™•ì‹¤í•˜ì§„ ì•Šë‹¤â€¦ ì—¬ëŸ¬ê°€ì§€ ë ˆí¼ëŸ°ìŠ¤ ë¸”ë¡œê·¸ë“¤ì„ ë³´ë©´ì„œ<br />
ì´ë²ˆì— í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ì ìš©í•´ë³¸ ì•„í‚¤í…ì²˜ë¥¼ ê·¸ë ¤ë³´ì•˜ë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212480772-df9dcb0d-241e-4301-97e7-688b64424717.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìˆœì„œë¥¼ ì‚´í´ ë³´ìë©´</p>

<p><strong>1). ë¡œê·¸ì¸ì‹œ JWT í† í°ì„ ë°œê¸‰ ë°›ëŠ”ë‹¤.</strong><br />
-&gt; AccessToken, RefreshTokenì„ ë°œê¸‰ ë°›ìŒ.</p>

<p><br /></p>

<p><strong>2). ë°œê¸‰ë°›ì€ í† í°ì„ Clientì— ì „ë‹¬ í•œë‹¤.</strong><br />
-&gt; Access Tokenì€ Headerì— <code class="language-plaintext highlighter-rouge">Authorization</code>ì— ë‹´ëŠ”ë‹¤.<br />
-&gt; Refresh Tokenì€ ì¿ í‚¤ì— ë‹´ì•„ ë³´ë‚´ì¤€ë‹¤.
ì „ë‹¬í•˜ê¸° ì „ì— ì„œë²„ì—ì„œëŠ” Refresh Tokenì„ Redis ìºì‹œì„œë²„ì— Key/Value <br />
í˜•íƒœë¡œ ì†Œë©¸ì‹œê°„ì„ ì§€ì •í•´ ì €ì¥í•œë‹¤. (ë‚˜ëŠ” 2ì¼ ì •ë„ë¡œ í•´ë‘ì—ˆë‹¤)</p>

<p>â—ï¸<strong>ìƒê°í•´ë³¼ ë§Œí•œ ë‚´ìš©ë“¤</strong><br />
ì—¬ê¸°ì„œ ìƒê°í•´ë³´ë©´ ì¢‹ì€ ì ì´. Refresh Tokenì„ í´ë¼ì´ì–¸íŠ¸ì— ë³´ë‚´ëŠ” ê²ƒì´<br />
ì •ë§ ìµœì‹ ì¸ê°€? ë¼ëŠ” ìƒê°ì´ ë“ ë‹¤. ì´ë¶€ë¶„ì— ëŒ€í•´ ê³ ë¯¼ì„ ë§ì´í•´ë´¤ê³  ë§ì´ ì°¾ì•„ë³´ì•˜ì§€ë§Œ<br />
ê²°ë¡ ì ìœ¼ë¡œ ë‚´ê°€ ë‚´ë¦° ìƒê°ì€ í•´ë‹¹ Refresh Tokenì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ<br />
ë³´ë‚´ì£¼ì§€ ì•Šìœ¼ë©´ Access Tokenìœ¼ë¡œë§Œ ì¬ë°œê¸‰ì´ ì´ë£¨ì–´ì§€ê²Œë˜ëŠ”ë°<br />
Access Tokenì„ íƒˆì·¨ë‹¹í•  ê²½ìš° Redisì— ìˆëŠ” Refresh Tokenìœ¼ë¡œ ì¬ë°œê¸‰ì´ ê°€ëŠ¥í•´ì§€ë‹ˆ<br />
ìœ„í—˜í•´ ì§ˆ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì— ì´ë¥´ëŸ¿ê³ , ì·¨ì•½ì ì´ ì¡´ì¬í•˜ì§€ë§Œ ìµœì†Œí•œ ì¿ í‚¤ë¡œ ë‹´ì•„ ë³´ë‚´ <br />
HttpOnly ì˜µì…˜ìœ¼ë¡œ XSS(Cross-Site Scripting) ê³µê²©ì„ ë§‰ì„ ìˆ˜ê¸°ì— ë³´ë‚´ì£¼ê¸°ë¡œ ê²°ì •í–ˆë‹¤.</p>

<p><br /></p>

<p><strong>3). API ìš”ì²­í• ë•Œ ì¸ì¦ì„ ìœ„í•œ Access Tokenì„ ë‹´ì•„ ìš”ì²­í•œë‹¤.</strong><br />
-&gt; ì •ìƒì ìœ¼ë¡œ ì¸ì¦ì´ ì™„ë£Œë˜ë©´ í•´ë‹¹ APIë¥¼ ìˆ˜í–‰í•œë‹¤.<br />
-&gt; ë§Œì•½ Access Tokenì´ ë§Œë£Œë˜ì—ˆë‹¤ë©´? ì„œë²„ì—ì„œëŠ” ë§Œë£Œë˜ì—ˆë‹¤ê³  <br />
í´ë¼ì´ì–¸íŠ¸ì¸¡ì— ì•Œë ¤ì¤€ë‹¤. (ë‚˜ì™€ ê°™ì€ê²½ìš°ëŠ” í† í°ì´ ë§Œë£Œë˜ì—ˆë‹¤ê³  JSONì„ ì‘ë‹µí•´ì¤Œ)</p>

<p><br /></p>

<p><strong>4). ë§Œë£Œì‘ë‹µì„ ë°›ì€ í´ë¼ì´ì–¸íŠ¸ëŠ” Access Token ì¬ë°œí–‰ APIë¥¼ ìš”ì²­í•œë‹¤.</strong><br />
-&gt; Access Tokenê³¼ Refresh Tokenì„ í—¤ë”ì— ë‹´ì•„ì„œ Access Token ì¬ë°œê¸‰ì„ ìš”ì²­í•œë‹¤.<br />
-&gt; ì¬ë°œê¸‰ ìš”ì²­ì„ ë°›ì€ ì„œë²„ëŠ” Refresh Tokenì„ Redisì—ì„œ ì°¾ëŠ”ë‹¤. <br />
-&gt; ë§Œì•½ Redis ìºì‹œì„œë²„ì•ˆì— Refresh Tokenì´ ì†Œë©¸ë˜ì§€ ì•Šì•˜ë‹¤ë©´<br />
Access Token ì¬ë°œê¸‰ ì‹œí€€ìŠ¤ë¥¼ ì§„í–‰í•œë‹¤.<br />
-&gt; ë§Œì•½ Refresh Tokenì´ ì†Œë©¸ë˜ì—ˆë‹¤ë©´, ì˜ˆì™¸ì²˜ë¦¬í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë ¤ì¤€ë‹¤.<br />
(ì´í›„ ë¡œê·¸ì•„ì›ƒì„ í•˜ë“  ë‹¤ìŒ ì•¡ì…˜ì€ í´ë¼ì´ì–¸íŠ¸ìª½ì— ë§¡ê¸´ë‹¤.)</p>

<p><br /></p>

<h4 id="jwt-redis-ì €ì¥-ì¬ë°œí–‰-ì½”ë“œ">JWT Redis ì €ì¥, ì¬ë°œí–‰ ì½”ë“œ</h4>

<p>ìœ„ì™€ ê°™ì€ í”Œë¡œìš°ë¡œ ì¼ë‹¨ ì •ë¦¬ë¥¼ í•˜ì˜€ë‹¤. <br />
í•´ë‹¹ ë¡œì§ êµ¬í˜„ì€ ì•„ë˜ì—ì„œ ì‚´í´ë³´ì.<br />
ëª¨ë“  ë¡œì§ì„ ì ì–´ë‘ì§„ ì•Šì„ ê²ƒì´ê³ , ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ëŠ”<br />
ë¶€ë¶„ì˜ í´ë˜ìŠ¤ ë‚´ìš©ë“¤ë§Œ ì ì–´ë³¼ ì˜ˆì •ì´ë‹¤.</p>

<p><strong>1). ë¡œê·¸ì¸ì‹œ JWT í† í° ë°œê¸‰, Redisì— ì €ì¥</strong></p>

<p><strong>JwtAuthenticationFilter í´ë˜ìŠ¤</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JwtAuthenticationFilter</span> <span class="kd">extends</span> <span class="nc">UsernamePasswordAuthenticationFilter</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AuthenticationManager</span> <span class="n">authenticationManager</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">TokenProvider</span> <span class="n">tokenProvider</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RedisDao</span> <span class="n">redisDao</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">JwtAuthenticationFilter</span><span class="o">(</span><span class="nc">AuthenticationManager</span> <span class="n">authenticationManager</span><span class="o">,</span> <span class="nc">TokenProvider</span> <span class="n">tokenProvider</span><span class="o">,</span> <span class="nc">RedisDao</span> <span class="n">redisDao</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authenticationManager</span> <span class="o">=</span> <span class="n">authenticationManager</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">tokenProvider</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">redisDao</span> <span class="o">=</span> <span class="n">redisDao</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="nd">@SneakyThrows</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Authentication</span> <span class="nf">attemptAuthentication</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ObjectMapper</span> <span class="n">objectMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectMapper</span><span class="o">();</span>

        <span class="nc">LoginDto</span> <span class="n">loginDto</span> <span class="o">=</span> <span class="n">objectMapper</span><span class="o">.</span><span class="na">readValue</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(),</span> <span class="nc">LoginDto</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// ServletInputSteamì„ LoginDto í´ë˜ìŠ¤ ê°ì²´ë¡œ ì—­ì§ë ¬í™” (ì¦‰, JSON ê°ì²´êº¼ëƒ„)</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"# attemptAuthentication : loginDto.getEmail={}, login.getPassword={}"</span><span class="o">,</span><span class="n">loginDto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span><span class="n">loginDto</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span>

        <span class="nc">UsernamePasswordAuthenticationToken</span> <span class="n">authenticationToken</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">UsernamePasswordAuthenticationToken</span><span class="o">(</span><span class="n">loginDto</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">loginDto</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">authenticationManager</span><span class="o">.</span><span class="na">authenticate</span><span class="o">(</span><span class="n">authenticationToken</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">successfulAuthentication</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">,</span> <span class="nc">FilterChain</span> <span class="n">chain</span><span class="o">,</span> <span class="nc">Authentication</span> <span class="n">authResult</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>

        <span class="nc">AuthMember</span> <span class="n">authMember</span> <span class="o">=</span> <span class="o">(</span><span class="nc">AuthMember</span><span class="o">)</span> <span class="n">authResult</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">();</span>
        <span class="nc">TokenDto</span> <span class="n">tokenDto</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">generateTokenDto</span><span class="o">(</span><span class="n">authMember</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">tokenDto</span><span class="o">.</span><span class="na">getAccessToken</span><span class="o">();</span> <span class="c1">// accessToken ë§Œë“¤ê¸°</span>
        <span class="nc">String</span> <span class="n">refreshToken</span> <span class="o">=</span> <span class="n">tokenDto</span><span class="o">.</span><span class="na">getRefreshToken</span><span class="o">();</span> <span class="c1">// refreshToken ë§Œë“¤ê¸°</span>

        <span class="n">tokenProvider</span><span class="o">.</span><span class="na">accessTokenSetHeader</span><span class="o">(</span><span class="n">accessToken</span><span class="o">,</span><span class="n">response</span><span class="o">);</span> <span class="c1">// AccessToken Header response ìƒì„±</span>
        <span class="c1">//tokenProvider.refreshTokenSetHeader(refreshToken,response); // RefreshToken Header response ìƒì„±</span>
        <span class="n">tokenProvider</span><span class="o">.</span><span class="na">refreshTokenSetCookie</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">,</span><span class="n">response</span><span class="o">);</span> <span class="c1">// RefreshToken Cookieë¡œ ì„¤ì •</span>
        <span class="nc">Responder</span><span class="o">.</span><span class="na">loginSuccessResponse</span><span class="o">(</span><span class="n">response</span><span class="o">,</span><span class="n">authMember</span><span class="o">);</span> <span class="c1">// login ì™„ë£Œì‹œ Response ì‘ë‹µ ë§Œë“¤ê¸°</span>

        <span class="c1">// ë¡œê·¸ì¸ ì„±ê³µì‹œ Refresh Token Redis ì €ì¥ ( key = Refresh Token / value = Access Token )</span>
        <span class="kt">int</span> <span class="n">refreshTokenExpirationMinutes</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">getRefreshTokenExpirationMinutes</span><span class="o">();</span>
        <span class="n">redisDao</span><span class="o">.</span><span class="na">setValues</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">,</span><span class="n">accessToken</span><span class="o">,</span> <span class="nc">Duration</span><span class="o">.</span><span class="na">ofMinutes</span><span class="o">(</span><span class="n">refreshTokenExpirationMinutes</span><span class="o">));</span>

        <span class="k">this</span><span class="o">.</span><span class="na">getSuccessHandler</span><span class="o">().</span><span class="na">onAuthenticationSuccess</span><span class="o">(</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">,</span><span class="n">authResult</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">UsernamePasswordAuthenticationFilter</code>ë¥¼ ìƒì†ë°›ì•„<br />
êµ¬í˜„í•œ <code class="language-plaintext highlighter-rouge">JwtAuthenticationFilter</code> í•„í„° í´ë˜ìŠ¤ì´ë‹¤. Spring Securityì—<br />
FilterChainì— ì„¤ì •í•´ë‘ì–´ ë¡œê·¸ì¸ ìš”ì²­ì‹œ í•´ë‹¹ í•„í„°ë¥¼ ê±°ì¹˜ê²Œëœë‹¤.</p>

<p>ì—¬ê¸°ì„œ ì¤‘ì ì ìœ¼ë¡œ ë´ì•¼í•  ì½”ë“œëŠ”<br />
<code class="language-plaintext highlighter-rouge">successfulAuthentication</code>ë©”ì„œë“œ ë¶€ë¶„ì´ë‹¤.<br />
<code class="language-plaintext highlighter-rouge">UsernamePasswordAuthenticationFilter</code> í•„í„°ì—ì„œëŠ” <br />
ì¸ì¦ëœ ê°ì²´ë¥¼ <code class="language-plaintext highlighter-rouge">Security Context Holder</code>ì— ì €ì¥í•´ì£¼ëŠ” ì—­í• ì„í•œë‹¤.</p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ëŠ” í•´ë‹¹ í•„í„°ë¥¼ Overrideí•˜ì˜€ê¸° ë•Œë¬¸ì—<br />
<code class="language-plaintext highlighter-rouge">Security Context Holder</code>ì— ê°ì²´ì €ì¥í•˜ëŠ”ê±´ <code class="language-plaintext highlighter-rouge">JwtVerificationFilter</code>ë¼ëŠ”<br />
ì¸ì¦í•„í„°ë¥¼ ë§Œë“¤ì–´ ì²˜ë¦¬í•´ì£¼ì—ˆê³ , í˜„ì¬ ìœ„ì— ì˜¬ë ¤ë‘” í•„í„°í´ë˜ìŠ¤ì—ì„œëŠ”<br />
JWT ë°œí–‰ê³¼ <code class="language-plaintext highlighter-rouge">redisDao.setValues()</code>ë©”ì„œë“œë¥¼ í†µí•´ Redisì—</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Key : refreshToken  
Value : accessToken  
ì†Œë©¸ì‹œê°„ : 2ì¼
</code></pre></div></div>
<p>ë¡œ ì €ì¥ì„ í•´ì£¼ê²Œ ë˜ì—ˆë‹¤. ìœ„ í”Œë¡œìš°ì—ì„œ ì–˜ê¸°í–ˆë˜ 1),2)ë²ˆì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©ì´ë‹¤.<br />
ì´ë ‡ê²Œ í•„í„° êµ¬í˜„ ë¶€ë¶„ì—ì„œ JWTë¥¼ ë°œí–‰í•´ Redisì— ì €ì¥í•´ì£¼ê²Œ ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<p><strong>2). Token ë§Œë£Œì‹œ JWT ì¬ë°œí–‰</strong></p>

<p>ìœ„ì—ì„œ ë¡œê·¸ì¸ì‹œ í† í° ë°œê¸‰ê¹Œì§€ í•´ì£¼ì—ˆê³   <br />
í´ë¼ì´ì–¸íŠ¸ì—ì„œ Access Tokenì„ í—¤ë”ì— ë‹´ì•„ ì–´ë–¤<br />
APIë¥¼ ìš”ì²­í•˜ì˜€ì„ë•Œ, í† í°ì´ ë§Œë£Œë˜ì—ˆë‹¤ê³  ì„œë²„ì—ì„œ í™•ì¸í•´ì„œ ì•Œë ¤ì£¼ë©´<br />
ì¬ë°œí–‰ APIë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚´ê¸°ë¡œ í–ˆì—ˆë‹¤.</p>

<p>â—ï¸ Access Token ë§Œë£Œí™•ì¸ ì½”ë“œëŠ” ë„ˆë¬´ ë§ê¸°ë•Œë¬¸ì— ìƒëµí•©ë‹ˆë‹¤.<br />
í•„ìëŠ” <code class="language-plaintext highlighter-rouge">JwtAuthenticationFilter</code> í•„í„°í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ <code class="language-plaintext highlighter-rouge">OncePerRequestFilter</code>ë¥¼<br />
ìƒì†ë°›ì•„ APIìš”ì²­ì‹œ <code class="language-plaintext highlighter-rouge">doFilterInternal</code>ë¥¼ Overrideë°›ì•„ êµ¬í˜„í•´ í•´ë‹¹ í•„í„°ì—ì„œ <br />
JWT í•´ë…ì„í•˜ê³ , ì •ìƒì ìœ¼ë¡œ í•´ë…í•˜ë©´ APIê°€ ì‹¤í–‰ë  ê²ƒì´ê³ , í† í°ì— ë¬¸ì œê°€ ìˆê±°ë‚˜ ë§Œë£Œê°€ë˜ì—ˆìœ¼ë©´<br />
ì˜ˆì™¸ì²˜ë¦¬í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— JSONì„ ë§Œë“¤ì–´ Bodyì— ë˜ì ¸ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>

<p><br /></p>

<p><strong>MemberController í´ë˜ìŠ¤</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Slf4j</span>
<span class="nd">@RestController</span>
<span class="nd">@Validated</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/members"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberController</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MemberService</span> <span class="n">memberService</span><span class="o">;</span>

    <span class="o">...</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/reissue"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span> <span class="nf">reissue</span><span class="o">(</span><span class="nd">@CookieValue</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"refreshToken"</span><span class="o">,</span> <span class="n">required</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span> <span class="nc">String</span> <span class="n">refreshToken</span><span class="o">,</span>
                                  <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
                                  <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">){</span>

        <span class="n">memberService</span><span class="o">.</span><span class="na">reissueAccessToken</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">,</span><span class="n">request</span><span class="o">,</span><span class="n">response</span><span class="o">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ResponseEntity</span><span class="o">(</span><span class="s">"Refresh Token ì¬ë°œê¸‰ ì™„ë£Œ!"</span><span class="o">,</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">CREATED</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>ì¬ë°œí–‰ì„ ì‹¤í–‰í•´ì£¼ëŠ” APIì´ë‹¤. í•´ë‹¹ APIëŠ”<br />
ìœ„ì—ì„œ ì–˜ê¸°í–ˆë˜ <code class="language-plaintext highlighter-rouge">JwtAuthenticationFilter</code>ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•Šê²Œ<br />
<code class="language-plaintext highlighter-rouge">shouldNotFilter</code>ë¥¼ êµ¬í˜„í•´ ì²˜ë¦¬í•´ì¤„ ìˆ˜ ìˆë‹¤. <br />
ê·¸ë ‡ê²Œë˜ë©´ AccessTokenì´ ë§Œë£Œë˜ì—ˆë”ë¼ë„, í•´ë‹¹ APIëŠ” ì‹¤í–‰ì´ ëœë‹¤.<br />
í•´ë‹¹ ë¡œì§ì€ API ìš”ì²­ë¶€ë¶„ì´ê³ , ì´ì œ ì¤‘ìš”í•œ Serviceë¡œì§ì„ í™•ì¸í•´ë³´ì</p>

<p><br /></p>

<p><strong>MemberSerivce í´ë˜ìŠ¤</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="nd">@Slf4j</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CustomBeanUtils</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">beanUtils</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">CustomAuthorityUtils</span> <span class="n">authorityUtils</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">TokenProvider</span> <span class="n">tokenProvider</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">RedisDao</span> <span class="n">redisDao</span><span class="o">;</span>

    <span class="o">...</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">reissueAccessToken</span><span class="o">(</span><span class="nc">String</span> <span class="n">refreshToken</span><span class="o">,</span> <span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">){</span>

        <span class="k">if</span><span class="o">(</span><span class="n">refreshToken</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span><span class="o">.</span><span class="na">COOKIE_REFRESH_TOKEN_NOT_FOUND</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nc">String</span> <span class="n">accessToken</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">resolveToken</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">redisAccessToken</span> <span class="o">=</span> <span class="n">redisDao</span><span class="o">.</span><span class="na">getValues</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">);</span>

        <span class="c1">// Refresh Tokenì´ Redisì— ì¡´ì¬í•  ê²½ìš° Access Token ìƒì„±</span>
        <span class="k">if</span><span class="o">(</span><span class="n">redisDao</span><span class="o">.</span><span class="na">validateValue</span><span class="o">(</span><span class="n">redisAccessToken</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">accessToken</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">redisAccessToken</span><span class="o">)){</span>
            <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"# RefreshTokenì„ í†µí•œ AccessToken ì¬ë°œê¸‰ ì‹œì‘"</span><span class="o">);</span>
            <span class="nc">Claims</span> <span class="n">claims</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">parseClaims</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">);</span> <span class="c1">// Refresh Token ë³µí˜¸í™”</span>
            <span class="nc">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">claims</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"sub"</span><span class="o">,</span> <span class="nc">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// Refresh Tokenì—ì„œ emailì •ë³´ ê°€ì ¸ì˜¤ê¸°</span>
            <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="n">findVerifiedMember</span><span class="o">(</span><span class="n">email</span><span class="o">);</span> <span class="c1">// DBì—ì„œ ì‚¬ìš©ì ì •ë³´ ì°¾ê¸°</span>
            <span class="nc">AuthMember</span> <span class="n">authMember</span> <span class="o">=</span> <span class="nc">AuthMember</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">member</span><span class="o">.</span><span class="na">getRoles</span><span class="o">());</span>
            <span class="nc">TokenDto</span> <span class="n">tokenDto</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">generateTokenDto</span><span class="o">(</span><span class="n">authMember</span><span class="o">);</span> <span class="c1">// Token ë§Œë“¤ê¸°</span>
            <span class="kt">int</span> <span class="n">refreshTokenExpirationMinutes</span> <span class="o">=</span> <span class="n">tokenProvider</span><span class="o">.</span><span class="na">getRefreshTokenExpirationMinutes</span><span class="o">();</span>
            <span class="n">redisDao</span><span class="o">.</span><span class="na">setValues</span><span class="o">(</span><span class="n">refreshToken</span><span class="o">,</span> <span class="n">tokenDto</span><span class="o">.</span><span class="na">getAccessToken</span><span class="o">(),</span> <span class="nc">Duration</span><span class="o">.</span><span class="na">ofMinutes</span><span class="o">(</span><span class="n">refreshTokenExpirationMinutes</span><span class="o">));</span>
            <span class="n">tokenProvider</span><span class="o">.</span><span class="na">accessTokenSetHeader</span><span class="o">(</span><span class="n">tokenDto</span><span class="o">.</span><span class="na">getAccessToken</span><span class="o">(),</span><span class="n">response</span><span class="o">);</span>

        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span><span class="o">(!</span><span class="n">redisDao</span><span class="o">.</span><span class="na">validateValue</span><span class="o">(</span><span class="n">redisAccessToken</span><span class="o">)){</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span><span class="o">.</span><span class="na">REFRESH_TOKEN_NOT_FOUND</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span><span class="o">.</span><span class="na">TOKEN_IS_NOT_SAME</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë¡œì§ë“¤ì€ ì§€ìš°ê³  í‘œí˜„í•´ë‘ì—ˆë‹¤. <br />
<code class="language-plaintext highlighter-rouge">reissueAccessToken</code>ë©”ì„œë“œë¼ëŠ” ë¶€ë¶„ì„ ë§Œë“¤ì–´ ê²€ì¦ ë¡œì§ì„ ì‘ì„±í–ˆë‹¤.</p>

<p>ì²«ë²ˆì§¸ë¡œëŠ” ì¿ í‚¤ì— RefreshTokenì´ ì œëŒ€ë¡œ ë‹´ê²¨ì™”ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.</p>

<p>ê·¸ë¦¬ê³ ëŠ” ì´ì œ í—¤ë”ì— ë‹´ê¸´ AccessTokenì„ êº¼ë‚´ê³ <br />
ì¿ í‚¤ë¡œ ì „ë‹¬ë°›ì€ RefreshTokenìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">redisDao.getValues</code>ë©”ì„œë“œë¥¼ ì´ìš©í•´<br />
Redisì—ì„œ AccessTokenì„ êº¼ë‚¸ë‹¤. <em><strong>(key=refreshToken, value=accessTokenìœ¼ë¡œ ì €ì¥í–ˆìœ¼ë‹ˆê¹Œ!)</strong></em></p>

<p>ì´ì œ <code class="language-plaintext highlighter-rouge">if(redisDao.validateValue(redisAccessToken) &amp;&amp; accessToken.equals(redisAccessToken))</code><br />
ë¹„êµë¬¸ì„ í†µí•´ ì´ ë‘ê°œì˜ AccessTokenì„ ë¹„êµí•´ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ <br />
ë§Œì•½ êº¼ë‚´ì™”ì„ë•Œ ì†Œë©¸ì´ ëœ ìƒíƒœë¼ë©´ <code class="language-plaintext highlighter-rouge">redisDao.validateValue(redisAccessToken)</code>ì—<br />
nullê°’ì´ ì°í˜€ìˆê²Œë˜ì–´ ë‘˜ ì¤‘í•˜ë‚˜ë¼ë„ ì¡°ê±´ì´ ë§Œì¡±í•˜ì§€ ëª»í•˜ë©´ ì˜ˆì™¸ì²˜ë¦¬ê°€ ë  ê²ƒì´ë‹¤.</p>

<p>ì¦‰! Refresh Tokenì´ ì¡´ì¬í•˜ê³ (ì†Œë©¸ë˜ì§€ ì•Šê³ )<br />
í•´ë‹¹ Refresh Tokenì— ë§¤ì¹­ë˜ëŠ” Access Tokenì„ ë“¤ê³ ì™”ì„ë•Œë§Œ<br />
Access Tokenì„ ì¬ë°œí–‰ í•œë‹¤ìŒì— ë‹¤ì‹œ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡í•´ì¤€ë‹¤ëŠ” ì„œë¹„ìŠ¤ ë¡œì§ì´ë‹¤.</p>

<p><br /></p>

<h3 id="-ì •ë¦¬">ğŸ“Œ ì •ë¦¬</h3>

<p>ì´ë ‡ê²Œ ì—¬ëŸ¬ê°€ì§€ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì°¾ì•„ë³´ë©´ì„œ <br />
ìš°ì„  ë‚´ê°€ ìƒê°í•˜ëŠ”ëŒ€ë¡œ ì •ë¦¬í•˜ì—¬ ì˜¬ë ¤ë³´ì•˜ë‹¤. <br />
ì´ ë°©ë²•ì´ í‹€ë¦´ìˆ˜ë„ ìˆê³ , ì–´ëŠì •ë„ íƒ€í˜‘ì´ ë  ìˆ˜ë„ ìˆë‹¤ê³  ìƒê°í•œë‹¤.</p>

<p>ì•ìœ¼ë¡œë„ í† í°ì„ ì‚¬ìš©í•œë‹¤ë©´ ë³´ì•ˆì— ëŒ€í•´ ì¢€ë” ê¹Šê²Œ ê³µë¶€ë¥¼ í•´ë´ì•¼í•  ê²ƒ ê°™ë‹¤.<br />
ë˜í•œ, ì´ ê¸€ì˜ ë³¸ëª©ì ì€ ì½”ë“œë¥¼ ì „ë¶€ ë¦¬ë·°í•œë‹¤ê¸° ë³´ë‹¤ëŠ”</p>

<p>ì–´ë– í•œ íë¦„ìœ¼ë¡œ ì‘ì—…ì„ í–ˆëŠ”ì§€ì™€ Redisë¥¼ ì´ìš©í•˜ì—¬<br />
í† í°ì„ ë¹„êµí•˜ëŠ” ë¶€ë¶„ì— ì´ˆì ì„ ë‘ê³  ì‘ì„±í–ˆê¸°ì— <br />
Spring Securityì— ëŒ€í•œ ë‚´ìš©ì„ ì–´ëŠì •ë„ ì„ ìˆ˜ì§€ì‹ìœ¼ë¡œ ê°€ì§€ê³  ìˆì–´ì•¼í•˜ê¸°ì—<br />
ì¡°ê¸ˆ ë¶ˆì¹œì ˆí•œ ì„¤ëª…ì´ ë  ìˆ˜ë„ ìˆì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ë“ ë‹¤.</p>

<p>ê·¸ë˜ë„ ì°¸ê³ ì°¨ ì˜¬ë ¤ë³´ê³ <br />
ë‚´ê³µë¶€ë¥¼ ìœ„í•œ ê¸°ë¡ì´ê¸°ë„í•˜ì—¬ ì •ë¦¬í•´ë³´ì•˜ë‹¤ ğŸ“š</p>

<p><br />
<br /></p>

<p>âœ¨ ì°¸ê³  ë¸”ë¡œê·¸
<a href="https://hudi.blog/refresh-token-in-spring-boot-with-redis/">Redis Jpa ì‚¬ìš© ë ˆí¼ëŸ°ìŠ¤</a>, <a href="https://wildeveloperetrain.tistory.com/32">Redis ì‚¬ìš©ë°©ë²• 2ê°€ì§€ ë ˆí¼ëŸ°ìŠ¤</a></p>

<p><br />
<br /></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="DB" /><category term="DB" /><category term="redis" /><summary type="html"><![CDATA[Redisì— ëŒ€í•œ ê°„ë‹¨í•œ CSì§€ì‹ê³¼ Redis ì„¤ì¹˜ ë° CLI ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì•˜ì—ˆë‹¤.]]></summary></entry><entry><title type="html">Git ì´ì „ Commit Message ìˆ˜ì •í•˜ê¸°</title><link href="http://localhost:4000/git/2023/01/12/git-commitmessage.html" rel="alternate" type="text/html" title="Git ì´ì „ Commit Message ìˆ˜ì •í•˜ê¸°" /><published>2023-01-12T00:00:00+09:00</published><updated>2023-01-12T00:00:00+09:00</updated><id>http://localhost:4000/git/2023/01/12/git-commitmessage</id><content type="html" xml:base="http://localhost:4000/git/2023/01/12/git-commitmessage.html"><![CDATA[<h3 id="-clië¡œ-ë³€ê²½">ğŸ“Œ CLIë¡œ ë³€ê²½</h3>

<p>ë§Œì•½ ì´ì „ì— ì»¤ë°‹ë©”ì„¸ì§€ë¥¼ ì‹¤ìˆ˜ë¡œ ì˜ëª» ì˜¬ë ¸ë‹¤ê³ í•  ê²½ìš°</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase <span class="nt">-i</span> HEAD~3        
</code></pre></div></div>
<p>ë¥¼ ì…ë ¥í•´ì„œ ì»¤ë°‹ë©”ì„¸ì§€ê°€ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤. <br />
<code class="language-plaintext highlighter-rouge">~3</code>ì€ ê°€ì¥ìµœì‹ ë¶€í„° ìˆ˜ì •í•˜ê³ ìí•˜ëŠ” ì»¤ë°‹ ìˆ˜ëŸ‰ì´ë‹¤</p>

<p>Pickì´ë¼ê³  ë˜ì–´ìˆëŠ” ë¶€ë¶„ì„ rewordë¡œ ë³€ê²½í•œ ë‹¤ìŒ <br />
ì»¤ë°‹ë©”ì„¸ì§€ë¥¼ ìˆ˜ì •í•´ì£¼ë©´ ë°˜ì˜ëœë‹¤.</p>

<p><br /></p>

<h3 id="-intellijë¡œ-ë³€ê²½">ğŸ“Œ IntelliJë¡œ ë³€ê²½</h3>

<p>IDEë¥¼ ì‚¬ìš©í•˜ë©´ vi,nano í¸ì§‘ê¸°ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒë³´ë‹¤<br />
í›¨ì”¬ ìˆ˜ì›”í•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆë‹¤.</p>

<p>í•˜ë‹¨ì˜ Git íƒ­ì—ì„œ ì»¤ë°‹ë©”ì„¸ì§€ë¥¼ ë³€ê²½í•˜ê³ ìí•˜ëŠ”<br />
ì»¤ë°‹ì„ ëˆŒëŸ¬ ì˜¤ë¥¸ìª½ í´ë¦­ì„í•˜ì</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212041524-5d07ce20-07d1-4299-96e0-866fc2857dfb.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><code class="language-plaintext highlighter-rouge">Interactively Rebase from Here</code>ë¥¼ ëˆŒëŸ¬ì£¼ì</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212041533-03319280-6850-4b08-8cfe-f8918c7013d8.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ê·¸ëŸ¬ë©´ Rebasing Commits íŒì—…ì´ ë…¸ì¶œë˜ëŠ”ë° <br />
ì›í•˜ëŠ” ì»¤ë°‹ ë©”ì‹œì§€ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•œ ë‹¤ìŒì—</p>

<p>START REBASINGì„ ëˆŒëŸ¬ì£¼ë©´ <br />
ë³€ê²½ëœ ì»¤ë°‹ ë©”ì„¸ì§€ë¡œ ë°˜ì˜ëœ ëª¨ìŠµì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br />
<br />
<br /></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="GIT" /><category term="GIT" /><category term="GITHUB" /><summary type="html"><![CDATA[ğŸ“Œ CLIë¡œ ë³€ê²½]]></summary></entry><entry><title type="html">Git Cherry-Pickìœ¼ë¡œ Commit ì˜®ê¸°ê¸°</title><link href="http://localhost:4000/git/2023/01/12/git-cherrypick.html" rel="alternate" type="text/html" title="Git Cherry-Pickìœ¼ë¡œ Commit ì˜®ê¸°ê¸°" /><published>2023-01-12T00:00:00+09:00</published><updated>2023-01-12T00:00:00+09:00</updated><id>http://localhost:4000/git/2023/01/12/git-cherrypick</id><content type="html" xml:base="http://localhost:4000/git/2023/01/12/git-cherrypick.html"><![CDATA[<h3 id="-cherry-pick">ğŸ“Œ Cherry-Pick</h3>

<p>ì‘ì—…ì„ í•˜ë˜ì¤‘ ë‹¤ë¥¸ ë¸Œëœì¹˜ì— Commitì„ í•´ë²„ë ¸ë‹¤â€¦</p>

<p><strong>íŒ€ì› ëª¨ë‘ê°€ ê°œë°œ ì¤‘ì¸ ë¸Œëœì¹˜</strong> : <code class="language-plaintext highlighter-rouge">develop</code><br />
<strong>í˜„ì¬ ë‚´ê°€ ê°œë°œí•˜ëŠ” ë¸Œëœì¹˜</strong> : <code class="language-plaintext highlighter-rouge">feat/BE/ljh</code></p>

<p>ì´ë ‡ê²Œ ë‘ê°€ì§€ë¡œ ìš´ì˜ì¤‘ì´ì—ˆë‹¤.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212029237-9092798b-deca-43ea-8a8d-d99591ca7963.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì‚¬ì§„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´â€¦ <code class="language-plaintext highlighter-rouge">develop</code> ë¸Œëœì¹˜ì— ì»¤ë°‹ì„ ë‘ê°œë‚˜ í•´ë²„ë¦°ìƒí™©<br />
#14, #3 ìœ¼ë¡œëœ ì œëª©ì˜ ì»¤ë°‹ì´ë‹¤..<br />
<code class="language-plaintext highlighter-rouge">feat/BE/ljh</code>  ë¸Œëœì¹˜ë¡œ ì»¤ë°‹ì„ ì˜®ê²¨ì•¼í•˜ëŠ” ìƒí™©ì´ë‹¤.</p>

<p>í•´ë‹¹ ì»¤ë°‹ì„ ë³µì‚¬í•´ì„œ ì˜®ê¸¸ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ Cherry-Pickì´ë‹¤.<br />
ë³¸ê²©ì ìœ¼ë¡œ ì‚¬ìš©ë²•ì„ ì•Œì•„ë³´ì</p>

<p><br /></p>

<h3 id="-commit-hash-ê°’">ğŸ“Œ Commit Hash ê°’</h3>

<p>ì²«ë²ˆì§¸ë¡œ ë‚´ê°€ ì˜ëª»ì˜¬ë¦´ ì»¤ë°‹ì˜ í•´ì‰¬ê°’ì„ ì•Œì•„ì•¼í•œë‹¤.</p>

<p>ë‚´ê°€ ì»¤ë°‹ì„ ì˜ëª»ì˜¬ë¦° ë¸Œëœì¹˜(<code class="language-plaintext highlighter-rouge">develop</code>)ì—ì„œ<br />
<code class="language-plaintext highlighter-rouge">git log</code>ë¥¼ ì…ë ¥í•´ ì»¤ë°‹ì˜ í•´ì‰¬ê°’ì„ ì•Œ ìˆ˜ ìˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>commit 7525f9a220700884994e53e90babc345d199e10e <span class="o">(</span>HEAD -&gt; develop<span class="o">)</span>
Author: Lee JaeHyeok &lt;dhfif718@gmail.com&gt;
Date:   Thu Jan 12 18:02:48 2023 +0900

    <span class="c">#14 - Responseder, TokenPrvider ì—­í•  ì¶”ê°€</span>
    
    1. ë¡œê·¸ì¸ ì‹œ ì‘ë‹µ ê°€ëŠ¥í•˜ë„ë¡ Responder ì¶”ê°€
    2. JWT ê´€ë ¨ ì˜ˆì™¸ë°œìƒì‹œ Json ê°ì²´ë¡œ ë°˜í™˜ì•ˆë˜ëŠ” ë¬¸ì œ ìˆ˜ì •
    3. HttpServletRequest ê°ì²´ë¡œ AccessToken ê°€ì ¸ì˜¤ë„ë¡ TokenProviderì—ê²Œ ì—­í•  ì´ì „
       <span class="o">(</span>ì¶”í›„ RefreshTokenìœ¼ë¡œ AccessToken ë°œê¸‰ì‹œ í†µì¼ì„±ìˆê²Œ ì‚¬ìš©ì„ ìœ„í•¨<span class="o">)</span>


commit cd49c93bd4905f6d1f4a19d8438ab4c4d6b6d15b
Author: Lee JaeHyeok &lt;dhfif718@gmail.com&gt;
Date:   Thu Jan 12 17:58:46 2023 +0900

    <span class="c">#3 - LoginResponseDto ì¶”ê°€</span>
    
    1. ë¡œê·¸ì¸ ì‹œ ì‘ë‹µ ê°€ëŠ¥í•˜ë„ë¡ ResponseDto ì¶”ê°€

</code></pre></div></div>

<p>ë‚˜ëŠ” ì´ 2ê°œì˜ ì»¤ë°‹ì„ í–ˆê³ <br />
ì²«ë²ˆì§¸ ì»¤ë°‹ì€ <code class="language-plaintext highlighter-rouge">7525f9a220700884994e53e90babc345d199e10e</code>ë¡œ<br />
<code class="language-plaintext highlighter-rouge">7525f9a</code>ì™€ ê°™ì´ 7ìë¦¬ë¡œ í‘œí˜„í•  ìˆ˜ë„ ìˆë‹¤.</p>

<p>ë‘ë²ˆì§¸ ì»¤ë°‹ì€ <code class="language-plaintext highlighter-rouge">cd49c93bd4905f6d1f4a19d8438ab4c4d6b6d15b</code>ì´ë‹¤.</p>

<p>ì´ ë‘ê°€ì§€ ì»¤ë°‹ì„ ì´ì œ <code class="language-plaintext highlighter-rouge">feat/BE/ljh</code>ë¼ëŠ”<br />
ë¸Œëœì¹˜ë¡œ ì˜®ê¸°ê³  ì‹¶ì€ ìƒí™©ì´ë‹¤.</p>

<p><br /></p>

<h3 id="-cherry-pick-ì‚¬ìš©í•˜ì—¬-ì»¤ë°‹-ì˜®ê¸°ê¸°">ğŸ“Œ Cherry-Pick ì‚¬ìš©í•˜ì—¬ ì»¤ë°‹ ì˜®ê¸°ê¸°</h3>

<p>ë¨¼ì € ë¸Œëœì¹˜ ì²´í¬ì•„ì›ƒì„ ì§„í–‰í•˜ì.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout feat/BE/ljh
</code></pre></div></div>

<p><br /></p>

<p>ì´ì œ í•˜ë‚˜ì”© Cherry-Pick ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì˜®ê²¨ë³´ì</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git cherry-pick cd49c93bd4905f6d1f4a19d8438ab4c4d6b6d15b
</code></pre></div></div>
<p>ë¥¼ ì…ë ¥í•´ì£¼ë©´ë˜ê³ , ë§Œì•½ ì‹¤í–‰í•˜ì˜€ì„ë•Œ ì •ìƒì ìœ¼ë¡œ <br />
ì™„ë£Œê°€ë˜ë©´ ì´ìƒì´ ì—†ê² ì§€ë§Œ, í˜¹ì‹œë‚˜</p>

<p>ì•„ë˜ì™€ ê°™ì´ conflictê°€ ë°œìƒí•˜ê²Œ ë  ìˆ˜ ìˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Auto-merging server/src/main/java/codestates/frogroup/indiego/domain/member/entity/dto/MemberDto.java
CONFLICT <span class="o">(</span>content<span class="o">)</span>: Merge conflict <span class="k">in </span>server/src/main/java/codestates/frogroup/indiego/domain/member/entity/dto/MemberDto.java
error: could not apply cd49c93... <span class="c">#3 - LoginResponseDto ì¶”ê°€</span>
hint: After resolving the conflicts, mark them with
hint: <span class="s2">"git add/rm &lt;pathspec&gt;"</span>, <span class="k">then </span>run
hint: <span class="s2">"git cherry-pick --continue"</span><span class="nb">.</span>
hint: You can instead skip this commit with <span class="s2">"git cherry-pick --skip"</span><span class="nb">.</span>
hint: To abort and get back to the state before <span class="s2">"git cherry-pick"</span>,
hint: run <span class="s2">"git cherry-pick --abort"</span><span class="nb">.</span>
</code></pre></div></div>
<p>hint ì•ˆë‚´ì— ë”°ë¼ ì§„í–‰í• ìˆ˜ê°€ ìˆë‹¤. <br />
ìš°ì„  CONFLICTê°€ ë°œìƒí•œ ë¶€ë¶„ì„ ë¡œê·¸ë¡œ ì•Œë ¤ì¤€ë‹¤.<br />
ë‚˜ì™€ ê°™ì€ ê²½ìš°ëŠ” <code class="language-plaintext highlighter-rouge">MemberDto</code> ì¶©ëŒì´ ë‚˜ì™”ë‹¤ê³  ìœ„ì— ë‚˜ì™€ìˆë‹¤.</p>

<p>í•´ë‹¹ í´ë˜ìŠ¤ë¡œ ê°€ë©´ ì¸í…”ë¦¬ì œì´ì—ì„œ ì¶©ëŒë‚œ ë¶€ë¶„ì„ í‘œì‹œí•´ì¤€ë‹¤. <br />
ì¶©ëŒë‚œ ë¶€ë¶„ì„ ì½”ë“œë¥¼ ìˆ˜ì •í•´ ìš°ì„  í•´ê²°í•´ì£¼ê³ <br />
<code class="language-plaintext highlighter-rouge">git add .</code>ë¥¼ ì§„í–‰í›„ <code class="language-plaintext highlighter-rouge">git cherry-pick --continue</code>ë¥¼ ì§„í–‰í•˜ë©´ëœë‹¤.<br />
ë§ˆì¹˜ rebaseí•˜ëŠ” ê³¼ì •ê³¼ ë§¤ìš° í¡ì‚¬í•˜ë‹¤.</p>

<p>ì¶©ëŒë¶€ë¶„ì´ ì „ë¶€ í•´ê²°ë˜ì—ˆìœ¼ë©´ nanoí¸ì§‘ê¸°ë¡œ ì €ì¥í• ê±´ì§€ë¥¼ ë¬¼ì–´ë³¸ë‹¤.<br />
ctrl + s, ctrl + x ë¥¼ ëˆŒëŸ¬ì¤˜ ì €ì¥ì„í•´ì¤€ë‹¤.</p>

<p><br /></p>

<p>ì™„ë£Œë¥¼ í–ˆë‹¤ë©´.. <code class="language-plaintext highlighter-rouge">git log</code>ë¥¼ ì…ë ¥í•˜ë©´ <br />
<code class="language-plaintext highlighter-rouge">develop</code>ë¸Œëœì¹˜ì— ìˆë˜ ì»¤ë°‹ì´ <code class="language-plaintext highlighter-rouge">feat/BE/ljh</code>ë¡œ ë³µì‚¬ëœ ê²ƒì„ <br />
ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤ !!!!!</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>commit a5d3ef8d6110d838c896ba3125c351eb5b611623 <span class="o">(</span>HEAD -&gt; feat/BE/ljh<span class="o">)</span>
Author: Lee JaeHyeok &lt;dhfif718@gmail.com&gt;
Date:   Thu Jan 12 17:58:46 2023 +0900

    1. ë¡œê·¸ì¸ ì‹œ ì‘ë‹µ ê°€ëŠ¥í•˜ë„ë¡ ResponseDto ì¶”ê°€

</code></pre></div></div>

<p>í•´ì‰¬ê°’ì„ ë³´ì•„í•˜ë‹ˆ ë³µì‚¬ë³´ë‹¤ëŠ” ìƒˆë¡œ ë§Œë“¤ì–´ì§„ ëŠë‚Œì´ë‹¤. <br />
ì´ë ‡ê²Œ ì˜®ê¸°ë ¤ê³ í•˜ëŠ” ì»¤ë°‹ì„ ëª¨ë‘ ì˜®ê¸°ë©´ ëœë‹¤.</p>

<p><br /></p>

<h3 id="-ì˜ëª»ì˜¬ë¦°-ì»¤ë°‹-ì‚­ì œ">ğŸ“Œ ì˜ëª»ì˜¬ë¦° ì»¤ë°‹ ì‚­ì œ</h3>

<p><code class="language-plaintext highlighter-rouge">develop</code> ë¸Œëœì¹˜ì— ì˜ëª»ì˜¬ë¦° ì»¤ë°‹ì„ ì‚­ì œí•´ì¤˜ì•¼í•œë‹¤. <br />
Cherry-Pickì„ í–ˆë‹¤ê³  ìë™ìœ¼ë¡œ ì‚­ì œê°€ë˜ì§„ ì•ŠëŠ”ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">develop</code> ë¸Œëœì¹˜ë¡œ ì²´í¬ì•„ì›ƒì„í•˜ì—¬</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reset HEAD^
</code></pre></div></div>

<p>ë¥¼ ì…ë ¥í•˜ë©´ ê°€ì¥ ìµœê·¼ì¸ HEADì˜ ì»¤ë°‹ì´ ì‚­ì œë˜ì–´ì§„ë‹¤.</p>

<p>í˜¹ì‹œë‚˜ ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´<br />
í•˜ë‹¨ì— Gitì— ë“¤ì–´ê°€ì„œ</p>

<p><img src="https://user-images.githubusercontent.com/95069395/212040809-3a14a459-78b8-42a4-9558-b42c83cd9f30.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì‚­ì œí•˜ë ¤ê³  í•˜ëŠ” ì»¤ë°‹ì— ì˜¤ë¥¸ìª½ ë§ˆìš°ìŠ¤ë¥¼ í´ë¦­í•´<br />
Drop Commitì„ ëˆŒëŸ¬ì£¼ë©´ ëœë‹¤.</p>

<p><br />
<br />
<br /></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="GIT" /><category term="GIT" /><category term="GITHUB" /><summary type="html"><![CDATA[ğŸ“Œ Cherry-Pick]]></summary></entry><entry><title type="html">Redis CLI ì„¤ì¹˜ ë° ì‚¬ìš©ë°©ë²•</title><link href="http://localhost:4000/db/2023/01/08/db-redissetting.html" rel="alternate" type="text/html" title="Redis CLI ì„¤ì¹˜ ë° ì‚¬ìš©ë°©ë²•" /><published>2023-01-08T00:00:00+09:00</published><updated>2023-01-08T00:00:00+09:00</updated><id>http://localhost:4000/db/2023/01/08/db-redissetting</id><content type="html" xml:base="http://localhost:4000/db/2023/01/08/db-redissetting.html"><![CDATA[<p><strong>Redis</strong>ëŠ” <strong>Remote Dictionary Server</strong>ì˜ ì•½ìë¡œ <br />
<code class="language-plaintext highlighter-rouge">key:value</code>ë¡œ ê°’ì„ ì €ì¥í•˜ëŠ” NoSQLì´ë‹¤. <br />
ì¸-ë©”ëª¨ë¦¬(In-Memory) ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë©”ëª¨ë¦¬ì— ë°ì´í„°ê°€ ì €ì¥ëœë‹¤..</p>

<p><img src="https://user-images.githubusercontent.com/95069395/211693910-59b5da13-847e-4313-aed9-ce48a76c7434.png" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë¹„ê´€ê³„í˜• ë°ì´í„° ë² ì´ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œ(DBMS)ì´ë©°<br />
ìºì‹œì„œë²„ë¡œ ë§ì´ ì´ìš©ëœë‹¤.  <br />
ìºì‹œëŠ” í•œë²ˆ ì½ì–´ì˜¨ ë°ì´í„°ë¥¼ ì„ì˜ì˜ ê³µê°„ì— ì €ì¥í•˜ì—¬<br />
ë‹¤ìŒì— ì½ì„ ë•ŒëŠ” ë¹ ë¥´ê²Œ ê²°ê³¼ê°’ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê³µê°„ì´ë‹¤.</p>

<p><br /></p>

<p>í•™ìŠµì˜ ëª©ì ì€ JWT Refresh Token ê´€ë¦¬ ëª©ì ê³¼<br />
ì¢‹ì•„ìš”,í˜¹ì€ ì¡°íšŒìˆ˜ ê°™ì€ ìì£¼ ì—…ë°ì´íŠ¸ê°€ ì¼ì–´ë‚˜ëŠ” ë°ì´í„°ë¥¼<br />
RDBMSì—ì„œ ê³„ì† ì¿¼ë¦¬ë¥¼ ë‚ ë¦¬ê³  ì‹¶ì§€ ì•Šê¸°ë•Œë¬¸ì´ì˜€ë‹¤.</p>

<p>ë³¸ê²©ì ìœ¼ë¡œ ì•Œì•„ë³´ê¸°ì „ì— CLIë¥¼ í†µí•´ ì„¤ì¹˜ì™€ ê¸°ë³¸ì ì¸ ëª…ë ¹ì–´ë¥¼ ìµí˜€ë³´ì</p>

<p><br /></p>

<h3 id="-redis-ì„¤ì¹˜">ğŸ“Œ Redis ì„¤ì¹˜</h3>

<p>ë§¥ì„ ì‚¬ìš©í•˜ëŠ” ìœ ì €ë¼ë©´ brewë¥¼ ì‚¬ìš©í•  í…ë°</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>redis
</code></pre></div></div>
<p>ë¥¼ ì…ë ¥í•˜ë©´ redis ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><br /></p>

<h3 id="-redis-ì‹œì‘-ì¢…ë£Œ">ğŸ“Œ Redis ì‹œì‘, ì¢…ë£Œ</h3>

<p>ê¸°ë³¸ ì ì¸ redis ì‹œì‘ ëª…ë ì–´ì´ë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew services start redis
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">==&gt; Successfully started redis (label: homebrew.mxcl.redis)</code><br />
ì™€ ê°™ì´ í‘œí˜„ë˜ë©´ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ëœ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<p>ì‹œì‘ì´ì™„ë£Œë˜ê³  ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>redis-cli
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">127.0.0.1:6379&gt;</code>ê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">localhost:6379</code>ë¡œ<br />
ì ‘ì†ë˜ì—ˆë‹¤ëŠ” í‘œì‹œê°€ ë‚˜ì˜¬ ê±°ë‹¤.</p>

<p><br /></p>

<p>redis ì¢…ë£Œ, ì¬ì‹œì‘ ëª…ë ì–´ì´ë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew services stop redis
</code></pre></div></div>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew services restart redis
</code></pre></div></div>

<p>nginx, httpd ë“± ì‹œì‘ëª…ë ¹ì–´ê°€ ë¹„ìŠ·í•˜ê³  ìµìˆ™í•  ê²ƒì´ë‹¤.</p>

<p><br /></p>

<h3 id="-redis-crud">ğŸ“Œ Redis CRUD</h3>

<p><strong>1). í˜„ì¬ì˜ í‚¤ê°’ì„ í™•ì¸</strong></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; keys <span class="k">*</span>
</code></pre></div></div>

<p><br /></p>

<p><strong>2). key / value í˜•íƒœë¡œ ì €ì¥ (í•œê°œë§Œ)</strong></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; <span class="nb">set test </span>a
</code></pre></div></div>
<p>test : key ê°’ì´ëœë‹¤.<br />
a : value ê°’ì´ëœë‹¤.<br />
ì¦‰ testë¼ëŠ” í‚¤ì˜ aë¼ëŠ” valueë¡œ ì €ì¥!</p>

<p><br /></p>

<p><strong>3). key / value í˜•íƒœë¡œ ì €ì¥ (ì—¬ëŸ¬ê°œ í•œë²ˆì—)</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; mset test1 a test2 b
</code></pre></div></div>
<p>ì™€ ê°™ì´ ì…ë ¥í•˜ê²Œ ë  ê²½ìš°, test1,test2 ë¼ëŠ” í‚¤ê°€ ìƒê¸°ê³ <br />
a,bë¼ëŠ” valueê°€ ìƒê¸´ë‹¤.</p>

<p><br /></p>

<p><strong>4). keyì˜ valueë¥¼ ì¡°íšŒ</strong></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; get <span class="nb">test</span>
</code></pre></div></div>
<p>testë¼ëŠ” í‚¤ì˜ valueë¥¼ ì¡°íšŒí•œë‹¤. <br />
ìœ„ì—ì„œ aë¡œ ì§€ì •í–ˆìœ¼ë‹ˆ aë¡œ ì¶œë ¥ëœë‹¤.</p>

<p><br /></p>

<p><strong>5). ì†Œë©¸ì‹œê°„ ì§€ì •í•´ì„œ ì €ì¥í•˜ê¸°</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; setex <span class="nb">test </span>10 a
</code></pre></div></div>
<p>ì™€ ê°™ì´ ì§€ì •í•˜ê²Œ ë  ê²½ìš°, testë¼ëŠ” í‚¤ê°’ì€<br />
10ì´ˆë™ì•ˆë§Œ ì¡´ì¬í•˜ê²Œ ëœë‹¤.<br />
10ì´ˆí›„ì— ìë™ìœ¼ë¡œ ì†Œë©¸ë˜ë©° ì¡°íšŒë¥¼í•´ë„ ì°¾ì„ ìˆ˜ ì—†ë‹¤.</p>

<p><br /></p>

<p><strong>6). í‚¤ì™€ ê°’ ì‚­ì œí•˜ê¸°</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; del <span class="nb">test</span>
</code></pre></div></div>
<p>í‚¤ê°’ì„ ì…ë ¥í•´ ë§Œë“¤ì–´ë‘” í‚¤ë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë‹¤. <br />
ì‚­ì œê°€ ì™„ë£Œë˜ë©´ <code class="language-plaintext highlighter-rouge">(integer) 1</code>ì™€ ê°™ì´ í‘œì‹œëœë‹¤.</p>

<p><br /></p>

<p><strong>7). ëª¨ë“  í‚¤ì™€ ê°’ ì‚­ì œí•˜ê¸°</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; flushall
</code></pre></div></div>
<p>ëª¨ë“  í‚¤ì™€ ê°’ì„ ì‚­ì œí•´ì£¼ëŠ” ëª…ë ¹ì–´ë‹¤</p>

<p><br /></p>

<p><strong>8). í‚¤ì˜ ì†Œë©¸ ì‹œê°„ í™•ì¸í•˜ê¸°</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; ttl <span class="nb">test</span>
</code></pre></div></div>
<p>ttl ë‹¤ìŒì— í‚¤ê°’ì„ ì…ë ¥í•˜ë©´ í˜„ì¬ ë‚¨ì€ ì‹œê°„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. <br />
ì´ˆë‹¨ìœ„ë¡œ í‘œì‹œë˜ë©°, ê³„ì† ì…ë ¥í•˜ë©´ ì´ˆê°€ ì¤„ì–´ë“œëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<h3 id="-redis-ì—¬ëŸ¬ê°œì˜-í•„ë“œ">ğŸ“Œ Redis ì—¬ëŸ¬ê°œì˜ í•„ë“œ</h3>

<p>redisì˜ hashes ìë£Œêµ¬ì¡°ì—ëŠ”<br />
Keyì™€ Field ìš©ì–´ê°€ ë‚˜ì˜¨ë‹¤.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hash Key1
     á„‚ Hash Sub Key1 (=Field1)
     á„‚ Hash Sub Key2 (=Field2)
</code></pre></div></div>
<p>ì™€ ê°™ì€ êµ¬ì¡°ë¡œ í•˜ë‚˜ì˜ Keyê°’ì— ì—¬ëŸ¬ê°€ì§€<br />
Fieldë¥¼ ì €ì¥ì„ í• ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p><strong>1). í•˜ë‚˜ì˜ í‚¤ë¡œ ì—¬ëŸ¬ê°œ í•„ë“œ ì €ì¥</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; hset dhfif718@naver.com token <span class="s2">"value1"</span> like <span class="s2">"10"</span>
</code></pre></div></div>
<p>HSET ëª…ë ¹ì–´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.</p>

<p>dhfif718@naver.com ë¼ëŠ” Keyê°’ì—</p>

<p>key : token / value : value1<br />
key : like / value : 10<br />
ì´ë¼ëŠ” í•„ë“œë¡œ ì €ì¥ì´ ë˜ì–´ì§„ ê²ƒì´ë‹¤.</p>

<p>ì–´ë–»ê²Œ ë³´ë©´ dhfif718@naver.com Keyì˜ í•„ë“œëŠ” tokenê³¼ likeê°€ ë˜ëŠ” ì…ˆì´ë‹¤.</p>

<p><br /></p>

<p><strong>2). ì¡°íšŒí•˜ëŠ” ë°©ë²•</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; hget dhfif718@naver.com like
</code></pre></div></div>

<p>ì¡°íšŒë¥¼í• ë•Œ ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì¡°íšŒí•˜ê²Œë˜ë©´<br />
10ì´ë¼ëŠ” ê°’ì´ ì¶œë ¥ë˜ê²Œ ë˜ì–´ì§„ë‹¤.</p>

<p>ë§Œì•½ ì „ì²´ í•„ë“œë¥¼ ì¡°íšŒí•˜ê³  ì‹¶ë‹¤ë©´</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; hgetall dhfif718@naver.com
</code></pre></div></div>
<p>hgetallì„ keyê°’ê³¼ ì…ë ¥í•˜ë©´ ì „ì²´ ì¡°íšŒê°€ ëœë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1<span class="o">)</span> <span class="s2">"token"</span>
2<span class="o">)</span> <span class="s2">"value1"</span>
3<span class="o">)</span> <span class="s2">"like"</span>
4<span class="o">)</span> <span class="s2">"10"</span>
</code></pre></div></div>
<p>ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì¶œë ¥ë˜ì–´ì§„ë‹¤.</p>

<p><br /></p>

<p><strong>3). ì‚­ì œí•˜ëŠ” ë°©ë²•</strong></p>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚­ì œí•˜ëŠ” ë°©ë²•ì´ë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1:6379&gt; hdel dhfif718@naver.com token like
</code></pre></div></div>

<p>ì—¬ëŸ¬ê°œì˜ í•„ë“œë¥¼ í•œë²ˆì— ì‚­ì œí•  ìˆ˜ë„ ìˆê³ <br />
í•˜ë‚˜ì”© ì§€ì •í•´ì„œ ì‚­ì œí•  ìˆ˜ë„ ìˆë‹¤.</p>

<p><br /><br />
<br /></p>

<p>âœ¨ ì°¸ê³  ë¸”ë¡œê·¸ <br />
<a href="https://freeblogger.tistory.com/10">Redis ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ 1</a>, <a href="https://wlswoo.tistory.com/44">Redis ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ 2</a>, <a href="https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=wideeyed&amp;logNo=221428664697">Redis Hash ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</a>, <a href="https://server-talk.tistory.com/472">Redis ìš°ë¶„íˆ¬ ì„¤ì¹˜ ë ˆí¼ëŸ°ìŠ¤</a></p>

<p><br />
<br /></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="DB" /><category term="DB" /><category term="redis" /><summary type="html"><![CDATA[RedisëŠ” Remote Dictionary Serverì˜ ì•½ìë¡œ key:valueë¡œ ê°’ì„ ì €ì¥í•˜ëŠ” NoSQLì´ë‹¤. ì¸-ë©”ëª¨ë¦¬(In-Memory) ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë©”ëª¨ë¦¬ì— ë°ì´í„°ê°€ ì €ì¥ëœë‹¤..]]></summary></entry><entry><title type="html">Jekyll Github IO ë¸”ë¡œê·¸ ì½”ë“œ í•˜ì´ë¼ì´íŠ¸</title><link href="http://localhost:4000/jekyll/2023/01/02/it-jekyll-codehighlight.html" rel="alternate" type="text/html" title="Jekyll Github IO ë¸”ë¡œê·¸ ì½”ë“œ í•˜ì´ë¼ì´íŠ¸" /><published>2023-01-02T00:00:00+09:00</published><updated>2023-01-02T00:00:00+09:00</updated><id>http://localhost:4000/jekyll/2023/01/02/it-jekyll-codehighlight</id><content type="html" xml:base="http://localhost:4000/jekyll/2023/01/02/it-jekyll-codehighlight.html"><![CDATA[<p>í˜„ì¬ ë‚´ê°€ ìš´ì˜ì¤‘ì¸ Github.io ë¸”ë¡œê·¸ì˜<br />
í…Œë§ˆëŠ” YAT ì´ë¼ëŠ” í…Œë§ˆì´ë‹¤.</p>

<p>ì´ì „ì— <a href="https://mycatlikeschuru.github.io/jekyll/2022/10/22/it-jekyll-comment&amp;favicon.html">YAT í…Œë§ˆ ëŒ“ê¸€ ê¸°ëŠ¥, íŒŒë¹„ì½˜ ì¶”ê°€</a>í•˜ëŠ” ë°©ë²•ê¹Œì§€ ì•Œì•„ë³´ì•˜ë‹¤.<br />
ì´ì œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” Code Highlight(ì½”ë“œ í•˜ì´ë¼ì´íŠ¸) <br />
ë³€ê²½í•˜ëŠ” ë²•ì„ ì•Œì•„ë³´ë ¤í•œë‹¤.</p>

<p><br /></p>

<h3 id="jekyll-ì½”ë“œ-í•˜ì´ë¼ì´íŠ¸-ì ìš©">Jekyll ì½”ë“œ í•˜ì´ë¼ì´íŠ¸ ì ìš©</h3>

<p>ì½”ë“œ í•˜ì´ë¼ì´íŠ¸ ì ìš©ì€ ë§¤ìš° ê°„ë‹¨í•˜ë‹¤.</p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” <a href="https://highlightjs.org/static/demo/">highlight.js demo</a> ì‚¬ì´íŠ¸ì—ì„œ <br />
ë§ˆìŒì— ë“œëŠ” ì½”ë“œí•˜ì´ë¼ì´íŠ¸ì˜ ì´ë¦„ë§Œ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>_includes -&gt; extensions -&gt; comments -&gt; code-highlight.html
</code></pre></div></div>
<p>í•´ë‹¹ ê²½ë¡œì˜ <code class="language-plaintext highlighter-rouge">code-highlight.html</code> íŒŒì¼ì—ì„œ</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/atom-one-dark.min.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div>
<p>link íƒœê·¸ ë§¨ëì— <code class="language-plaintext highlighter-rouge">atom-one-dark.min.css</code>ë¡œ ë˜ì–´ìˆëŠ” ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤. <br />
ê¸°ì¡´ì—ëŠ” <code class="language-plaintext highlighter-rouge">deault.min.css</code>ë¡œ ë˜ì–´ìˆì„ í…ë°, ì´ë¶€ë¶„ì„ ìœ„ ì‚¬ì´íŠ¸ì—ì„œ<br />
ë§ˆìŒì— ë“œëŠ” ì½”ë“œ í•˜ì´ë¼ì´íŠ¸ ì´ë¦„ìœ¼ë¡œ ê°€ì ¸ì™€ ì£¼ë©´ëœë‹¤.</p>

<p>ë‹¤ë§Œ ì£¼ì˜í• ì ì€ ë„ì–´ì“°ê¸°ê°€ ë˜ì–´ìˆëŠëŠ ë¶€ë¶„ì€<br />
<code class="language-plaintext highlighter-rouge">-</code>ë¥¼ ë¶™ì—¬ì„œ ì²˜ë¦¬í•´ì£¼ë©´ ëœë‹¤.</p>

<p>í˜¹ì‹œë‚˜ ë²„ì „ì—ë”°ë¼ ì ìš©ì´ ì•ˆë˜ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ<br />
ì˜ í™•ì¸í•´ì„œ ì ìš©í•´ë³´ì !!</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="Jekyll" /><category term="Jekyll" /><category term="yat" /><category term="í…Œë§ˆì ìš©" /><category term="GitHub Pages" /><summary type="html"><![CDATA[í˜„ì¬ ë‚´ê°€ ìš´ì˜ì¤‘ì¸ Github.io ë¸”ë¡œê·¸ì˜ í…Œë§ˆëŠ” YAT ì´ë¼ëŠ” í…Œë§ˆì´ë‹¤.]]></summary></entry><entry><title type="html">Oracle Cloud Ubuntu 22.04 1GB ë¨ ì„±ëŠ¥ ê°œì„ </title><link href="http://localhost:4000/db/2023/01/01/db-oraclesetting.html" rel="alternate" type="text/html" title="Oracle Cloud Ubuntu 22.04 1GB ë¨ ì„±ëŠ¥ ê°œì„ " /><published>2023-01-01T00:00:00+09:00</published><updated>2023-01-01T00:00:00+09:00</updated><id>http://localhost:4000/db/2023/01/01/db-oraclesetting</id><content type="html" xml:base="http://localhost:4000/db/2023/01/01/db-oraclesetting.html"><![CDATA[<p><a href="https://mycatlikeschuru.github.io/db/2023/01/01/db-oracledb.html">Oracle Cloud Free Tier ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ ì ‘ì†</a>ì„ í†µí•´ì„œ<br />
ì˜¤ë¼í´ í‰ìƒ ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤.</p>

<p>í•˜ì§€ë§Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë©´ì„œ ëŠë‚€ê±´ë° ë¨ì´ 1GBë¡œ<br />
ì—¬ëŸ¬ê°€ì§€ ì„¤ì¹˜ë¥¼í•˜ê³  ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë„ˆë¬´ ë¬´ë¦¬ê°€ ìˆì–´ë³´ì´ëŠ” ì‚¬ì–‘ì„ í™•ì¸í•  ìˆ˜ê°€ ìˆë‹¤.</p>

<p>AMD ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ì‚¬ì–‘ì´ ë‚®ì€ ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ<br />
ëª‡ ê°€ì§€ ì„¤ì •ì„ í†µí•´ ì‹œìŠ¤í…œì„ ì›í• íˆ ëŒì•„ê°€ê²Œ ì…‹íŒ…ì„í•  ìˆ˜ê°€ ìˆë‹¤.</p>

<p>í•œë²ˆ ì•Œì•„ë³´ì</p>

<h4 id="-í˜„ì¬-ì¸ìŠ¤í„´ìŠ¤-ì‚¬ì–‘">ğŸ“Œ í˜„ì¬ ì¸ìŠ¤í„´ìŠ¤ ì‚¬ì–‘</h4>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ì´ë¯¸ì§€ : Ubuntu 22.04
êµ¬ì„± : (AMD) VM.Standard.E2.1.Micro / 1 core OCPU, 1GB Memory
</code></pre></div></div>

<p><br /></p>

<h4 id="-ê¸°ì´ˆ-ì…‹íŒ…">ğŸ“Œ ê¸°ì´ˆ ì…‹íŒ…</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
</code></pre></div></div>
<p>ê°€ì¥ ë¨¼ì € ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤€ë‹¤.</p>

<p><br /></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt install -y nano
</code></pre></div></div>
<p>nano í¸ì§‘ê¸°ë¥¼ ë‹¤ìš´ë°›ì•„ í¸í•˜ê²Œ ì‚¬ìš©í•´ë³´ì</p>

<p><br /></p>

<h4 id="-swap-ê³µê°„-ìƒì„±">ğŸ“Œ SWAP ê³µê°„ ìƒì„±</h4>

<p>ì˜¤ë¼í´ í´ë¼ìš°ë“œ AMD ì¸ìŠ¤í„´ìŠ¤ëŠ” ìœ„ì—ì„œ ì–˜ê¸°í–ˆë“¯ì´<br />
1GB RAMì„ ì œê³µí•œë‹¤. ì´ê²ƒì €ê²ƒ ì„¤ì¹˜í•˜ë‹¤ë³´ë©´ ê¸ˆë°© RAMì´ ë¶€ì¡±ì— ë¶€ë”ªíŒë‹¤.<br />
ìƒëŒ€ì ìœ¼ë¡œ ë„‰ë„‰í•œ HDD ì €ì¥ê³µê°„ì˜ ì¼ë¶€ë¥¼ RAM ê³µê°„ìœ¼ë¡œ í™œìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><strong>1). ìŠ¤ì™‘ê³µê°„</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>fallocate <span class="nt">-l</span> 2G /swapfile
<span class="nb">sudo chmod </span>600 /swapfile
<span class="nb">sudo </span>mkswap /swapfile
</code></pre></div></div>
<p>ë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥ì„ í•´ì£¼ê²Œ ëœë‹¤ë©´</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Setting up swapspace version 1, size <span class="o">=</span> 2 GiB <span class="o">(</span>2147479552 bytes<span class="o">)</span>
no label, <span class="nv">UUID</span><span class="o">=</span>8f85218d-329c-4eec-bf11-5d87964c5f0d
</code></pre></div></div>
<p>ìœ„ì™€ ê°™ì´ ìŠ¤ì™‘ê³µê°„ì´ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆë‹¤ê³  ë©”ì„¸ì§€ê°€ ëœ¬ë‹¤.</p>

<p><br /></p>

<p><strong>2). ìŠ¤ì™‘ì‹œì‘</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>swapon /swapfile
</code></pre></div></div>
<p>ìœ„ ëª…ë ¹ì–´ë¡œ ìŠ¤ì™‘ì„ ì‹œì‘í•œë‹¤.</p>

<p><br /></p>

<p><strong>3). ìŠ¤ì™‘ìƒì„± í™•ì¸</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>swapon <span class="nt">--show</span>
</code></pre></div></div>
<p>ëª…ë ¹ì–´ë¡œ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NAME      TYPE SIZE USED PRIO
/swapfile file   2G   0B   <span class="nt">-2</span>
</code></pre></div></div>
<p>ì™€ ê°™ì€ì‹ìœ¼ë¡œ í™•ì¸ì´ë˜ë©°, 2GBì˜ ìŠ¤ì™‘ê³µê°„ì´ í™•ë³´ë˜ì—ˆë‹¤ê³  í‘œì‹œëœë‹¤.</p>

<p><br /></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>free <span class="nt">-h</span>
</code></pre></div></div>
<p>ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‹œìŠ¤í…œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”<br />
ë©”ëª¨ë¦¬ ê³µê°„ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p><strong>4). ìŠ¤ì™‘ê³µê°„ ì‹œìŠ¤í…œ ê³ ì •</strong></p>

<p>ìŠ¤ì™‘ê³µê°„ì€ ì‹œìŠ¤í…œì´ ì¬ì‹œì‘ë˜ë©´ ì´ˆê¸°í™”ê°€ ì§„í–‰ë˜ë¯€ë¡œ<br />
ìŠ¤ì™‘ê³µê°„ì„ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆê²Œí•˜ê¸° ìœ„í•´ì„œ ê°„ë‹¨í•œ ì…‹íŒ…ê°’ì„ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nano /etc/fstab
</code></pre></div></div>

<p>ë¥¼ ì…ë ¥í•´ nano í¸ì§‘ê¸°ë¡œ fstab íŒŒì¼ì„ ìˆ˜ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">LABEL</span><span class="o">=</span>cloudimg-rootfs   /        ext4   discard,errors<span class="o">=</span>remount-ro       0 1
<span class="nv">LABEL</span><span class="o">=</span>UEFI      /boot/efi       vfat    <span class="nb">umask</span><span class="o">=</span>0077      0 1
/swapfile swap swap defaults 0 0
</code></pre></div></div>
<p>ìµœì¢…ì ìœ¼ë¡œëŠ” ë§¨ ì•„ë˜ì˜ <code class="language-plaintext highlighter-rouge">/swapfile swap swap defaults 0 0</code>ë¥¼<br />
ì…ë ¥í•œí›„ ì €ì¥í•´ì£¼ë©´ ëœë‹¤. nano í¸ì§‘ê¸° ì €ì¥ë°©ë²•ì€ <code class="language-plaintext highlighter-rouge">ctrl+s</code>í•œ ë‹¤ìŒì— <code class="language-plaintext highlighter-rouge">ctrl+x</code>ë¥¼<br />
ì…ë ¥í•´ì£¼ë©´ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë  ê²ƒ ì´ë‹¤.</p>

<p>ì´ë ‡ê²Œ ì„¤ì •ì„ ì™„ë£Œí•˜ë©´ ìŠ¤ì™‘ê³µê°„ì´ ê¸°ë³¸ê°’ìœ¼ë¡œ í™œì„±í™” ë˜ì–´<br />
ì‹œìŠ¤í…œì„ ì¬ì‹œì‘í•˜ì—¬ë„ ë¬¸ì œì—†ë‹¤ !</p>

<p><br /></p>

<h4 id="-ì‹œê°„ì„¤ì •">ğŸ“Œ ì‹œê°„ì„¤ì •</h4>

<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ì„œë²„ì˜ ì‹œê°„ì„ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>timedatectl set-timezone Asia/Seoul
</code></pre></div></div>

<p><br /></p>

<p>âœ¨ ì°¸ê³  ë¸”ë¡œê·¸ <br />
<a href="https://yeon-kr.tistory.com/174">í´ë¼ìš°ë“œ ì„±ëŠ¥ ê°œì„  ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ 1</a>, <a href="https://blog.hangyeong.com/1773#%EC%8B%9C%EC%8A%A4%ED%85%9C_%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8">í´ë¼ìš°ë“œ ì„±ëŠ¥ ê°œì„  ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ 2</a></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="DB" /><category term="DB" /><category term="Oracle" /><summary type="html"><![CDATA[Oracle Cloud Free Tier ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ ì ‘ì†ì„ í†µí•´ì„œ ì˜¤ë¼í´ í‰ìƒ ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ ë³´ì•˜ë‹¤.]]></summary></entry><entry><title type="html">Oracle Cloud Free Tier ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ ì ‘ì†</title><link href="http://localhost:4000/db/2023/01/01/db-oracledb.html" rel="alternate" type="text/html" title="Oracle Cloud Free Tier ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ ì ‘ì†" /><published>2023-01-01T00:00:00+09:00</published><updated>2023-01-01T00:00:00+09:00</updated><id>http://localhost:4000/db/2023/01/01/db-oracledb</id><content type="html" xml:base="http://localhost:4000/db/2023/01/01/db-oracledb.html"><![CDATA[<p>ì˜¤ëŠ˜ì€ <a href="https://www.oracle.com/kr/cloud/free/">Oracle Cloud ë¬´ë£Œ ë°ì´í„°ë² ì´ìŠ¤</a>ë¥¼ ìƒì„±í•´ë³´ë ¤í•œë‹¤.</p>

<p>íšŒì› ê°€ì…ê³¼ ì¹´ë“œ ë“±ë¡ì€ ë˜ì–´ìˆë‹¤ ê°€ì •í•˜ê³ <br />
ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì „ì— êµ¬íšìƒì„±ê³¼ VCN ë„¤íŠ¸ì›Œí¬ ìƒì„±<br />
ê·¸ë¦¬ê³  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ì ì–´ë³´ë ¤í•œë‹¤.<br />
<a href="https://hoing.io/archives/318">Oracle ë¬´ë£Œ ì¸ìŠ¤í„´ìŠ¤ ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</a>ë¥¼ í† ëŒ€ë¡œ ì‘ì—…í•˜ì˜€ìŠµë‹ˆë‹¤.</p>

<p><br /></p>

<h3 id="-êµ¬íš-ìƒì„±">ğŸ“Œ êµ¬íš ìƒì„±</h3>

<p>VM ìƒì„± ì „ì— êµ¬íšì„ ë¨¼ì € ìƒì„±í•´ì•¼í•œë‹¤.<br />
êµ¬íšì€ ë¦¬ì†ŒìŠ¤ë¥¼ í¬í•¨í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê°€ìƒì˜ ê³µê°„/ì˜ì—­ì´ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gNs_7nfk_gmvLEvuBwFQHxq_WeESvVrrNgHncikIguZT5WSDBFRWJouafXAfIAnVKgSH8daI2o4KyS-YzP_fNz25gBp=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p><br /></p>

<h3 id="-vcn-ë„¤íŠ¸ì›Œí¬-ìƒì„±">ğŸ“Œ VCN ë„¤íŠ¸ì›Œí¬ ìƒì„±</h3>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gPQ25gr2990xuN0OLF_Qr90USye42bZ6DbogZyuabsYL-OejRkV1p7C3LfLIa3X8BF5dgwz7eyH5zr20LtMPIO8nRjHjA=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë¨¼ì € ì•„ê¹Œ ìƒì„±í•œ êµ¬íšì„ ë¨¼ì € ì„ íƒí•œë‹¤ìŒ<br />
VCN ë§ˆë²•ì‚¬ë¥¼ ì‹œì‘í•œë‹¤.</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gN4OZ_5VRp8kmYeue1N02iMuXfeOZln12KRSuhL_PifDDhaNnn04SjU50HgsoewLDs6y8QAapnbFdv-GGZlSNSp9rSA=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>VCN ë§ˆë²•ì‚¬ ì‹œì‘ í´ë¦­</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gPJqkxzAgS17AG9KpQ1OtqlFWGHiBgNCpvx7ydTjS4MjBJ1jb4a12pnVVnO5Th7cckoNEPKhQmajAVdg02USWVmeLsW=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>VCN ì´ë¦„ì„ ì„¤ì •í•˜ê³  ë‹¤ìŒ í´ë¦­</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gMZctP8XvWQbWqzGbVm-w77_ba-OS6OrBJb46yB5-zZv1IxFQDJ9z4q80NN8B-4D2O3qMINEhwKwEaA65i_zTR4aDLa=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¦¬ì†ŒìŠ¤ ìƒì„±ì„ ì™„ë£Œí•©ë‹ˆë‹¤.</p>

<p><br /></p>

<h3 id="-ì¸ìŠ¤í„´ìŠ¤-ìƒì„±">ğŸ“Œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±</h3>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gNGOpUG5JQk1Y20qWPgcKom-VzhRcFsYcez9OIcBXBhA1q6MjLkamcxo3FMef5Uhsg1FdpF8fD0x6dydtnJl3GAjIyoIA=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>VM ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ëˆŒëŸ¬ ì¤ë‹ˆë‹¤.</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gO1m0uwf3jt9p5biT_6GwYRrmuWIoUXdvRUlZ0HbDrbWTYrj1VK4ci1QVvZhNRVNuKISN1FAY2l3rI7Fyap86OMc6E1EA=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì¸ìŠ¤í„´ìŠ¤ ì´ë¦„ê³¼ ì´ì „ì— ìƒì„±í•œ êµ¬íšì„ ì„ íƒí•´ì¤ë‹ˆë‹¤.</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gOdIXghpgxv_vlEivea2ZDnBtqZT-NuITqQPLie9l8He0bfkDT-Of9-oZUhU783AMfII_LhhfdlcLjwMNKIYZz1c37o7w=w1524-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì´ë¯¸ì§€ì™€ Shape ì„ íƒì´ ê°€ëŠ¥í•˜ê³ <br />
í•­ìƒ ë¬´ë£Œ ì ê²©ì´ë¼ ì í˜€ìˆëŠ” ê²ƒì„ ì„ íƒí•´ì„œ ì‚¬ìš©í•´ì£¼ë©´ëœë‹¤.</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gPo3-KkV26L9DztTmGJe7RvC3TpnqdtJ_TuMqP8fQwXvxfrpIKJH8pSbmXrPtmaHYtX1oresm5LE13S4bx5tot7rF5qUQ=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë„¤íŠ¸ì›Œí‚¹ë„ ë§ˆì°¬ê°€ì§€ë¡œ ì´ì „ì— ë§Œë“¤ì–´ë‘” VCN ë„¤íŠ¸ì›Œí¬ë¥¼<br />
ì„ íƒí•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<p>ë§Œì•½ êµ¬íšìƒì„±ê³¼ ë„¤íŠ¸ì›Œí‚¹ì„ ë§Œë“¤ì–´ì£¼ì§€ ì•Šì•˜ë‹¤ë©´<br />
ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„í•˜ì—¬ë„ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gMOEnVFm0OsNdlUigDiwml8a2oJrXHpmUdMcf1PLn7PSX0fIHhR77mwY1-pbOOsFqz_Ld4ydtHu7l_TeA0f4AN17rBy2Q=w1524-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>SSH í‚¤ë¥¼ ì¶”ê°€í•´ì¤˜ì•¼í•˜ëŠ”ë°<br />
ì´ì „ì— Githubë¥¼ ì‚¬ìš©í•˜ì‹ ë¶„ë“¤ì€ ê³µìš©í‚¤ê°€ ì´ë¯¸ ìˆì„ ê²ƒì´ë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~/.ssh/id_rsa.pub
</code></pre></div></div>

<p>ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ ê³µìš© sshë¥¼ ë¶™ì—¬ë„£ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. <br />
ë§Œì•½ ì—†ë‹¤ë©´ ìƒì„±ì„ í•´ì£¼ì‹œë©´ ë˜ëŠ”ë°, í•´ë‹¹ ë‚´ìš©ì€ ìŠ¤í‚µí•˜ê² ìŠµë‹ˆë‹¤.</p>

<p>ë¶€íŠ¸ ë³¼ë¥¨ê³¼ ê°™ì€ ê²½ìš°ì—ëŠ” 100GBê¹Œì§€ ìµœëŒ€ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ê³ <br />
50GBì”© 2ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë‚˜ëˆ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>

<p>ì´ì œ ì„¤ì •ì„ ëëƒˆìœ¼ë©´, ìƒì„±ì„ ëˆŒëŸ¬ ìµœì¢…ì™„ë£Œë¥¼ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>

<p><br /></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gNo2CptbsDAon2CtX6-RAqpmRSSTa7z3m9LWRW9JCFCdVbgMoJTOb9hisTz1OHSLY0EkNb9cXhzDeMauPpUOxUqBrtAXQ=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì´ì œ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ì— ê°€ì„œ í™•ì¸í•´ë³´ì‹œë©´<br />
ë‚´ê°€ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<h3 id="-ì¸ìŠ¤í„´ìŠ¤-ì ‘ì†í•˜ê¸°">ğŸ“Œ ì¸ìŠ¤í„´ìŠ¤ ì ‘ì†í•˜ê¸°</h3>

<p>ì´ì œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ì ‘ì†ì„í•˜ëŠ”ë²•ì„ ì•Œì•„ë³´ì<br />
ìš°ë¦¬ëŠ” ê³µìš© SSHë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤.</p>

<p>$HOME/.ssh ê²½ë¡œì— private keyê°€ ì €ì¥ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— <br />
ì•”í˜¸ë¥¼ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ì›ê²© ì„œë²„ì— ì ‘ì†í•  ìˆ˜ ìˆë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh ubuntu@ì£¼ì†Œ
</code></pre></div></div>

<p>ë§Œì•½ private keyê°€ $HOME/.ssh ê²½ë¡œì— ìœ„ì¹˜í•˜ì§€ ì•Šì€ ê²½ìš°</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-i</span> <span class="o">[</span>private key path] ubuntu@ì£¼ì†Œ
</code></pre></div></div>
<p>ë¥¼ ì…ë ¥í•´ì£¼ë©´ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤.
[private key path]ì—ëŠ” ê²½ë¡œë¥¼ ì…ë ¥í•´ì£¼ë©´ ëœë‹¤.</p>

<p>í„°ë¯¸ë„ì—ì„œ ì…ë ¥ì‹œ</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gN0U_vZhmyBCubkA_yUqYCkiETMcUZtOnZLVXoUTz9DjMI_17cNV1t6S7kLe2Ajxg3hGFEed9nmR6d7kK4Ha7nvpTyeAw=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•œ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆë‹¤ !!</p>

<p><br /></p>

<p>FileZillaë¥¼ í†µí•´ì„œë„ ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gNNwSW2rB9___rqmhE9ee14DuQbywCDLJsaQY9D9nUls2WpBa9DsFwQ2tVE-3hj33naagXa8NPqAbdt8njgA5D9Weh_Ww=w3024-h1728" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>SFTP - SSH í”„ë¡œí† ì½œì„ ì„ íƒí•´ì¤€ë‹¤ìŒì—   <br />
í˜¸ìŠ¤íŠ¸ëŠ” ì¸ìŠ¤í„´ìŠ¤ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ë©´ ëœë‹¤.<br />
ê·¸ë¦¬ê³  í‚¤íŒŒì¼ì„ ê³µê°œí‚¤ê°€ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">id_rsa</code> private keyë¥¼ ì„ íƒí•´ì£¼ë©´<br />
ì •ìƒì ìœ¼ë¡œ ì ‘ì†í•  ìˆ˜ ìˆëŠ” ëª¨ìŠµì„ í™•ì¸í•´ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="DB" /><category term="DB" /><category term="Oracle" /><summary type="html"><![CDATA[ì˜¤ëŠ˜ì€ Oracle Cloud ë¬´ë£Œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•´ë³´ë ¤í•œë‹¤.]]></summary></entry><entry><title type="html">AWS EC2 NginX í´ë¼ì´ì–¸íŠ¸ ë°°í¬</title><link href="http://localhost:4000/linux/unix/2022/12/29/server-NginX.html" rel="alternate" type="text/html" title="AWS EC2 NginX í´ë¼ì´ì–¸íŠ¸ ë°°í¬" /><published>2022-12-29T00:00:00+09:00</published><updated>2022-12-29T00:00:00+09:00</updated><id>http://localhost:4000/linux/unix/2022/12/29/server-NginX</id><content type="html" xml:base="http://localhost:4000/linux/unix/2022/12/29/server-NginX.html"><![CDATA[<h3 id="-nginx-ì´ìš©í•˜ì—¬-í´ë¼ì´ì–¸íŠ¸-ë°°í¬í•˜ê¸°">âœ… NGINX ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ë°°í¬í•˜ê¸°</h3>

<p><a href="https://velog.io/@gudcks0305/%EB%B0%B0%ED%8F%AC-Cloud-Compute-%EB%A1%9C-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0">í´ë¼ìš°ë”© ì»´í“¨í„° ë°°í¬ ì°¸ê³ ë ˆí¼ëŸ°ìŠ¤</a>ë¥¼ í† ëŒ€ë¡œ<br />
ê³µë¶€í•˜ê³  í…ŒìŠ¤íŠ¸í•´ë³¸ ê¸°ë¡ì„ ì ì–´ë³´ë ¤í•œë‹¤.</p>

<p>ìš°ë¦¬ ì½”ìŠ¤ì— í•œë¶„ì´ ì‘ì„±í•˜ì‹  ê¸€ì´ê³ <br />
í—¤ë§¤ê³ ìˆëŠ” ë‚˜ì—ê²Œ ë¹›ì¤„ê¸°ë¥¼ ë‚´ë ¤ì£¼ì…¨ë‹¤â€¦ğŸ¥¹</p>

<p>ìš°ì„  ìš°ë¦¬íŒ€ì—ì„œ ìƒê°í•œ ì•„í‚¤í…ì²˜ì´ë‹¤.<br />
ì •í™•íˆ ë§ëŠ”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ, ìš°ë¦¬ê°€ ì•„ëŠ” ì§€ì‹ì„ ëª¨ì•„ ê·¸ë ¤ë´¤ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gN7pzIQwGbZHGCEUS4jHehIs9yAoOY3RHwfGUqiNHJgziufPka455gX63ZA492CwBarFgJwzDiqJx6XRydBBBJCWJJYNA=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>AWS í´ë¼ìš°ë”© ì»´í“¨í„°ë¥¼ ì´ìš©í•œ S3 - EC2 - RDSë¥¼ ìš´ìš©í•˜ê³  ì‹¶ì—ˆì§€ë§Œâ€¦ <br />
í”„ë¦¬í‹°ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ìš°ë¦¬ì—ê²Œ í˜¹ì‹œë‚˜ ë¹„ìš©ë¬¸ì œê°€ ê±¸ë¦¼ëŒì´ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„<br />
ê¼¼ê¼¼íˆ í™ˆí˜ì´ì§€ ì‚¬ì–‘ì„ ì½ì–´ë³´ê¸´í–ˆì§€ë§Œ,,, ì•„ì§ ë¯¸ìˆ™í•œ ìš°ë¦¬ë“¤ì—ê²Œ ì‚¬ê³ ë¥¼<br />
ë¯¸ì—°ì— ë°©ì§€í•˜ê³ ì EC2ë§Œ ë¹Œë¦°ë‹¤ìŒì— ì§„í–‰í•˜ë ¤ê³ í•œë‹¤.</p>

<p><br /></p>

<h4 id="-ì‘ì—…-í™˜ê²½">ğŸ“Œ ì‘ì—… í™˜ê²½</h4>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NGINX version : nginx/1.22.1
EC2 ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• : Ubuntu, 22.04 LTS (HVM), SSD Volume Type , 64ë¹„íŠ¸(x86)  
JDK : openjdk version 11.0.17
ì‘ì—… ì»´í“¨í„° OS : macOS Monterey 12.6
</code></pre></div></div>

<p><br /></p>

<h4 id="-nginx-ì„¤ì¹˜">ğŸ“Œ NGINX ì„¤ì¹˜</h4>

<p>EC2 ì¸ìŠ¤í„´ìŠ¤ì— Nginxë¥¼ ì„¤ì¹˜í•´ì¤˜ì•¼í•œë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nb">install </span>nginx
</code></pre></div></div>
<p>ì—…ë°ì´íŠ¸ë¥¼ í•´ì£¼ê³  nginxë¥¼ ì„¤ì¹˜í•´ì£¼ë©´ ëœë‹¤.</p>

<p>ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ <code class="language-plaintext highlighter-rouge">nginx -version</code>ì„ ì…ë ¥í•˜ë©´<br />
<code class="language-plaintext highlighter-rouge">nginx version: nginx/1.22.1</code>ì™€ ê°™ì´ ë²„ì ¼ì´ <br />
ë‚˜ì˜¤ë©´ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ëœ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<h4 id="-nginx-ì‹œì‘-ì¢…ë£Œ">ğŸ“Œ NGINX ì‹œì‘, ì¢…ë£Œ</h4>

<p>1). ì‹œì‘ ëª…ë ¹ì–´</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service nginx start
</code></pre></div></div>

<p><br /></p>

<p>2). ì¤‘ì§€ ëª…ë ¹ì–´</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service nginx stop
</code></pre></div></div>

<p><br /></p>

<p>3). ìƒíƒœ í™•ì¸ ëª…ë ¹ì–´</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service nginx status
</code></pre></div></div>

<p><br /></p>

<p>4). ì„¤ì •íŒŒì¼ í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>nginx <span class="nt">-t</span> 
</code></pre></div></div>

<p><br /></p>

<p>5). ì¬ì‹œì‘ ëª…ë ¹ì–´</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service nginx restart
</code></pre></div></div>

<p>ì´ë ‡ê²Œ 5ê°€ì§€ë¥¼ ì´ìš©í•´ ì¤‘ì§€,ì‹œì‘ ë° ìƒíƒœí™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p>ì²˜ìŒì— Start ëª…ë ¹ì–´ë¡œ ì‹œì‘ì„í•œë‹¤ë©´ <br />
ê¸°ë³¸ í˜ì´ì§€ì¸ ì•„ë˜ì˜ í™”ë©´ì´ ë‚˜ì˜¬ ê²ƒì´ë‹¤. <br />
ë„ë©”ì¸ ì£¼ì†ŒëŠ” ë‹¹ì—°íˆ EC ì¸ìŠ¤í„´ìŠ¤ì˜ IPv4ë¥¼ ì…ë ¥í•´ì£¼ë©´ëœë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gPDQyLIrueFY34ZhChcQqOsepcLPLrsa-qd8SRR-U_eG55nRUstLL8aOqIAjkjg84o68D2be4WfoeOlMewuzCKEmjHv=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ê¸°ë³¸ ì„¤ì • PORTê°€ 80ì´ê¸° ë•Œë¬¸ì—<br />
<code class="language-plaintext highlighter-rouge">http://3.35.174.126</code> ìœ¼ë¡œ ì…ë ¥í•˜ì—¬ë„ ì ‘ì†ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.</p>

<p>í•´ë‹¹ html íŒŒì¼ì˜ ì£¼ì†Œì— ì ‘ì†í•˜ê³  ì‹¶ë‹¤ë©´<br />
<code class="language-plaintext highlighter-rouge">/usr/share/nginx/html</code> ê²½ë¡œë¡œ ì´ë™í•˜ë©´ <br />
<code class="language-plaintext highlighter-rouge">index.html</code>ê³¼ <code class="language-plaintext highlighter-rouge">50x.html</code>ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<h4 id="-nginx-ì„¤ì •">ğŸ“Œ NGINX ì„¤ì •</h4>

<p><code class="language-plaintext highlighter-rouge">/etc/nginx</code> í´ë”ì— ì„¤ì • ê´€ë ¨íŒŒì¼ë“¤ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gPlZj5J-OVdyUfWtLi-3GsOpph99bcO6chVUREqjXeqUdIDkUOKwDuTaIgeCapp2Qls01XhQ1J7hcVYQA0VCaSmXCmlDQ=w1656-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ì—¬ê¸°ì„œ <code class="language-plaintext highlighter-rouge">nginx.conf</code> íŒŒì¼ì— ì„¤ì •ì„ ì‹œì‘í•´ì£¼ë©´ ëœë‹¤.<br />
<code class="language-plaintext highlighter-rouge">nginx.conf</code>íŒŒì¼ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">conf.d</code> í´ë”ì•ˆì˜ <code class="language-plaintext highlighter-rouge">.conf</code>íŒŒì¼ë“¤ì„<br />
ì½ì„ ìˆ˜ ìˆë„ë¡ ì½”ë“œê°€ ì‘ì„±ë˜ì–´ ìˆì–´, <code class="language-plaintext highlighter-rouge">conf.d</code> í´ë”ì— ìƒˆë¡œìš´ <code class="language-plaintext highlighter-rouge">.conf</code>íŒŒì¼ì„<br />
ë§Œë“¤ì–´ì„œ ì‚¬ìš© ì„¤ì •ì´ ê°€ëŠ¥í•˜ë‹¤.<br />
(<code class="language-plaintext highlighter-rouge">include /etc/nginx/conf.d/*.conf;</code> ì´ëŸ° ì½”ë“œê°€ ìˆë‹¤.)</p>

<p><code class="language-plaintext highlighter-rouge">conf.d</code>í´ë”ì—ëŠ” <code class="language-plaintext highlighter-rouge">default.conf</code> íŒŒì¼ì´ ìˆë‹¤. <br />
í•´ë‹¹ íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•´ë„ë˜ê³ , ìƒˆë¡œìš´ <code class="language-plaintext highlighter-rouge">.conf</code>íŒŒì¼ì„ ë§Œë“¤ì–´ë„ ëœë‹¤.</p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ëŠ” <code class="language-plaintext highlighter-rouge">nginx.conf</code> íŒŒì¼ì€ ì´ˆê¸°ì„¤ì • ê·¸ëŒ€ë¡œ ë‘ê³ <br />
<code class="language-plaintext highlighter-rouge">conf.d</code>í´ë”ì— 1).<code class="language-plaintext highlighter-rouge">client.conf</code> , 2).<code class="language-plaintext highlighter-rouge">server.conf</code> ë‘ê°œë¥¼ ë§Œë“¤ì—ˆë‹¤.</p>

<p><strong>1). client.conf</strong></p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server {
  server_name stackoverflowpre.p-e.kr;
  root /home/ubuntu/preproject/seb41_pre_037/client/build;
  index index.html index.htm;
  try_files $uri $uri/ /index.html;
  location / {
    try_files $uri $uri/ /index.html;
  }
}
</code></pre></div></div>
<p>server_nameì—ëŠ” <a href="https://xn--220b31d95hq8o.xn--3e0b707e/">ë‚´ ë„ë©”ì¸ í•œêµ­</a>ì—ì„œ ë°›ì€ <br />
ë„ë©”ì¸(stackoverflowpre.p-e.kr)ìœ¼ë¡œ ì ì–´ì£¼ì—ˆê³   <br />
EC2 IPv4 ì£¼ì†Œì™€ ì—°ê²°ë˜ì–´ìˆë‹¤.</p>

<p>rootì—ëŠ” í”„ë¡ íŠ¸ì—”ë“œìª½ ë¹Œë“œëœ íŒŒì¼ì´ ì˜¬ë¼ê°€ìˆëŠ” ê²½ë¡œì´ë‹¤.</p>

<p><br /></p>

<p><strong>2). server.conf</strong></p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>upstream preServer {
        ip_hash;
        server 127.0.0.1:8080;
}

server {

        server_name stackoverflowpre.p-e.kr;
        location / {

            proxy_pass http://preServer; # ìœ„ upstream ì—ì„œ ì„¤ì •í•œ ì´ë¦„

            proxy_set_header    HOST $http_host;

            proxy_set_header    X-Real-IP $remote_addr;

            proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;

            proxy_set_header    X-Forwarded-Proto $scheme;

            proxy_redirect  off;
            charset utf-8;
        }

}
</code></pre></div></div>
<p>preServerì— <code class="language-plaintext highlighter-rouge">localhost:8080</code>ì¸ <code class="language-plaintext highlighter-rouge">127.0.0.1:8080</code>ì„ ì„¤ì •í•´ì£¼ì—ˆê³  (ìŠ¤í”„ë§ í†°ì¼“ì„œë²„)<br />
server_nameì—ëŠ” ë™ì¼í•˜ê²Œ ë„ë©”ì¸ì„ ë„£ì–´ì£¼ì—ˆë‹¤.</p>

<p>ì´ì œ jar ë¹Œë“œíŒŒì¼ì„ ì‹¤í–‰ì‹œì¼œë†“ê³  <br />
<code class="language-plaintext highlighter-rouge">sudo service nginx start </code> ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ë©´</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gP7Sh6YFwUrS61qHgvcTyuBFnYthfSnOon6P1upWJ51Brs04kAsppAbtReYthNfYC4poomu4WMycAhF6xnd6bN9sVF8OQ=w1656-h864" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìš°ë¦¬ê°€ ë§Œë“¤ì–´ ë†“ì€ <code class="language-plaintext highlighter-rouge">index.html</code> í™”ë©´ì´ ë³´ì´ê¸° ì‹œì‘í•˜ë©´ì„œ  <br />
ì •ì‚­ì ìœ¼ë¡œ ë°°í¬í™˜ê²½ì—ì„œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤ !! <br />
(ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° í´ë¡ ì½”ë”©ì„ í•œ ë„ë©”ì¸ì´ë‹¤)</p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="Linux/Unix" /><category term="Linux" /><category term="Unix" /><summary type="html"><![CDATA[âœ… NGINX ì´ìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ë°°í¬í•˜ê¸°]]></summary></entry><entry><title type="html">MySQL EC2ì— ì„¤ì¹˜í›„ WorkBench ì ‘ì†í•˜ê¸°</title><link href="http://localhost:4000/db/2022/12/28/db-mysqlEC2.html" rel="alternate" type="text/html" title="MySQL EC2ì— ì„¤ì¹˜í›„ WorkBench ì ‘ì†í•˜ê¸°" /><published>2022-12-28T00:00:00+09:00</published><updated>2022-12-28T00:00:00+09:00</updated><id>http://localhost:4000/db/2022/12/28/db-mysqlEC2</id><content type="html" xml:base="http://localhost:4000/db/2022/12/28/db-mysqlEC2.html"><![CDATA[<p>EC2ì— MySQLì„ ì„¤ì¹˜í•œë‹¤ìŒ<br />
WorkBenchë¡œ ì ‘ì†í•˜ë ¤ëŠ”ë° ì„¤ì •í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë ¤í•œë‹¤.<br />
MySQL ì„¤ì¹˜ê³¼ì •ì€ ìƒëµí•˜ê² ë‹¤.</p>

<p><br /></p>

<h4 id="-yml-íŒŒì¼-ì„¤ì •">ğŸ“Œ yml íŒŒì¼ ì„¤ì •</h4>

<p>ìš°ì„  EC2ì— ë°°í¬í•œ ìŠ¤í”„ë§ <code class="language-plaintext highlighter-rouge">.yml</code> íŒŒì¼ ì„¤ì •ì´ë‹¤.<br />
ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ <code class="language-plaintext highlighter-rouge">localhost:3306</code>ìœ¼ë¡œ ì„¤ì •ì„ í•´ì£¼ì—ˆê³ </p>

<p>ìŠ¤í‚¤ë§ˆ ì´ë¦„ì€ stackoverë¼ëŠ” ì´ë¦„ìœ¼ë¡œì§€ ì§€ì •í–ˆë‹¤.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">spring</span><span class="pi">:</span>
  <span class="na">datasource</span><span class="pi">:</span>
    <span class="na">driver-class-name</span><span class="pi">:</span> <span class="s">com.mysql.cj.jdbc.Driver</span>
    <span class="na">url</span><span class="pi">:</span> <span class="s">jdbc:mysql://localhost:3306/stackover?serverTimezone=Asia/Seoul</span> <span class="c1"># í¬íŠ¸ë„˜ë²„, ìŠ¤í‚¤ë§ˆì´ë¦„</span>
    <span class="na">username</span><span class="pi">:</span> <span class="s">${MYSQL_ID}</span> <span class="c1"># ìœ ì €ë„¤ì„</span>
    <span class="na">password</span><span class="pi">:</span> <span class="s">${MYSQL_PASSWORD}</span> <span class="c1"># ë¹„ë°€ë²ˆí˜¸</span>
</code></pre></div></div>

<p>í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ ìœ ì €ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì§€ì •í•´ì¤¬ë‹¤.</p>

<p><br /></p>

<h4 id="-ec2-ì„¤ì •">ğŸ“Œ EC2 ì„¤ì •</h4>

<p><strong>ì²«ë²ˆì¨°</strong>ë¡œ EC2 ë³´ì•ˆê·¸ë£¹ì˜ ì¸ë°”ìš´ë“œ ê·œì¹™ì„ ì„¤ì •í•´ì¤˜ì•¼í•œë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gN095iTdhlGaDzXDoZONY9_byOM5RVo22mey2JsVdznjSR1iAFXH3SeeTRFq2MaN2FCRYRU7O8iAwqpF0rpulNSiOhkKg=w1920-h920" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>MYSQLì„ ì„ íƒí•˜ê³  0.0.0.0/0 ì„ ì§€ì •í•´ì£¼ì—ˆë‹¤.</p>

<p><br /></p>

<p><strong>ë‘ë²ˆì§¸</strong>ë¡œëŠ” EC2ì˜ <code class="language-plaintext highlighter-rouge">mysqld.cnf</code> íŒŒì¼ì˜ ë‚´ìš©ì„ ìˆ˜ì •í•´ì¤˜ì•¼í•œë‹¤.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /etc/mysql/mysql.conf.d
</code></pre></div></div>
<p>í•´ë‹¹ ê²½ë¡œì— ì§„ì…í•˜ë©´ <code class="language-plaintext highlighter-rouge">mysqld.conf</code> íŒŒì¼ì„ ì—´ ìˆ˜ ìˆê³ </p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>vi mysqld.cnf
</code></pre></div></div>
<p>sudoë¥¼ ì´ìš©í•´ì•¼ ì €ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gOPpSA6Dj0VxEP0QUnOJuYtmaV64BdOTsIT_o2mvPCkZHCKxSQaPSVtVXAc4UZqFLGDwoyFIrAOfKw8_9fq_2oG6lFG=w1920-h920" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>íŒŒì¼ì˜ bind-addressë¥¼ <code class="language-plaintext highlighter-rouge">0.0.0.0</code>ìœ¼ë¡œ ì„¤ì • í•´ì£¼ì—ˆê³ <br />
mysqlx-bind-addressëŠ” ì£¼ì„ì²˜ë¦¬ë¥¼ í•´ì£¼ì—ˆë‹¤.</p>

<p><br /></p>

<p><strong>ì„¸ë²ˆì§¸</strong>ë¡œëŠ” User ê³„ì •ì„ ìƒì„±í•˜ê³ <br />
í•´ë‹¹ ê³„ì •ì— ê¶Œí•œì„ ë¶€ì—¬í•´ì£¼ì—ˆë‹¤.</p>

<p>âœ… <strong>mysql ì ‘ì†</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</code></pre></div></div>
<p>ì²˜ìŒì—ëŠ” root ê³„ì •ìœ¼ë¡œ ì§„ì…í•˜ë©´ mysqlì— ì ‘ì†ì´ ê°€ëŠ¥í•˜ë‹¤.<br />
ë§Œì•½ root ê³„ì •ì— ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°ì—ëŠ”</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root
</code></pre></div></div>
<p>ëª…ë ¹ì–´ë¡œ ì ‘ê·¼í•œ ë‹¤ìŒì—</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ALTER USER <span class="s1">'root'</span>@<span class="s1">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="s1">'yourPassword'</span><span class="p">;</span>
</code></pre></div></div>
<p>yourPasswordì— ì›í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ root ê³„ì •ì—<br />
ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•´ ì¤„ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>âœ… <strong>ìœ ì € ìƒì„±</strong><br />
ì´ì œ mysqlì— ì ‘ì†ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SELECT user,authentication_string,plugin,host FROM mysql.user<span class="p">;</span>
</code></pre></div></div>
<p>ëª…ë ¹ì–´ë¡œ ë“±ë¡ëœ user ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gO-FEGjAwEuSnVLX_OZnmrstM6XDpJZRgPzMGhUCNxJJmQ-ob0QO97XihuOkInNrM8Iy0-9WSM9bBu9z1kaeUmBM_cErg=w1920-h920" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>userê°€ í˜„ì¬ ë‚´ê°€ ë§Œë“¤ì–´ë‘” ê³„ì •ì´ê³  ê¸°ë³¸ìœ¼ë¡œëŠ” rootê°€ ìˆë‹¤.<br />
ê·¸ë¦¬ê³  hostë¥¼ %ë¡œ ë³€ê²½í•´ì£¼ë©´ ì™¸ë¶€ì—ì„œë„ ì§„ì…ì´ ê°€ëŠ¥í•´ì§„ë‹¤.</p>

<p>ì´ì œ ê³„ì •ì„ í•˜ë‚˜ ë§Œë“¤ì–´ë³´ì</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>create user ìœ ì €ì´ë¦„@â€˜%â€™ identified by â€˜ë¹„ë°€ë²ˆí˜¸â€™<span class="p">;</span>
</code></pre></div></div>
<p>ìœ ì €ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ê³„ì •ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.<br />
ë§Œì•½ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ì€ê²½ìš° ìœ„ì—ì„œ rootê³„ì • ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•  ë•Œ<br />
ì‚¬ìš©í–ˆë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì£¼ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>âœ… <strong>ìœ ì € ì‚­ì œ</strong><br />
í˜¹ì‹œë‚˜ ìœ ì €ë¥¼ ì‚­ì œí•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ”</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drop user ìœ ì €ì´ë¦„@localhost<span class="p">;</span>
</code></pre></div></div>
<p>ê³¼ ê°™ì´ ì…ë ¥í•´ì£¼ë©´ ì‚­ì œê°€ ê°€ëŠ¥í•Ÿ.</p>

<p>âœ… <strong>ìœ ì € ê¶Œí•œë¶€ì—¬</strong><br />
ì´ì œ ìœ ì €ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ<br />
ìœ ì €ì— ëŒ€í•œ ê¶Œí•œì„ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>grant all privileges on <span class="k">*</span>.<span class="k">*</span> to â€˜ìœ ì €ì´ë¦„â€™@â€˜%â€™<span class="p">;</span>
</code></pre></div></div>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>flush privileges<span class="p">;</span>
</code></pre></div></div>
<p>ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´ ì¿¼ë¦¬ê°€ ë‚ ë¼ê°”ë‹¤ê³  ë©”ì„¸ì§€ê°€ ë‚˜ì˜¨ë‹¤.</p>

<p>ì „ë¶€ ì™„ë£Œë¥¼ í•˜ê³ ë‚˜ë©´ <code class="language-plaintext highlighter-rouge">quit</code>ë¡œ mysqlì„ ë‚˜ì˜¨ë‹¤ìŒì—<br />
ìš°ë¶„íˆ¬ í„°ë¯¸ë„ì—ì„œ</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart mysql
</code></pre></div></div>
<p>í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ mysqlì„ ì¬ì‹¤í–‰ ì‹œì¼œì£¼ì</p>

<p>ìœ„ ê³¼ì •ì´ ì „ë¶€ ì™„ë£Œë˜ì—ˆë‹¤ë©´<br />
ë°©ê¸ˆ ë§Œë“  ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸, ê·¸ë¦¬ê³  EC2 ê³µê°œ IPë¥¼ ì´ìš©í•´</p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gNtl81ccvr2i_SPrMZV_lXTrzZ82HmAX4GffSwHZ0ZRV69bgx16OnwlRwzCVC5YdY1AZL3XQU4lMfH71k-aaMFMmcaIOA=w1920-h921" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ìœ„ì™€ ê°™ì´ ì •ìƒì ìœ¼ë¡œ WorkBenchì— ì ‘ì†í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤!!!</p>

<p><br /></p>

<p>í˜¹ì‹œë‚˜ ì•„ë˜ì™€ ê°™ì€ ì•ŒëŒì´ ë°œìƒí•œ ê²½ìš°ì—ëŠ”<br />
<code class="language-plaintext highlighter-rouge">Unable to connect to localhost</code></p>

<p><img src="https://lh3.googleusercontent.com/u/0/drive-viewer/AFDK6gNjgebqbY9sS3D33Pd29TXwqg6DDU4JIE9Go_c3XFDnw_1RgPPaIsywivrZapu1dPIvXURNgUn-mwRKe4kMYuh2uyuOGw=w1000-h920" alt="image" class="align-left" style="max-width: 100%" /></p>

<p>ë‚˜ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” EC2 ì¸ë°”ìš´ë“œ ê·œì¹™ ì„¤ì •ê³¼ <br />
<code class="language-plaintext highlighter-rouge">mysqld.conf</code> ì„¤ì •í•œ ê°’ì´ ë§ì§€ ì•Šì•„ì„œ ì˜€ë‹¤.<br />
í˜¹ì‹œë‚˜ ì°¸ê³ ì°¨ ì˜¬ë ¤ë³¸ë‹¤.</p>

<p><br /></p>

<p><a href="https://changun516.tistory.com/55">ì—ëŸ¬ í•´ê²° ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</a>, <a href="https://velog.io/@woals4815/MySQL-%EC%99%B8%EB%B6%80-%EC%A0%91%EC%86%8D-%ED%95%98%EA%B8%B0MySQLWorkbench-%EC%9D%B4%EC%9A%A9">MySQL ì™¸ë¶€ ì ‘ì† ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤</a></p>]]></content><author><name>LEE JAEHYEOK</name></author><category term="DB" /><category term="DB" /><category term="MySQL" /><summary type="html"><![CDATA[EC2ì— MySQLì„ ì„¤ì¹˜í•œë‹¤ìŒ WorkBenchë¡œ ì ‘ì†í•˜ë ¤ëŠ”ë° ì„¤ì •í•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ë ¤í•œë‹¤. MySQL ì„¤ì¹˜ê³¼ì •ì€ ìƒëµí•˜ê² ë‹¤.]]></summary></entry></feed>