<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-translate-customization" content="108d9124921d80c3-80e20d618ff053c8-g4f02ec6f3dba68b7-c">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>TIL) Spring Security 1 (Í∏∞Ï¥à) | LeeJellan</title>
<meta name="generator" content="Jekyll v4.3.0">
<meta property="og:title" content="TIL) Spring Security 1 (Í∏∞Ï¥à)">
<meta name="author" content="LEE JAEHYEOK">
<meta property="og:locale" content="en_US">
<meta name="description" content="ÏïàÎÖïÌïòÏÑ∏Ïöî!üôÇ IT,Ïó¨Ìñâ,Í∏∞ÌÉÄ Îì± Í∏∞Î°ùÏùÑ ÎÇ®Í∏∞Í∏∞ÏúÑÌïú Î∏îÎ°úÍ∑∏ ÏûÖÎãàÎã§ !">
<meta property="og:description" content="ÏïàÎÖïÌïòÏÑ∏Ïöî!üôÇ IT,Ïó¨Ìñâ,Í∏∞ÌÉÄ Îì± Í∏∞Î°ùÏùÑ ÎÇ®Í∏∞Í∏∞ÏúÑÌïú Î∏îÎ°úÍ∑∏ ÏûÖÎãàÎã§ !">
<link rel="canonical" href="http://localhost:4000/til/2022/11/18/til.html">
<meta property="og:url" content="http://localhost:4000/til/2022/11/18/til.html">
<meta property="og:site_name" content="LeeJellan">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2022-11-18T00:00:00+09:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="TIL) Spring Security 1 (Í∏∞Ï¥à)">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"LEE JAEHYEOK"},"dateModified":"2022-11-18T00:00:00+09:00","datePublished":"2022-11-18T00:00:00+09:00","description":"ÏïàÎÖïÌïòÏÑ∏Ïöî!üôÇ IT,Ïó¨Ìñâ,Í∏∞ÌÉÄ Îì± Í∏∞Î°ùÏùÑ ÎÇ®Í∏∞Í∏∞ÏúÑÌïú Î∏îÎ°úÍ∑∏ ÏûÖÎãàÎã§ !","headline":"TIL) Spring Security 1 (Í∏∞Ï¥à)","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/til/2022/11/18/til.html"},"url":"http://localhost:4000/til/2022/11/18/til.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="icon" href="/assets/images/favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-noto-sans@0.0.72/index.min.css">
  <link rel="stylesheet" href="/assets/css/main.css">
  <script src="/assets/js/main.js"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="LeeJellan">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/atom-one-dark.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script charset="UTF-8" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/languages/go.min.js"></script>



















<script>
// Init highlight js
document.addEventListener('DOMContentLoaded', function(event) {
  var els = document.querySelectorAll('pre code')

  function addLangData(block) {
    var outer = block.parentElement.parentElement.parentElement;
    var lang = block.getAttribute('data-lang');
    for (var i = 0; i < outer.classList.length; i++) {
      var cls = outer.classList[i];
      if (cls.startsWith('language-')) {
        lang = cls;
        break;
      }
    }
    if (!lang) {
      cls = block.getAttribute('class');
      lang = cls ? cls.replace('hljs ', '') : '';
    }
    if (lang.startsWith('language-')) {
      lang = lang.substr(9);
    }
    block.setAttribute('class', 'hljs ' + lang);
    block.parentNode.setAttribute('data-lang', lang);
  }

  function addBadge(block) {
    var enabled = ('false' || 'true').toLowerCase();
    if (enabled == 'true') {
      var pre = block.parentElement;
      pre.classList.add('badge');
    }
  }

  function handle(block) {
    addLangData(block);
    addBadge(block)
    hljs.highlightBlock(block);
  }

  for (var i = 0; i < els.length; i++) {
    var el = els[i];
    handle(el);
  }
});
</script>

<style>
  /* code language badge */
  pre.badge::before {
    content: attr(data-lang);
    color: #fff;
    background-color: #ff4e00;
    padding: 0 .5em;
    border-radius: 0 2px;
    text-transform: uppercase;
    text-align: center;
    min-width: 32px;
    display: inline-block;
    position: absolute;
    right: 0;
  }

  /* fix wrong badge display for firefox browser */
  code > table pre::before {
    display: none;
  }
</style>
</head>
<body>



























































































































<header class="site-header " role="banner">

  <div class="wrapper">
    <div class="site-header-inner">
<span class="site-brand"><a class="site-brand-inner" rel="author" href="/">
  <img class="site-favicon" title="LeeJellan" src="/assets/images/favicon.png" onerror="this.style.display='none'">
  LeeJellan
</a>
</span><nav class="site-nav">
          <input type="checkbox" id="nav-trigger" class="nav-trigger">
          <label for="nav-trigger">
            <span class="menu-icon">
              <svg viewbox="0 0 18 15" width="18px" height="15px">
                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
              </svg>
            </span>
          </label>

          <div class="trigger">
<a class="page-link" href="/about.html">ABOUT</a><a class="page-link" href="/categories.html">CATEGORIES</a><a class="page-link" href="/">HOME</a>




</div>
        </nav>
</div>
  </div>
</header>

<script>
  function initHeader() {
    var lastScrollY = getScrollPos().y;
    var documentElement = document.documentElement;

    function storeScrollData() {
      var y = getScrollPos().y;var scrollStatus = "";

      if (y <= 0) {
        scrollStatus = "top";
      } else if ((window.innerHeight + y) >= document.body.offsetHeight) {
        scrollStatus = "bottom";
      } else {
        var isScrollDown = (y - lastScrollY > 0) ? true : false;
        scrollStatus = isScrollDown ? "down" : "up";
      }

      lastScrollY = y;
      documentElement.setAttribute("data-scroll-status", scrollStatus);
    }

    window.addEventListener('scroll', function(e) {
      storeScrollData();
    });

    storeScrollData();
  }
  document.addEventListener('DOMContentLoaded', initHeader);
</script>
















































































































































<script>
  function hashLocate(hashValue) {
    hashValue = hashValue.replace(/^.*#h-/, '');
    hashValue = decodeURIComponent(hashValue);
    var element = document.getElementById(hashValue);

    if (!element) {
      return;
    }

    var header = document.querySelector('header.site-header');
    var headerRect = header.getBoundingClientRect();
    var headerTop = Math.floor(headerRect.top);
    var headerHeight = Math.floor(headerRect.height);
    var scrollPos = getScrollPos();
    var offsetY = element.offsetTop - (headerTop + headerHeight + 20);

    if (offsetY == scrollPos.y) {
      return;
    }

    if (headerTop == 0  && offsetY > scrollPos.y) {
      offsetY += headerHeight + 2;
    } else if (headerTop < 0  && offsetY < scrollPos.y) {
      offsetY -= headerHeight - 2;
    }

    smoothScrollTo(offsetY);
  }

  // The first event occurred
  window.addEventListener('load', function(event) {
    if (window.location.hash) {
      hashLocate(window.location.hash);
    }
  });

  // The first event occurred
  window.addEventListener('click', function(event) {
    if (event.target.tagName.toLowerCase() == 'a') {
      hashLocate(event.target.getAttribute('href'));
    }
  });
</script>
<div class="theme-toggle">
  <input type="checkbox" id="theme-switch">
  <label for="theme-switch">
    <div class="toggle"></div>
    <div class="names">
      <p class="light">Light</p>
      <p class="dark">Dark</p>
    </div>
  </label>
</div>




<script>
  (function() {
    var sw = document.getElementById('theme-switch');
    var html = document.getElementsByTagName('html')[0];
    var nightModeOption = ('auto' || 'auto').toLowerCase();
    var storage = nightModeOption === 'manual'
        ? localStorage
        : sessionStorage;
    var themeData = loadThemeData();

    function saveThemeData(data) {
      storage.setItem('theme', JSON.stringify(data));
    }

    function loadThemeData() {
      var data = storage.getItem('theme');
      try {
        data = JSON.parse(data ? data : '');
      } catch(e) {
        data = { nightShift: undefined, autoToggleAt: 0 };
        saveThemeData(data);
      }
      return data;
    }

    function handleThemeToggle(nightShift) {
      themeData.nightShift = nightShift;
      saveThemeData(themeData);
      html.dataset.theme = nightShift ? 'dark' : 'light';
      setTimeout(function() {
        sw.checked = nightShift ? true : false;
      }, 50);
    }

    function autoThemeToggle() {
      // Next time point of theme toggle
      var now = new Date();
      var toggleAt = new Date();
      var hours = now.getHours();
      var nightShift = hours >= 19 || hours <=7;

      if (nightShift) {
        if (hours > 7) {
          toggleAt.setDate(toggleAt.getDate() + 1);
        }
        toggleAt.setHours(7);
      } else {
        toggleAt.setHours(19);
      }

      toggleAt.setMinutes(0);
      toggleAt.setSeconds(0);
      toggleAt.setMilliseconds(0)

      var delay = toggleAt.getTime() - now.getTime();

      // auto toggle theme mode
      setTimeout(function() {
        handleThemeToggle(!nightShift);
      }, delay);

      return {
        nightShift: nightShift,
        toggleAt: toggleAt.getTime()
      };
    }

    // Listen the theme toggle event
    sw.addEventListener('change', function(event) {
      handleThemeToggle(event.target.checked);
    });

    if (nightModeOption == 'auto') {
      var data = autoThemeToggle();

      // Toggle theme by local setting
      if (data.toggleAt > themeData.autoToggleAt) {
        themeData.autoToggleAt = data.toggleAt;
        handleThemeToggle(data.nightShift);
      } else {
        handleThemeToggle(themeData.nightShift);
      }
    } else if (nightModeOption == 'manual') {
      handleThemeToggle(themeData.nightShift);
    } else {
      var nightShift = themeData.nightShift;
      if (nightShift === undefined) {
        nightShift = nightModeOption === 'on';
      }
      handleThemeToggle(nightShift);
    }
  })();
</script>
<div id="click-to-top" class="click-to-top">
  <i class="fa fa-arrow-up"></i>
</div>
<script>
  (function () {
    const clickToTop = document.getElementById('click-to-top');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 100) {
        clickToTop.classList.add('show')
      }else {
        clickToTop.classList.remove('show')
      }
    });
    clickToTop.addEventListener('click', () => {
      window.smoothScrollTo(0);
    });
  })();
</script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="framework">
  <section class="main">

     <div class="post">
  <section>









<header class="post-header">
  <h1 class="post-title p-name" itemprop="name headline">TIL) Spring Security 1 (Í∏∞Ï¥à)</h1>
  <h2 class="post-subtitle">ÏΩîÎìúÏä§ÌÖåÏù¥Ï∏† Î∞±ÏóîÎìú Î∂ÄÌä∏Ï∫†ÌîÑ D+91</h2>

  <p class="post-meta">
    <time class="dt-published" datetime="2022-11-18T00:00:00+09:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Nov 18, 2022
    </time>

    
    
































    <span class="post-reading-time left-vsplit"><i class="fa fa-clock-o"></i> About 21 mins</span>
  </p>
<div class="post-tags">
<a class="post-tag" href="/tags.html#TIL">#TIL</a><a class="post-tag" href="/tags.html#%EB%B6%80%ED%8A%B8%EC%BA%A0%ED%94%84">#Î∂ÄÌä∏Ï∫†ÌîÑ</a><a class="post-tag" href="/tags.html#%EC%BD%94%EB%93%9C%EC%8A%A4%ED%85%8C%EC%9D%B4%EC%B8%A0">#ÏΩîÎìúÏä§ÌÖåÏù¥Ï∏†</a>
</div></header>
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="post-content e-content" itemprop="articleBody">

      <p><img src="https://user-images.githubusercontent.com/95069395/217755555-86f7d3b8-876f-4e34-ba20-7f43c76e8f33.gif" alt="image" class="align-left" style="max-width: 100%"></p>

<p>ÏòàÏ†ÑÎ≥¥Îã§ Ïõî-Í∏à ÏãúÍ∞ÑÏù¥ Ï†ïÎßê Îπ®Î¶¨Í∞ÑÎã§.<br>
Í∑∏ÎßåÌÅº Í≥µÎ∂ÄÌïòÎäî ÏãúÍ∞ÑÏùÑ Ï¶êÍ∏∞Í≥† ÏûàÏúºÎãà ÏãúÍ∞ÑÎèÑ Îπ®Î¶¨Í∞ÄÎäî Í≤É Í∞ôÎã§.</p>

<p>Ïò§ÎäòÎèÑ Ïù¥Î≤àÏ£ºÏùò ÎßàÏßÄÎßâÏù¥Îãà ÎßåÌÅº<br>
Îçî ÏßëÏ§ëÌï¥ÏÑú Í≥µÎ∂ÄÌï¥Î≥¥Ïûê !</p>

<hr>

<p>Ïò§ÎäòÏùÄ Spring SecurityÏóê ÎåÄÌï¥ Í≥µÎ∂ÄÌïòÎäî ÎÇ†Ïù¥Îã§.<br>
Îã§ÏùåÏ£ºÏóêÎèÑ Í≥ÑÏÜç Í≥µÎ∂ÄÌï† Í≤É Í∞ôÍ≥†<br>
Ïò§ÎäòÏùÄ Í∏∞Î≥∏ Íµ¨Ï°∞ÏôÄ Ïõπ ÏöîÏ≤≠ Ï≤òÎ¶¨ ÌùêÎ¶ÑÏóêÎåÄÌï¥ Í≥µÎ∂ÄÌï¥Î≥¥Î†§ÌïúÎã§.</p>

<h2 id="spring-security">Spring Security</h2>

<p><strong>Spring SecurityÎûÄ ?</strong><br>
Spring MVC Í∏∞Î∞ò Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùò Ïù∏Ï¶ù,Ïù∏Í∞Ä Í∏∞Îä•ÏùÑ<br>
ÏßÄÏõêÌïòÎäî Î≥¥Ïïà ÌîÑÎ†àÏûÑÏõåÌÅ¨Ïù¥Îã§.</p>

<p>InterceptorÎÇò Servlet FilterÍ≥º Í∞ôÏùÄ Î≥¥Ïïà Í∏∞Îä•ÏùÑ<br>
ÏßÅÏ†ë Íµ¨ÌòÑÌï† Ïàò ÏûàÏßÄÎßå Spring SecurityÏóêÏÑú ÏïàÏ†ïÏ†ÅÏúºÎ°ú ÏßÄÏõêÌïòÍ≥† ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê<br>
Spring MVCÎ•º Í∏∞Î∞òÏúºÎ°úÌïúÎã§Î©¥ Spring SecurityÎ•º Ïù¥Ïö©ÌïòÎäîÍ≤å ÏïàÏ†ÑÌïú ÏÑ†ÌÉùÏù¥Îùº Ìï† Ïàò ÏûàÎã§.</p>

<p><strong>Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞Î•º Ïù¥Ïö©ÌïúÎã§Î©¥ ?</strong></p>
<ol>
  <li>Îã§ÏñëÌïú Ïú†ÌòïÏùò ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ù Í∏∞Îä• Ï†ÅÏö© Í∞ÄÎä• (Ìèº Î°úÍ∑∏Ïù∏, ÌÜ†ÌÅ∞, OAuth 2Í∏∞Î∞ò Ïù∏Ï¶ù)</li>
  <li>Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏÇ¨Ïö©ÏûêÏùò Ïó≠Ìï†Ïóê Îî∞Î•∏ Í∂åÌïú Î†àÎ≤® Ï†ÅÏö©</li>
  <li>Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóêÏÑú Ï†úÍ≥µÌïòÎäî Î¶¨ÏÜåÏä§ ÎåÄÌïú Ï†ëÍ∑º Ï†úÏñ¥</li>
  <li>ÎØºÍ∞êÌïú Ï†ïÎ≥¥Ïóê ÎåÄÌïú Îç∞Ïù¥ÌÑ∞ ÏïîÌò∏Ìôî</li>
  <li>ÏùºÎ∞òÏ†ÅÏúºÎ°ú ÏïåÎ†§ÏßÑ Ïõπ Î≥¥Ïïà Í≥µÍ≤© Ï∞®Îã®</li>
</ol>

<p>Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞ Í¥ÄÎ†® Ïö©Ïñ¥Î•º ÎØ∏Î¶¨ ÏàôÏßÄÌïòÍ≥† <br>
Î≥∏Í≤©Ï†ÅÏù∏ ÎÇ¥Ïö©ÏùÑ ÏÇ¥Ìé¥Î≥¥Î©¥ ÎèÑÏõÄÏù¥ Îê† Í≤ÉÏù¥Îã§.</p>
<ol>
  <li>
<strong>Principal (Ï£ºÏ≤¥)</strong><br>
-&gt; Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóêÏÑú ÏûëÏóÖÏùÑ ÏàòÌñâÌï† Ïàò ÏûàÎäî ÏÇ¨Ïö©Ïûê,ÎîîÎ∞îÏù¥Ïä§,ÏãúÏä§ÌÖú Îì±Ïù¥ Îê† Ïàò ÏûàÎã§.<br>
Ïù∏Ï¶ù ÌîÑÎ°úÏÑ∏Ïä§Í∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÏàòÌñâÎêú ÏÇ¨Ïö©ÏûêÏùò Í≥ÑÏ†ï Ï†ïÎ≥¥Î•º ÏùòÎØ∏Ìï®.</li>
  <li>
<strong>Authentication (Ïù∏Ï¶ù)</strong><br>
-&gt; Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùÑ ÏÇ¨Ïö©ÌïòÎäî ÏÇ¨Ïö©ÏûêÍ∞Ä Î≥∏Ïù∏Ïù¥ ÎßûÏùåÏùÑ Ï¶ùÎ™ÖÌïòÎäî Ï†àÏ∞®</li>
  <li>
<strong>Authorization (Ïù∏Í∞Ä)</strong><br>
-&gt; Ïù∏Ï¶ùÏù¥ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÏàòÌñâÎêú ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÌïòÎÇò Ïù¥ÏÉÅÏùò Í∂åÌïúÏùÑ Î∂ÄÏó¨Ìï®.<br>
ÌäπÏ†ï Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏóê ÌäπÏ†ï Î¶¨ÏÜåÏä§Ïóê Ï†ëÍ∑ºÌï† Ïàò ÏûàÍ≤å ÌóàÍ∞ÄÌïòÎäî Í≥ºÏ†ïÏùÑ ÏùòÎØ∏ÌïúÎã§.</li>
  <li>
<strong>Access Control (Ï†ëÍ∑ºÏ†úÏñ¥)</strong><br>
-&gt; ÏÇ¨Ïö©ÏûêÍ∞Ä Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùò Î¶¨ÏÜåÏä§Ïóê Ï†ëÍ∑ºÌïòÎäî ÌñâÏúÑÎ•º Ï†úÏñ¥ÌïòÎäî Í≤ÉÏùÑ ÏùòÎØ∏ÌïúÎã§.</li>
  <li>
<strong>Credential (Ïã†Ïõê Ï¶ùÎ™ÖÏ†ïÎ≥¥)</strong><br>
-&gt; Ïù∏Ï¶ùÏùÑ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú ÏàòÌñâÌïòÍ∏∞ ÏúÑÌï¥ÏÑú ÏãùÎ≥ÑÌïòÍ∏∞ ÏúÑÌïú Ï†ïÎ≥¥.</li>
</ol>

<p><br></p>

<h3 id="spring-security-ÌùêÎ¶Ñ">Spring Security ÌùêÎ¶Ñ</h3>

<p>ÏÇ¨Ïö©Ìï¥Î≥¥Í∏∞Ïóê ÏïûÏÑú<br>
SSRÎ∞©ÏãùÏúºÎ°ú ÌÖåÏä§Ìä∏Î•º ÏßÑÌñâÌï† ÏòàÏ†ïÏù¥Îã§.<br>
Î≥ÑÎèÑÏùò htmlÏùÑ ÎßåÎì§Ïñ¥ÏÑú ÌÖåÏä§Ìä∏Î•º ÏßÑÌñâÌñàÍ≥†<br>
Form Login Î∞©ÏãùÏúºÎ°ú ÌÖåÏä§Ìä∏Î•º ÏßÑÌñâÌñàÎã§.</p>

<p>Í∞ÑÎã®Ìïú Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞Ïùò Î≥¥Ïïà Ï†ÅÏö© ÌùêÎ¶ÑÏùÑ ÏïåÍ≥† ÎÑòÏñ¥Í∞ÄÎ≥¥Ïûê.<br>
Ïö∞Î¶¨Îäî Î≥¥ÌÜµ ÏõπÏóêÏÑú ÏöîÏ≤≠ÏùÑ Î≥¥ÎÇ¥Î©¥ EndPointÎ•º Í±∞Ï≥ê Î¶¨ÏÜåÏä§Ïóê Ï†ëÍ∑ºÏùÑ ÌïúÎã§.</p>

<p>Servlet Í∏∞Î∞òÏùò Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖòÏùº Í≤ΩÏö∞ EndPointÏóê ÏöîÏ≤≠Ïù¥ ÎèÑÎã¨ÌïòÍ∏∞Ï†ÑÏóê ÏöîÏ≤≠ÏùÑ Í∞ÄÎ°úÏ±à ÌõÑ  <br>
Ïñ¥Îñ§ Ï≤òÎ¶¨Î•º Ìï† Ïàò ÏûàÎäî Ï†ÅÏ†àÌïú Ìè¨Ïù∏Ìä∏Î•º Ï†úÍ≥µÌï¥Ï§Ñ Ïàò ÏûàÎäî APIÍ∞Ä ÏûàÎã§.<br>
Í∑∏Í≤ÉÏùÄ Î∞îÎ°ú Servlet FilterÏù¥Îã§.</p>

<p>Servlet FilterÎ•º Ïû†Íπê Ï†ïÎ¶¨ÌïòÏûêÎ©¥</p>
<ol>
  <li>JavaÏóêÏÑú InterfaceÌòïÌÉúÎ°ú Ï†úÍ≥µÌïòÎäî APIÏù¥Îã§.</li>
  <li>ÏõπÏöîÏ≤≠ÏùÑ Í∞ÄÎ°úÏ±Ñ Ï†ÑÏ≤òÎ¶¨, ÏùëÎãµÏùÑ Ï†ÑÎã¨ÌïòÍ∏∞Ï†Ñ ÌõÑÏ≤òÎ¶¨Î•º Ìï† Ïàò ÏûàÎã§.</li>
</ol>

<p>Ïù¥Îü¨Ìïú Servlet FilterÎäî ÌïòÎÇò Ïù¥ÏÉÅÏùò ÌïÑÌÑ∞Îì§ÏùÑ Ïó∞Í≤∞Ìï¥<br>
Filter ChainÏùÑ Íµ¨ÏÑ±Ìï† Ïàò ÏûàÎã§.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/217755494-6f323f35-4c65-4604-bafd-b2b76f012217.png" alt="image" class="align-left" style="max-width: 40%"><br>
Ï∂úÏ≤ò - <a href="https://docs.spring.io/spring-security/reference/servlet/architecture.html">Spring Security Î†àÌçºÎü∞Ïä§</a></p>

<p><br></p>

<p>Filter ChainÏùò FilterÎì§ÏùÄ Ïö∞Î¶¨Í∞Ä Íµ¨ÌòÑÌïú ÏûëÏóÖÎì§ÏùÑ Ïã§ÌñâÌïú ÌõÑÏóê<br>
HttpServletÏùÑ Í±∞Ï≥ê DispatcherServletÏóê ÏöîÏ≤≠Ïù¥ Ï†ÑÎã¨ÎêòÏñ¥ÏßÑÎã§.</p>

<p>DispatcherServletÏùÄ Spring MVC Í≥ÑÏ∏µÍµ¨Ï°∞Ìï†Îïå ÎßéÏù¥ Î≥¥ÏïòÏùÑ Í≤ÉÏù¥Îã§.<br>
ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÏÑú Î∞õÏùÄ Î™®Îì† ÏöîÏ≤≠ÏùÑ Ï†ÅÌï©Ìïú Ïª®Ìä∏Î°§Îü¨Ïóê ÏúÑÏûÑÌï¥Ï£ºÎäî<br>
Spring MVCÏóêÏÑú ÏïÑÏ£º Ï§ëÏöîÌïú Ïó≠Ìï†ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÎäî ÎÖÄÏÑùÏù¥ÏòÄÎã§.</p>

<p>Ïó¨ÌïòÌäº Ïö∞Î¶¨Í∞Ä ÏïåÏïÑÏïºÌï† ÌïµÏã¨ÏùÄ DispatcherServletÏóê ÎèÑÎã¨ÌïòÍ∏∞ Ï†ÑÏóê<br>
Servlet FilterÍ∞Ä Í∞ÄÎ°úÏ±àÎã§Îäî Í≤ÉÏù¥Îã§.</p>

<p><br></p>

<p>Í∑∏Îüº Spring SecurityÏôÄ Servlet FilterÏôÄ Ïñ¥Îñ†Ìïú Í¥ÄÍ≥ÑÍ∞Ä ÏûàÎÉê?</p>

<p>Spring SecurityÏóêÏÑúÎäî Î≥¥ÏïàÍ≥º Í¥ÄÎ†®Îêú FilterÎ•º Ïù¥Ïö©Ìï¥ <br>
ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïóê ÏöîÏ≤≠ÏùÑ Ï§ëÍ∞ÑÏóê Í∞ÄÎ°úÏ±à Îí§ Ï∂îÍ∞ÄÏ†ÅÏúºÎ°ú ÏûëÏóÖÏùÑ Ìï† Ïàò ÏûàÎèÑÎ°ù ÎèÑÏôÄÏ§ÄÎã§.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/217755497-180fa8aa-0333-4278-9e1f-f78b50eea497.png" alt="image" class="align-left" style="max-width: 70%"><br>
Ï∂úÏ≤ò - <a href="https://docs.spring.io/spring-security/reference/servlet/architecture.html">Spring Security Î†àÌçºÎü∞Ïä§</a></p>

<p><br></p>

<p>Í∑∏Í≤ÉÏùÑ ÎèÑÏôÄÏ£ºÎäî ÌÅ¥ÎûòÏä§Îì§Ïù¥ Î∞îÎ°ú ÏúÑÏóêÏûàÎäî ÏïÑÌÇ§ÌÖçÏ≥êÏóêÏÑú Î≥¥Îäî<br>
DelegatingFilterProxyÏôÄ FilterChainProxyÏù¥Îã§. <br>
Ìï¥Îãπ ÌÅ¥ÎûòÏä§Îì§ÏùÄ Filter Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º Íµ¨ÌòÑÌïòÍ≥† ÏûàÏñ¥<br>
Servlet FilterÎ°úÏç®Ïùò Ïó≠Ìï†ÏùÑ ÏàòÌñâÌï¥ÌïúÎã§.</p>

<p>DelegatingFilterProxyÎäî Servlet Container ÏòÅÏùò FilterÏôÄ<br>
ApplicationContextÏóê BeanÏúºÎ°ú Îì±Î°ùÎêú FilterÎì§ÏùÑ Ïó∞Í≤∞Ìï¥Ï£ºÎäî Ïó≠Ìï†ÏùÑ Í∞ÄÏßÑÎã§.</p>

<p>FilterChainProxyÎäî Spring SecurityÎ•º ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌïú ÏßÑÏûÖÏ†êÏù¥Îã§.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/217755500-e971b26b-a1e4-4622-a442-2c6ebdd322ef.png" alt="image" class="align-left" style="max-width: 80%"><br>
Ï∂úÏ≤ò - <a href="https://docs.spring.io/spring-security/reference/servlet/architecture.html">Spring Security Î†àÌçºÎü∞Ïä§</a></p>

<p><br></p>

<p>ÏúÑÏùò Í∑∏Î¶ºÏóêÏÑú Î≥¥ÎìØÏù¥ Spring SecurityÏùò Filter ChainÏúºÎ°ú <br>
Î≥¥ÏïàÏùÑ ÏúÑÌïú ÏûëÏóÖÏùÑ Ï≤òÎ¶¨ÌïòÎäî ÌïÑÌÑ∞Ïùò Î™®ÏùåÏùÑ ÎßåÎì§Î©¥ <br>
FilterChainProxyÎ°ú Î∂ÄÌÑ∞ Ìï¥Îãπ FilterÎì§ÏùÑ ÏãúÏûëÌï† Ïàò ÏûàÍ≤åÎêòÏñ¥ÏßÑÎã§.</p>

<p>ÌïúÎßàÎîîÎ°ú FilterChainProxyÎ∂ÄÌÑ∞ Spring SecurityÏóêÏÑú Ï†úÍ≥µÌïòÎäî<br>
Î≥¥Ïïà FilterÎì§Ïù¥ ÌïÑÏöîÌïú ÏûëÏóÖÏùÑ ÏàòÌñâÌï¥Ï£ºÍ≤å ÎèÑÏôÄÏ£ºÎäî ÌÅ¥ÎûòÏä§Îùº Î≥¥Î©¥ÎêúÎã§.</p>

<p><br></p>

<h3 id="spring-security-Ïó∞ÏäµÌï¥Î≥¥Í∏∞">Spring Security Ïó∞ÏäµÌï¥Î≥¥Í∏∞</h3>

<p>ÏúÑÏùò Spring Security ÏöîÏ≤≠ ÌùêÎ¶ÑÏóê ÎåÄÌï¥ Ïñ¥ÎäêÏ†ïÎèÑ<br>
Ïù¥Ìï¥Í∞Ä ÎêòÏóàÎã§Î©¥, ÏïÑÎûò ÏΩîÎìúÎì§ÏùÑ Î≥¥Í≥†<br>
Ïñ¥Îäê Î∂ÄÎ∂ÑÏù∏ÏßÄ Ï†ïÌôïÌûàÎäî Î™∞ÎùºÎèÑ ÌùêÎ¶ÑÏùÄ ÌååÏïÖÏù¥ Í∞ÄÎä•ÌïòÎã§.</p>

<p>Ïö∞ÏÑ† Spring SecurityÎ•º ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌïú ÏùòÏ°¥ÎùºÏù¥Î∏åÎü¨Î¶¨Î•º Ï∂îÍ∞ÄÌï¥ÏïºÌïúÎã§.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span> <span class="err">'</span><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">:</span><span class="n">spring</span><span class="o">-</span><span class="n">boot</span><span class="o">-</span><span class="n">starter</span><span class="o">-</span><span class="n">security</span><span class="err">'</span>
</code></pre></div></div>
<p>build.gradleÏóê ÏùòÏ°¥ÎùºÏù¥Î∏åÎü¨Î•º Ï∂îÍ∞ÄÏãúÏºú ÎÜìÏúºÎ©¥ Ï§ÄÎπÑ ÎÅùÏù¥Îã§.</p>

<p>Ï≤òÏùåÏúºÎ°ú Ïö∞ÏÑ† ÏúÑÏóêÏÑú Î≥¥ÏïòÎçò<br>
SecurityFilterChainÏùÑ Íµ¨ÏÑ±Ìï¥Î≥¥Ïûê</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfiguration</span> <span class="o">{</span>
    
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">filterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">http</span>
                <span class="o">.</span><span class="na">csrf</span><span class="o">().</span><span class="na">disable</span><span class="o">()</span> <span class="c1">// csrf Í≥µÍ≤©Ïóê ÎåÄÌïú ÏÑ§Ï†ï ÎπÑÌôúÏÑ±Ìôî</span>
                <span class="o">.</span><span class="na">formLogin</span><span class="o">()</span><span class="c1">// Form Î°úÍ∑∏Ïù∏ Ïù∏Ï¶ù Î∞©Î≤ï</span>
                <span class="o">.</span><span class="na">loginPage</span><span class="o">(</span><span class="s">"/auths/login-form"</span><span class="o">)</span> <span class="c1">// Î°úÍ∑∏Ïù∏ Ïª§Ïä§ÌÖÄ ÌéòÏù¥ÏßÄ ÏÑ§Ï†ï (Ïö∞Î¶¨Í∞ÄÎßåÎì† Í≤ΩÎ°úÏÑ§Ï†ï)</span>
                <span class="o">.</span><span class="na">loginProcessingUrl</span><span class="o">(</span><span class="s">"/process_login"</span><span class="o">)</span><span class="c1">// Ïù∏Ï¶ùÏöîÏ≤≠ÏùÑ ÏàòÌñâÌï† ÏöîÏ≤≠ URL ÏÑ§Ï†ï (html formÌÉúÍ∑∏ÏóêÏÑú ÏöîÏ≤≠)</span>
                <span class="o">.</span><span class="na">failureUrl</span><span class="o">(</span><span class="s">"/auths/login-form?error"</span><span class="o">)</span><span class="c1">// Ïã§Ìå®Ïãú Î¶¨Îã§Ïù¥Î†âÌä∏Ìï† URL ÏßÄÏ†ï</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">logout</span><span class="o">()</span> <span class="c1">// Î°úÍ∑∏ÏïÑÏõÉ ÏÑ§Ï†ïÏúÑÌïú LogoutConfigurerÎ•º Î¶¨ÌÑ¥Ìï¥Ï§å</span>
                <span class="o">.</span><span class="na">logoutUrl</span><span class="o">(</span><span class="s">"/logout"</span><span class="o">)</span> <span class="c1">// Î°úÍ∑∏ÏïÑÏõÉ ÏöîÏ≤≠ url ÏÑ§Ï†ï (html formÌÉúÍ∑∏ÏóêÏÑú ÏöîÏ≤≠)</span>
                <span class="o">.</span><span class="na">logoutSuccessUrl</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span> <span class="c1">// ÏÑ±Í≥µÏãú Î¶¨Îã§Ïù¥Î†âÌä∏Ìï† Ïû•ÏÜå</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">exceptionHandling</span><span class="o">().</span><span class="na">accessDeniedPage</span><span class="o">(</span><span class="s">"/auths/access-denied"</span><span class="o">)</span> <span class="c1">// Í∂åÌïúÏù¥ ÏóÜÏùÑÎïå Î≥¥ÎÇº ÏöîÏ≤≠</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">authorizeHttpRequests</span><span class="o">(</span><span class="n">authorize</span> <span class="o">-&gt;</span>
                        <span class="n">authorize</span><span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/orders/**"</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="s">"ADMIN"</span><span class="o">)</span> <span class="c1">// Ìï¥Îãπ Í≤ΩÎ°úÏóê ADMIN Í∂åÌïúÎßå Ï†ëÍ∑ºÍ∞ÄÎä•</span>
                                <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/members/my-page"</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="s">"USER"</span><span class="o">)</span> <span class="c1">// Ìï¥Îãπ Í≤ΩÎ°úÏóê USER Í∂åÌïúÎßå Ï†ëÍ∑ºÍ∞ÄÎä•</span>
                                <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span> <span class="c1">// ÏïûÏóêÏßÄÏ†ïÌïú URLÏùÑ Ï†úÏô∏ÌïúÍ≤É Ï†ëÍ∑º Î™®ÎëêÍ∞ÄÎä•</span>
                <span class="o">);</span>
<span class="c1">//                .authorizeHttpRequests() // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò ÏöîÏ≤≠Ïù¥ Îì§Ïñ¥Ïò§Î©¥ Ï†ëÍ∑ºÍ∂åÌïúÏùÑ ÌôïÏù∏ÌïòÍ≤†Îã§Í≥† Ï†ïÏùò</span>
<span class="c1">//                .anyRequest() // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò Î™®Îì† ÏöîÏ≤≠Ïóê ÎåÄÌï¥ Ï†ëÍ∑ºÏùÑ ÌóàÏö©</span>
<span class="c1">//                .permitAll(); // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò Î™®Îì† ÏöîÏ≤≠Ïóê ÎåÄÌï¥ Ï†ëÍ∑ºÏùÑ ÌóàÏö©</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Í∏∞Î≥∏Ï†ÅÏù∏ Íµ¨ÏÑ±Î∞©Î≤ïÏùÄ SecurityFilterChain ÌÅ¥ÎûòÏä§ ÌÉÄÏûÖÏùÑ Î∞òÌôòÌïòÎäî<br>
Î©îÏÑúÎìúÎ•º ÌïòÎÇò ÎßåÎì§Ïñ¥ filterÏùò Ï†ïÎ≥¥Î•º ÎÑ£Ïñ¥Ï£ºÎäî Í≤ÉÏù¥Îã§.<br>
Í∑∏Î¶¨Í≥† Ìï¥Îãπ Î©îÏÑúÎìúÎ•º Spring ContainerÏóê BeanÏúºÎ°ú Îã¥ÏïÑÏ£ºÎ©¥ÎêúÎã§.</p>

<p>ÎπàÏúºÎ°ú Îã¥ÏïÑÏ£ºÎ©¥ ÏïÑÍπå ÏúÑÏóêÏÑú ÏñòÍ∏∞ÌñàÎçò<br>
DelegatingFilterProxy ÌÅ¥ÎûòÏä§Ïóê ÏùòÌï¥<br>
ÏÑúÎ∏îÎ¶ø Ïª®ÌÖåÏù¥ÎÑà ÏòÅÏó≠Ïùò ÌïÑÌÑ∞ÏôÄ Ïä§ÌîÑÎßÅ Ïª®ÌÖåÏù¥ÎÑàÏùò ÎπàÏúºÎ°ú Îì±Î°ùÎêú ÌïÑÌÑ∞Î•º<br>
Ïó∞Í≤∞Ìï¥Ï£ºÎäî Î∏åÎ¶øÍ∞Ä ÏÉùÍ∏¥Îã§Í≥† ÏòàÏÉÅÌï¥Î≥º Ïàò ÏûàÏùÑ Í≤É Í∞ôÎã§.</p>

<p>Í∑∏Î¶¨Í≥† SSRÎ∞©ÏãùÏùò FormLoginÏùÑ ÏÇ¨Ïö©ÌïúÎã§Í≥† Í∞ÄÏ†ïÌñàÏúºÎãà<br>
Ï≤´Î≤àÏß∏ ÌïÑÌÑ∞Î°úÎäî Î°úÍ∑∏Ïù∏Ïóê Ìï¥ÎãπÌïòÎäî ÎÇ¥Ïö©Îì§  <br>
ÎëêÎ≤àÏß∏ ÌïÑÌÑ∞Î°úÎäî Î°úÍ∑∏ÏïÑÏõÉÏóê Ìï¥ÎãπÌïòÎäî ÎÇ¥Ïö©Îì§ <br>
ÏÑ∏Î≤àÏß∏Î°úÎäî Í∂åÌïúÏù¥ ÏóÜÏùÑÎïå Ï≤òÎ¶¨ÌïòÎäî ÎÇ¥Ïö©<br>
ÎÑ§Î≤àÏß∏Î°úÎäî ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏöîÏ≤≠ÏóêÎî∞Î•∏ Í∂åÌïú ÏÑ§Ï†ïÏóê ÎåÄÌïú ÎÇ¥Ïö©<br>
Ïù¥Î†áÍ≤å Í∞ÅÍ∞Å ÌïÑÌÑ∞Îì§ÏùÑ ÌïòÎÇòÏùò ÌïÑÌÑ∞Ï≤¥Ïù∏ÏúºÎ°ú .build(); ÌïòÏó¨ Î∞òÌôòÌïòÎ©¥<br>
Ìï¥Îãπ ÎÇ¥Ïö©Ïóê Îî∞Îùº Ïù∏Ï¶ùÍ≥º Í∂åÌïú Î∂ÄÏó¨Í∞Ä Ïù¥Î£®Ïñ¥Ïßà Ïàò ÏûàÎã§.</p>

<p><br></p>

<h4 id="in-memoryÎ°ú-Ïù∏Ï¶ù-Ìï¥Î≥¥Í∏∞">In MemoryÎ°ú Ïù∏Ï¶ù Ìï¥Î≥¥Í∏∞</h4>

<p>DBÎ•º Ïù¥Ïö©ÌïòÏßÄ ÏïäÎäî Ïù∏Ï¶ùÎ∞©Î≤ïÏùÑ ÌïúÎ≤à Ïó∞ÏäµÌï¥Î≥¥Ïûê</p>

<p><strong><span style="color:#F04965"> 1). Îã®ÏàúÌïòÍ≤å Í≥†Ï†ïÌï¥ÏÑú Îì±Î°ùÌï¥ Ïù∏Ï¶ùÍ≥º Í∂åÌïúÏùÑ Ï£ºÎäî Î∞©Ïãù </span></strong></p>

<p>SecurityConfiguration ÌÅ¥ÎûòÏä§ ÏïÑÎûòÏóê <br>
UserDetailsManager Î∞òÌôòÌïòÎäî Bean Í∞ùÏ≤¥Î•º ÎßåÎì§Ïñ¥Ï£ºÏóàÎã§.</p>

<p>UserDetailsManager ÎùºÎäî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º <br>
Íµ¨ÌòÑÌïú Í∞ùÏ≤¥Î•º BeanÏúºÎ°ú Îì±Î°ùÌï¥Ï£ºÎ©¥ Ìï¥Îãπ Ï†ïÎ≥¥Î°ú Îì±Î°ùÎêú<br>
ÏÇ¨Ïö©ÏûêÎì§ÏùÄ Ï†ïÎ≥¥Ïóê Ìï¥ÎãπÌïòÎäî Ïù∏Ï¶ùÍ≥º Í∂åÌïúÏùÑ Í∞ÄÏßÄÍ≤å ÎêúÎã§.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nd">@Bean</span>
 <span class="kd">public</span> <span class="nc">UserDetailsManager</span> <span class="nf">userDetailsService</span><span class="o">(){</span>
     <span class="nc">UserDetails</span> <span class="n">user</span> <span class="o">=</span> <span class="nc">User</span><span class="o">.</span><span class="na">withDefaultPasswordEncoder</span><span class="o">()</span> <span class="c1">// password ÏïîÌò∏Ìôî</span>
             <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="s">"dhfif718@naver.com"</span><span class="o">)</span> <span class="c1">// ÏãùÎ≥ÑÌïòÎäî ÏÇ¨Ïö©Ïûê ÏïÑÏù¥Îîî Í∞í</span>
             <span class="o">.</span><span class="na">password</span><span class="o">(</span><span class="s">"1111"</span><span class="o">)</span>
             <span class="o">.</span><span class="na">roles</span><span class="o">(</span><span class="s">"USER"</span><span class="o">)</span> <span class="c1">// Í∂åÌïúÏßÄÏ†ï</span>
             <span class="o">.</span><span class="na">build</span><span class="o">();</span>
     <span class="nc">UserDetails</span> <span class="n">admin</span> <span class="o">=</span> <span class="nc">User</span><span class="o">.</span><span class="na">withDefaultPasswordEncoder</span><span class="o">()</span>
             <span class="o">.</span><span class="na">username</span><span class="o">(</span><span class="s">"admin@naver.com"</span><span class="o">)</span>
             <span class="o">.</span><span class="na">password</span><span class="o">(</span><span class="s">"2222"</span><span class="o">)</span>
             <span class="o">.</span><span class="na">roles</span><span class="o">(</span><span class="s">"ADMIN"</span><span class="o">)</span>
             <span class="o">.</span><span class="na">build</span><span class="o">();</span>

     <span class="k">return</span> <span class="k">new</span> <span class="nf">InMemoryUserDetailsManager</span><span class="o">(</span><span class="n">user</span><span class="o">,</span><span class="n">admin</span><span class="o">);</span>
 <span class="o">}</span>
</code></pre></div></div>
<p>InMemoryUserDetailsManager Íµ¨ÌòÑÏ≤¥Î°ú Íµ¨ÏÑ± Ï†ïÎ≥¥Î•º ÎÑòÍ≤®Ï£ºÎ©¥ ÎêúÎã§.<br>
Íµ¨ÏÑ± Ï†ïÎ≥¥Î•º ÎßåÎìúÎäî Î∞©Î≤ïÏùÄ UserDetails Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º ÏÉÅÏÜçÎ∞õÎäî<br>
User ÌÅ¥ÎûòÏä§Î•º Ïù¥Ïö©Ìï¥ ÎßåÎì§ ÏàòÏûàÎã§.</p>

<p>ÎßåÏïΩ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ÏóêÏÑú form login Î∞©ÏãùÏúºÎ°ú Î°úÍ∑∏Ïù∏ ÏöîÏ≤≠Ïù¥ Ïò®Îã§Î©¥<br>
Ìï¥Îãπ Íµ¨ÏÑ±Ï†ïÎ≥¥Î•º Í∞ÄÏßÑ ÏÇ¨Ïö©ÏûêÎäî Î°úÍ∑∏Ïù∏Ïù¥ ÎêòÎ©∞<br>
Í∂åÌïúÏùÑ Í∞ÅÍ∞Å USER, ADMINÏúºÎ°ú Î∂ÄÏó¨Î∞õÍ≤å ÎêòÏñ¥ÏßÑÎã§.</p>

<p>ÏúÑÏóê ÏûàÎäî Ï†ïÎ≥¥Îäî DBÎ•º Ïù¥Ïö©Ìïú Í≤ÉÎèÑ ÏïÑÎãàÎ©∞<br>
Îã®ÏàúÌïòÍ≤å UserDetailsManager ÌÉÄÏûÖÏùò BeanÏùÑ ÎßåÎì§Ïñ¥ Ï£º ÏóàÏùÑ ÎøêÏù∏Îç∞<br>
Spring SecurityÎäî Ìï¥Îãπ Ï†ïÎ≥¥Î•º Í∞ÄÏßÑ ÏÇ¨Ïö©ÏûêÍ∞Ä Î°úÍ∑∏Ïù∏ÏùÑ ÌïòÎ©¥<br>
Ïù∏Ï¶ùÏùÑ Ìï¥Ï£ºÍ≥† Í∂åÌïúÏùÑ Î∂ÄÏó¨Ìï¥Ï§Ñ Ïàò ÏûàÎäî Í≤ÉÏù¥Îã§.</p>

<p>Ïó¨Í∏∞ÏÑú <strong>User.withDefaultPasswordEncoder()</strong> Î©îÏÑúÎìúÎ•º ÏÇ¨Ïö©ÌïòÎ©¥<br>
bcrypt Î∞©ÏãùÏúºÎ°ú passwordÎ•º ÏïîÌò∏ÌôîÌï¥Ï§ÄÎã§. Ï¶â, 1111,2222Î°ú Îì§Ïñ¥Ïò® Í∞íÏùÑ<br>
ÏïîÌò∏ÌôîÌïòÏó¨ Í¥ÄÎ¶¨Î•º ÌïúÎã§Îäî ÏùòÎØ∏Ïù¥Îã§.</p>

<p>ÎßåÏïΩ ÏΩîÎìúÎ°ú ÏπòÍ≤åÎêúÎã§Î©¥ <strong>Deprecated</strong> ÏÉÅÌÉúÎ°ú Î≥ÄÌïòÎäîÎç∞ (Í∞ÄÏö¥Îç∞Ï§Ñ Ï≥êÏßê)<br>
Ìï¥Îãπ APIÎäî Í∂åÏû•ÌïòÏßÄ ÏïäÎäîÎã§Îäî ÎúªÏù¥Îã§. Ïù¥ Í≤ΩÏö∞ÏóêÎäî Í≥†Ï†ïÏúºÎ°ú ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÍ∏∞Ïóê<br>
Í≥†Ï†ïÌï¥ÏÑú ÏÇ¨Ïö©ÌïòÏßÄ ÎßêÎùºÎäî ÏùòÎØ∏ÏóêÏÑú DeprecatedÎ°ú Î≥ÄÌïú Í≤ÉÏùÑ Î≥º Ïàò ÏûàÎã§.</p>

<p><br></p>

<p><strong><span style="color:#F04965"> 2). ÌöåÏõê Í∞ÄÏûÖÏùÑ Ïù¥Ïö©Ìï¥ Îì±Î°ùÌïòÍ∏∞ </span></strong></p>

<p>Í∏∞Î≥∏Ï†ÅÏúºÎ°ú passwordÎ•º ÏïîÌò∏ÌôîÎ•º Ìï¥ÏïºÌïúÎã§.<br>
ÏïîÌò∏ÌôîÎ•º ÌïòÍ∏∞ÏúÑÌï¥ ÏúÑÏóêÏÑú Ïù¥Ïö©ÌñàÎçò bcrpty Î∞©ÏãùÏúºÎ°ú ÏïîÌò∏ÌôîÎ•º <br>
ÎèÑÏôÄÏ£ºÎäî APIÍ∞Ä ÏûàÎã§.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="cm">/*
 * PasswordEncoder Bean Îì±Î°ù
 * ÏïîÌò∏ÌôîÎ•º Ìï¥ÏïºÌïúÎã§. Spring SecurityÏóêÏÑú ÏßÄÏõêÌïòÎäî Default = bcrypt
 * */</span>
 <span class="nd">@Bean</span>
 <span class="kd">public</span> <span class="nc">PasswordEncoder</span> <span class="nf">passwordEncoder</span><span class="o">(){</span>
     <span class="k">return</span> <span class="nc">PasswordEncoderFactories</span><span class="o">.</span><span class="na">createDelegatingPasswordEncoder</span><span class="o">();</span>
 <span class="o">}</span>
</code></pre></div></div>
<p>SecurityConfiguration ÌÅ¥ÎûòÏä§Ïóê<br>
PasswordEncoder Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌÉÄÏûÖ Í∞ùÏ≤¥Î•º BeanÏúºÎ°ú Îì±Î°ùÌï¥Ï£ºÍ≥†<br>
ÌöåÏõêÍ∞ÄÏûÖÏãú ÏÇ¨Ïö©Ìï† ÏàòÏûàÎã§.</p>

<p>ÌöåÏõêÍ∞ÄÏûÖÌï† Í≤ΩÏö∞ ControllerÎäî Íµ¨ÏÑ±ÎêòÏñ¥ ÏûàÎã§Í≥† Í∞ÄÏ†ïÌïòÍ≥†<br>
Service ÏΩîÎìúÎ•º ÌôïÏù∏Ìï¥Î≥¥Ïûê</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
*  InMemory ÏÇ¨Ïö©ÏùÑ ÏúÑÌïú ÎπàÏ£ºÏûÖ
* */</span>
<span class="c1">//@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaConfigurationV1</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">MemberService</span> <span class="nf">inMemoryMemberService</span><span class="o">(</span><span class="nc">UserDetailsManager</span> <span class="n">userDetailsManager</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">InMemoryMemberService</span><span class="o">(</span><span class="n">userDetailsManager</span><span class="o">,</span><span class="n">passwordEncoder</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>MemberServiceÎùºÎäî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÌÉÄÏûÖÏúºÎ°ú Í∞ùÏ≤¥Î•º BeanÏúºÎ°ú Îì±Î°ùÌï¥Ï§ÄÎã§.</p>

<p>InMemoryMemberSerivceÏóê Ïö∞Î¶¨Í∞Ä Ïù¥Ïö©Ìï¥ÏïºÌï†<br>
UserDetailsManagerÏôÄ PasswordEncoderÎ•º Îß§Í∞úÎ≥ÄÏàòÎ°ú ÎÑ£Ïñ¥<br>
ÏÉùÏÑ±ÏûêÎ°ú Î∞òÌôòÌïòÍ≤å ÎêòÏñ¥ÏßÑÎã§.</p>

<p>Í∑∏Îüº BeanÏúºÎ°ú InMemoryMemberServiceÏùÑ Íµ¨ÌòÑÏ≤¥Î°ú<br>
ÏùòÏ°¥ÏÑ± Ï£ºÏûÖÌïòÏó¨ ControllerÏóêÏÑú Ïù¥Ïö©Ïù¥ Í∞ÄÎä•ÌïòÎã§..</p>

<p><br></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InMemoryMemberService</span> <span class="kd">implements</span> <span class="nc">MemberService</span> <span class="o">{</span>

   <span class="kd">private</span> <span class="kd">final</span> <span class="nc">UserDetailsManager</span> <span class="n">userDetailsManager</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">;</span>

   <span class="kd">public</span> <span class="nf">InMemoryMemberService</span><span class="o">(</span><span class="nc">UserDetailsManager</span> <span class="n">userDetailsManager</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">userDetailsManager</span> <span class="o">=</span> <span class="n">userDetailsManager</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">passwordEncoder</span> <span class="o">=</span> <span class="n">passwordEncoder</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="nc">Member</span> <span class="nf">createMember</span><span class="o">(</span><span class="nc">Member</span> <span class="n">member</span><span class="o">)</span> <span class="o">{</span>

      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">GrantedAuthority</span><span class="o">&gt;</span> <span class="n">authorities</span> <span class="o">=</span> <span class="n">createAuthorities</span><span class="o">(</span><span class="nc">Member</span><span class="o">.</span><span class="na">MemberRole</span><span class="o">.</span><span class="na">ROLE_USER</span><span class="o">.</span><span class="na">name</span><span class="o">());</span> <span class="c1">// Í∂åÌïú USERÎ°ú ÏÑ§Ï†ï</span>

      <span class="nc">String</span> <span class="n">encryptedPassword</span> <span class="o">=</span> <span class="n">passwordEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span> <span class="c1">// ÎπÑÎ∞ÄÎ≤àÌò∏ ÏïîÌò∏Ìôî ÏßÑÌñâ</span>

      <span class="nc">UserDetails</span> <span class="n">userDetails</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">encryptedPassword</span><span class="o">,</span> <span class="n">authorities</span><span class="o">);</span> <span class="c1">// username, password, Í∂åÌïú Ï†ïÎ≥¥Î°ú Ïú†Ï†Ä ÏÉùÏÑ±</span>
      <span class="n">userDetailsManager</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">userDetails</span><span class="o">);</span> <span class="c1">// ÏÉùÏÑ±Ìïú Ïú†Ï†ÄÏ†ïÎ≥¥ Îì±Î°ù</span>

      <span class="k">return</span> <span class="n">member</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">GrantedAuthority</span><span class="o">&gt;</span> <span class="nf">createAuthorities</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">roles</span><span class="o">)</span> <span class="o">{</span>

      <span class="k">return</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">roles</span><span class="o">)</span>
              <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">role</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">SimpleGrantedAuthority</span><span class="o">(</span><span class="n">role</span><span class="o">))</span>
              <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Ïó¨Í∏∞ÏÑú ÌöåÏõêÍ∞ÄÏûÖÏùÑ ÏúÑÌïú ÏÑúÎπÑÏä§ Î°úÏßÅ createMember <br>
ÏïàÏùò ÎÇ¥Ïö©ÏùÑ Îì§Ïó¨Îã§Î≥¥Î©¥ÎêúÎã§.</p>

<p>Ï≤´Î≤àÏß∏Î°ú Í∂åÌïúÏóê ÎåÄÌïú ÎÇ¥Ïö©ÏùÑ ÏÑ§Ï†ïÌïòÍ∏∞ÏúÑÌï¥<br>
new SimpleGrantedAuthority();ÏùÑ Ïù¥Ïö©Ìï¥ Í∞ùÏ≤¥Î•º<br>
List ÌòïÌÉúÎ°ú Îã¥ÏïÑÎëî authoritiesÎ•º ÎßåÎì§ÏóàÎã§.</p>

<p>ÎëêÎ≤àÏß∏Î°ú ÏïîÌò∏ÌôîÎ•º ÏúÑÌï¥ DIÎ∞õÏùÄ passwordEncoderÏùò Î©îÏÑúÎìúÏù∏<br>
.encode();Î•º Ïù¥Ïö©Ìï¥ ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÎÑòÍ≤®Ï§ò<br>
bcrypt Î∞©ÏãùÏúºÎ°ú ÏïîÌò∏ÌôîÌïòÏó¨ String ÌÉÄÏûÖÏúºÎ°ú Î∞õÏïÑÎëêÏóàÎã§.</p>

<p>ÎßàÏßÄÎßâÏúºÎ°ú new User();Î•º Ïù¥Ïö©Ìï¥<br>
ÏúÑÏóêÏÑú Í≥†Ï†ïÏúºÎ°ú Íµ¨ÏÑ±Ï†ïÎ≥¥Î•º Íµ¨ÏÑ±Ìïú Í≤É Ï≤òÎüº</p>

<p>username, password, rolesÎ•º ÏÉùÏÑ±ÏûêÎ°ú ÎÑòÍ≤®<br>
UserDetails ÌÉÄÏûÖÏùò Í∞ùÏ≤¥Î°ú ÎßåÎì§Ïñ¥<br>
ÏúÑÏóêÏÑú DI Î∞õÏùÄ userDetailsMangerÏùò Î©îÏÑúÎìú<br>
createUser();Ïùò Îß§Í∞úÎ≥ÄÏàòÎ°ú ÎÑòÍ≤®Ï£ºÍ≤å ÎêòÎ©¥<br>
ÌöåÏõê Í∞ÄÏûÖÏùÑ Ìï†Îïå Ìï¥Îãπ Ï†ïÎ≥¥Î•º Í∞ÄÏßÑ MemberÍ∞Ä Ïù∏Ï¶ùÍ≥º Í∂åÌïúÏ†ïÎ≥¥Î•º<br>
Í∞ÄÏßÄÍ≤åÎêòÏñ¥ Î°úÍ∑∏Ïù∏Ìï†Îïå Ìï¥Îãπ Ï†ïÎ≥¥Î•º Í∞ÄÏßÑ ÏÇ¨Ïö©ÏûêÍ∞Ä Î°úÍ∑∏Ïù∏ÏùÑ ÌïúÎã§Î©¥<br>
Ïù∏Ï¶ùÏù¥ÎêòÏñ¥ ÏÑ§Ï†ïÌïú ROLE_USER Í∂åÌïúÏúºÎ°ú Ïù¥Ïö©Ïù¥ Í∞ÄÎä•ÌïòÍ≤åÎêòÏñ¥ÏßÑÎã§.</p>

<p><br>
<br></p>

<p><strong><span style="color:#0066CC"> ÏúÑÏùò 1,2Î≤àÏùÑ ÌïúÎßàÎîîÎ°ú Ï†ïÎ¶¨ Ìï¥Î≥¥ÏûêÎ©¥ !! </span></strong></p>

<p>UserDetails Í∞ùÏ≤¥Î•º ÎßåÎì§Ïñ¥ Ï§òÏïºÌïúÎã§.<br>
Í∑∏Î¶¨Í≥† Í∑∏ Í∞ùÏ≤¥Î•º Ïù¥Ïö©Ìï¥ UserDetailsManagerÏùò Íµ¨ÌòÑÏ≤¥Ïù∏<br>
InMemoryUserDetailsManager .createUser(); Î©îÏÑúÎìúÏóê<br>
Îß§Í∞úÎ≥ÄÏàòÎ°ú UserDetails Í∞ùÏ≤¥Î•º ÎÑòÍ≤®Ï£ºÎäîÍ≤å ÎÅùÏù¥Îã§ !</p>

<p><br></p>

<h4 id="h2-dbÎ°ú-Ïù∏Ï¶ù-Ìï¥Î≥¥Í∏∞">H2 DBÎ°ú Ïù∏Ï¶ù Ìï¥Î≥¥Í∏∞</h4>

<p>ÏúÑÏóêÏÑú UserDetailsManagerÎ•º Ïù¥Ïö©Ìï¥ Ïù∏Ï¶ùÍ≥º Í∂åÌïúÏùÑ Í∞ÄÏ°åÎã§Î©¥</p>

<p>DBÎ•º Ïù¥Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî UserDetailsService Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º Ïù¥Ïö©Ìï¥ÏïºÌïúÎã§.<br>
UserDetailsManagerÍ∞Ä UserDetailsServiceÎ•º ÏÉÅÏÜçÎ∞õÏùÄ Í¥ÄÍ≥ÑÏù¥Îã§.</p>

<p>Ïö∞ÏÑ† H2 DB ÏÑ§Ï†ïÍ≥º Í¥ÄÎ†®Îêú Î∂ÄÎ∂ÑÏùÄ ÎêòÏñ¥ÏûàÎã§Í≥† Í∞ÄÏ†ïÌïòÍ≤†Îã§. <br>
Î¨∏Ï†úÏóÜÏù¥ H2 DataBaseÎ•º ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ÏÑúÎäî<br>
Í∏∞Ï°¥Ïóê ÏÑ§Ï†ïÌñàÎçò SecurityFilterChainÏóêÏÑú ÌïúÍ∞ÄÏßÄ FilterÎ•º Ï∂îÍ∞ÄÌï¥Ï§òÏïºÌïúÎã§.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecurityConfiguration</span> <span class="o">{</span>
    
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">SecurityFilterChain</span> <span class="nf">filterChain</span><span class="o">(</span><span class="nc">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
        <span class="n">http</span>
                <span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">frameOptions</span><span class="o">().</span><span class="na">sameOrigin</span><span class="o">()</span>  <span class="c1">// &lt;frame&gt; ÌÉúÍ∑∏Îì± Î†åÎçîÎßÅÏó¨Î∂Ä ÏÑ§Ï†ï, ÎèôÏùº Ï∂úÏ≤òÎ°úÎ∂ÄÌÑ∞ Îì§Ïñ¥Ïò§Îäî requestÎßå Î†åÎçîÎßÅÌóàÏö© , H2 ÏÇ¨Ïö©ÏùÑ ÏúÑÌï®</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">csrf</span><span class="o">().</span><span class="na">disable</span><span class="o">()</span> <span class="c1">// csrf Í≥µÍ≤©Ïóê ÎåÄÌïú ÏÑ§Ï†ï ÎπÑÌôúÏÑ±Ìôî</span>
                <span class="o">.</span><span class="na">formLogin</span><span class="o">()</span><span class="c1">// Form Î°úÍ∑∏Ïù∏ Ïù∏Ï¶ù Î∞©Î≤ï</span>
                <span class="o">.</span><span class="na">loginPage</span><span class="o">(</span><span class="s">"/auths/login-form"</span><span class="o">)</span> <span class="c1">// Î°úÍ∑∏Ïù∏ Ïª§Ïä§ÌÖÄ ÌéòÏù¥ÏßÄ ÏÑ§Ï†ï (Ïö∞Î¶¨Í∞ÄÎßåÎì† Í≤ΩÎ°úÏÑ§Ï†ï)</span>
                <span class="o">.</span><span class="na">loginProcessingUrl</span><span class="o">(</span><span class="s">"/process_login"</span><span class="o">)</span><span class="c1">// Ïù∏Ï¶ùÏöîÏ≤≠ÏùÑ ÏàòÌñâÌï† ÏöîÏ≤≠ URL ÏÑ§Ï†ï (html formÌÉúÍ∑∏ÏóêÏÑú ÏöîÏ≤≠)</span>
                <span class="o">.</span><span class="na">failureUrl</span><span class="o">(</span><span class="s">"/auths/login-form?error"</span><span class="o">)</span><span class="c1">// Ïã§Ìå®Ïãú Î¶¨Îã§Ïù¥Î†âÌä∏Ìï† URL ÏßÄÏ†ï</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">logout</span><span class="o">()</span> <span class="c1">// Î°úÍ∑∏ÏïÑÏõÉ ÏÑ§Ï†ïÏúÑÌïú LogoutConfigurerÎ•º Î¶¨ÌÑ¥Ìï¥Ï§å</span>
                <span class="o">.</span><span class="na">logoutUrl</span><span class="o">(</span><span class="s">"/logout"</span><span class="o">)</span> <span class="c1">// Î°úÍ∑∏ÏïÑÏõÉ ÏöîÏ≤≠ url ÏÑ§Ï†ï (html formÌÉúÍ∑∏ÏóêÏÑú ÏöîÏ≤≠)</span>
                <span class="o">.</span><span class="na">logoutSuccessUrl</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span> <span class="c1">// ÏÑ±Í≥µÏãú Î¶¨Îã§Ïù¥Î†âÌä∏Ìï† Ïû•ÏÜå</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">exceptionHandling</span><span class="o">().</span><span class="na">accessDeniedPage</span><span class="o">(</span><span class="s">"/auths/access-denied"</span><span class="o">)</span> <span class="c1">// Í∂åÌïúÏù¥ ÏóÜÏùÑÎïå Î≥¥ÎÇº ÏöîÏ≤≠</span>
                <span class="o">.</span><span class="na">and</span><span class="o">()</span> <span class="c1">// Î≥¥ÏïàÏÑ§Ï†ïÏùÑ Î©îÏÑúÎìú Ï≤¥Ïù∏ÌòïÌÉúÎ°ú Íµ¨ÏÑ±ÌïòÍ≤å ÎèÑÏôÄÏ§å</span>
                <span class="o">.</span><span class="na">authorizeHttpRequests</span><span class="o">(</span><span class="n">authorize</span> <span class="o">-&gt;</span>
                        <span class="n">authorize</span><span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/orders/**"</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="s">"ADMIN"</span><span class="o">)</span> <span class="c1">// Ìï¥Îãπ Í≤ΩÎ°úÏóê ADMIN Í∂åÌïúÎßå Ï†ëÍ∑ºÍ∞ÄÎä•</span>
                                <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/members/my-page"</span><span class="o">).</span><span class="na">hasRole</span><span class="o">(</span><span class="s">"USER"</span><span class="o">)</span> <span class="c1">// Ìï¥Îãπ Í≤ΩÎ°úÏóê USER Í∂åÌïúÎßå Ï†ëÍ∑ºÍ∞ÄÎä•</span>
                                <span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span> <span class="c1">// ÏïûÏóêÏßÄÏ†ïÌïú URLÏùÑ Ï†úÏô∏ÌïúÍ≤É Ï†ëÍ∑º Î™®ÎëêÍ∞ÄÎä•</span>
                <span class="o">);</span>
<span class="c1">//                .authorizeHttpRequests() // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò ÏöîÏ≤≠Ïù¥ Îì§Ïñ¥Ïò§Î©¥ Ï†ëÍ∑ºÍ∂åÌïúÏùÑ ÌôïÏù∏ÌïòÍ≤†Îã§Í≥† Ï†ïÏùò</span>
<span class="c1">//                .anyRequest() // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò Î™®Îì† ÏöîÏ≤≠Ïóê ÎåÄÌï¥ Ï†ëÍ∑ºÏùÑ ÌóàÏö©</span>
<span class="c1">//                .permitAll(); // ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïùò Î™®Îì† ÏöîÏ≤≠Ïóê ÎåÄÌï¥ Ï†ëÍ∑ºÏùÑ ÌóàÏö©</span>
        <span class="k">return</span> <span class="n">http</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>.headers().frameOptions().sameOrigin()<br>
Î©îÏÑúÎìúÎì§Ïù¥ Ï∂îÍ∞ÄÎêòÏóàÍ≥†, Ï∂îÍ∞ÄÌïòÏßÄ ÏïäÏúºÎ©¥</p>

<p><img src="https://user-images.githubusercontent.com/95069395/217755503-ba33cc3c-3f37-4394-be05-3cae8236aebc.png" alt="image" class="align-left" style="max-width: 100%"></p>

<p>ÏúÑÏùò ÌôîÎ©¥Í≥º Í∞ôÏù¥ Ï†ïÏÉÅÏ†ÅÏúºÎ°ú H2 DataBaseÍ∞Ä ÌëúÏãúÎêòÏßÄ ÏïäÏùÑ Ïàò ÏûàÎã§.</p>

<p><br></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
*  DB ÏÇ¨Ïö©ÏùÑ ÏúÑÌïú ÎπàÏ£ºÏûÖ
* */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaConfigurationV2</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">MemberService</span> <span class="nf">dbMemberService</span><span class="o">(</span><span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">DBMemberServiceV1</span><span class="o">(</span><span class="n">memberRepository</span><span class="o">,</span><span class="n">passwordEncoder</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Í∏∞Ï°¥Ïóê InMemoryÎ•º ÏÇ¨Ïö©ÌïòÍ∏∞ ÏúÑÌï¥ ÏÑ§Ï†ïÌñàÎçò Íµ¨ÏÑ±Ï†ïÎ≥¥Î•º ÏßÄÏö∞Í≥†<br>
ÏÉàÎ°úÏö¥ Íµ¨ÏÑ±Ï†ïÎ≥¥Î•º ÏÑ§Ï†ï. DBMemberServiceÍ∞Ä Ï†ÅÏö©ÎêòÎèÑÎ°ù Ïä§ÌîÑÎßÅ ÎπàÏúºÎ°ú Îì±Î°ùÌñàÎã§.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Transactional</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DBMemberServiceV1</span> <span class="kd">implements</span> <span class="nc">MemberService</span> <span class="o">{</span>

   <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">;</span>

   <span class="kd">public</span> <span class="nf">DBMemberServiceV1</span><span class="o">(</span><span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">memberRepository</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">passwordEncoder</span> <span class="o">=</span> <span class="n">passwordEncoder</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="nc">Member</span> <span class="nf">createMember</span><span class="o">(</span><span class="nc">Member</span> <span class="n">member</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">verifyExistsEmail</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span>
      <span class="nc">String</span> <span class="n">encryptedPassword</span> <span class="o">=</span> <span class="n">passwordEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">getPassword</span><span class="o">());</span> <span class="c1">// ÎπÑÎ∞ÄÎ≤àÌò∏ ÏïîÌò∏Ìôî</span>
      <span class="n">member</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">encryptedPassword</span><span class="o">);</span> <span class="c1">// ÏïîÌò∏ÌôîÎêú ÎπÑÎ∞ÄÎ≤àÌò∏ Í∞ùÏ≤¥Ïóê ÎßµÌïë</span>

      <span class="nc">Member</span> <span class="n">saveMember</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">member</span><span class="o">);</span> <span class="c1">// DBÏóê Ï†ÄÏû•</span>

      <span class="k">return</span> <span class="n">saveMember</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">private</span> <span class="kt">void</span> <span class="nf">verifyExistsEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">member</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nf">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span><span class="o">.</span><span class="na">MEMBER_EXISTS</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>DBMemberServiceÏóêÏÑúÎäî<br>
ÎπÑÎ∞ÄÎ≤àÌò∏ ÏïîÌò∏ÌôîÎ•º Ìïú Í≤ÉÏùÑ member Í∞ùÏ≤¥Ïóê Îã¥ÏïÑ<br>
RepositoryÏóê Ï†ÄÏû•ÌïòÍ≤åÎßå Íµ¨ÏÑ±Ìï¥Ï£ºÎ©¥ ÎÅùÎÇúÎã§.</p>

<p>Ïù∏Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Ìï†ÎïåÏóêÎäî UserDetailsManagerÏóêÎã§Í∞Ä Ï†ÄÏû•ÌñàÏßÄÎßå<br>
Ïù¥Ï†úÎäî DBMemberServiceÎäî ÌöåÏõêÍ∞ÄÏûÖÏù¥ÎùºÎäî<br>
ÏÑúÎπÑÏä§ Î°úÏßÅÎßå ÎÇ®Í≤å Îêú Í≤ÉÏù¥Îã§.</p>

<p>Ïù¥Ï†ú ÌöåÏõêÍ∞ÄÏûÖÏùÑÌïòÏòÄÍ≥†<br>
Î°úÍ∑∏Ïù∏ÏùÑ ÌïòÏòÄÏùÑÎïå UserDetailsManagerÏôÄ Í∞ôÏùÄ Ïó≠Ìï†ÏùÑ Íµ¨ÌòÑÌï¥Ï§òÏïºÌïúÎã§.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
* DBÏÇ¨Ïö©ÌñàÏùÑÎïå Ïù∏Ï¶ù Ï≤òÎ¶¨ Ï†ÅÏö©ÌïòÍ∏∞ (Ïù∏Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Ïãú Í∏∞Ï°¥ UserDetailManagerÎ•º ÏÇ¨Ïö©ÌñàÏóàÏùå)
* UserDetailsServiceÎäî UserÏ†ïÎ≥¥Î•º Î°úÎìúÌïòÎäî ÌïµÏã¨Ï†ÅÏù∏ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Îã§.
* UserDetailManagerÎäî UserDetailsServiceÎ•º ÏÉÅÏÜçÌïòÍ≥†ÏûàÏùå
* */</span>
<span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloUserDetailsServiceV1</span> <span class="kd">implements</span> <span class="nc">UserDetailsService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">HelloAuthorityUtils</span> <span class="n">authorityUtils</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">HelloUserDetailsServiceV1</span><span class="o">(</span><span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">,</span> <span class="nc">HelloAuthorityUtils</span> <span class="n">authorityUtils</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">memberRepository</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">authorityUtils</span> <span class="o">=</span> <span class="n">authorityUtils</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/*
    * UserDetailService Ïò§Î≤ÑÎùºÏù¥Îî©ÌïòÏó¨ UserDetails Í∞ùÏ±ÑÎ•º ÎßåÎì§Ïñ¥ Î∞òÌôòÌïòÍ∏∞
    * Ïù¥ÌõÑÎäî Ïä§ÌîÑÎßÅÏãúÌÅêÎ¶¨Ìã∞Í∞Ä Ïù∏Ï¶ùÏ≤òÎ¶¨Î•º ÎåÄÏã†Ìï¥Ï§ÄÎã§
    * */</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">UserDetails</span> <span class="nf">loadUserByUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">UsernameNotFoundException</span> <span class="o">{</span>
        <span class="c1">// Ìï¥Îãπ Î©îÏÑúÎìú Ìò∏Ï∂ú ÏãúÏ†êÏùÄ, login.htmlÏóêÏÑú Î°úÍ∑∏Ïù∏ Î≤ÑÌäº ÎàÑÎ•ºÎñÑÏù¥Îã§.</span>
        <span class="c1">// Ï¶â, &lt;form action="/process_login" method="post"&gt; Í∞Ä Ïã§ÌñâÎê†ÎñÑ Ìò∏Ï∂úÎê®</span>
        <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Member</span><span class="o">&gt;</span> <span class="n">optionalMember</span> <span class="o">=</span> <span class="n">memberRepository</span><span class="o">.</span><span class="na">findByEmail</span><span class="o">(</span><span class="n">username</span><span class="o">);</span> <span class="c1">// Ïù¥Î©îÏùºÎ°ú Î©§Î≤ÑÏ∞æÍ∏∞</span>
        <span class="nc">Member</span> <span class="n">findMember</span> <span class="o">=</span> <span class="n">optionalMember</span><span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">BusinessLogicException</span><span class="o">(</span><span class="nc">ExceptionCode</span><span class="o">.</span><span class="na">MEMBER_NOT_FOUND</span><span class="o">));</span> <span class="c1">// Î©§Î≤Ñ Ï∞æÍ∏∞ ÏòàÏô∏ Ï≤òÎ¶¨</span>
        <span class="nc">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">GrantedAuthority</span><span class="o">&gt;</span> <span class="n">authorities</span> <span class="o">=</span> <span class="n">authorityUtils</span><span class="o">.</span><span class="na">createAuthorities</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getEmail</span><span class="o">());</span> <span class="c1">// Ïù¥Î©îÏùº ÎπÑÍµêÌõÑ Í∂åÌïú Ï≤òÎ¶¨</span>
        <span class="nc">UserDetails</span> <span class="n">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="n">findMember</span><span class="o">.</span><span class="na">getEmail</span><span class="o">(),</span> <span class="n">findMember</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="n">authorities</span><span class="o">);</span> <span class="c1">// Ìï¥Îãπ Ï†ïÎ≥¥Î°ú UserÏÉùÏÑ±ÏûêÎ°ú UserDetails ÎßåÎì§Í∏∞</span>
        <span class="k">return</span> <span class="n">user1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Ïö∞Î¶¨Îäî UserDetailsServiceÎ•º Íµ¨ÌòÑÌï† ÌÅ¥ÎûòÏä§Î•º ÎßåÎì§Ïñ¥<br>
ÏÉÅÏÜçÏùÑ Î∞õÍ≤å ÎßåÎì§Ïñ¥Ï§ÄÎã§Ïùå. loadUserByUsername Ïò§Î≤ÑÎùºÏù¥Îî©Ìï¥<br>
Ïû¨Ï†ïÏùòÎ•º Ìï¥ÏÑú Î∞òÌôòÏùÑ UserDetails Í∞ùÏ≤¥Î°ú ÎßåÎì§Ïñ¥ Î∞òÌôòÏùÑ Ìï¥Ï£ºÎ©¥ÎêúÎã§.</p>

<p>ÌöåÏõêÍ∞ÄÏûÖÏùÄ Ïù¥ÎØ∏ ÎêòÏñ¥ÏûàÍ≥†, ÏïîÌò∏ÌôîÍπåÏßÄÌï¥ ÎÜìÏùÄ ÏÉÅÌÉúÎ°ú DBÏóê Ï†ÄÏû•ÎêòÏñ¥ÏûàÎã§.<br>
Ïö∞Î¶¨Í∞Ä Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÏóêÏÑú form loginÏúºÎ°ú post Î©îÏÑúÎìú /process_loginÏùÑ Ìò∏Ï∂úÌïòÍ≤åÎêòÎ©¥<br>
Ïö∞Î¶¨Í∞Ä ÏúÑÏóêÏÑú Î¥§Îçò ÌùêÎ¶ÑÎåÄÎ°ú EndPointÍπåÏßÄ Í∞ÄÍ∏∞Ï†ÑÏóê<br>
Servlet FilterÍ∞Ä ÌùêÎ¶ÑÏùÑ Í∞ÄÎ°úÏ±ÑÏÑú Ïã§ÌñâÌïòÍ≤å ÎêòÍ≥†<br>
Ïö∞Î¶¨Îäî Spring SecurityÎ•º ÏÇ¨Ïö©ÌïòÍ≥† ÏûàÍ∏∞ÎïåÎ¨∏Ïóê Ïù∏Ï¶ù Ï†àÏ∞®Î•º Í∞ÄÏßÄÍ≤åÎêúÎã§.</p>

<p><img src="https://user-images.githubusercontent.com/95069395/217755504-6918bbb3-ea35-4a21-aad2-3e4c6f79c8fd.png" alt="image" class="align-left" style="max-width: 100%"></p>

<p>Ïù∏Ï¶ù Ï†àÏ∞®Îäî Ïã§Ï†úÎ°ú Ïù¥Îü¨Ìïú ÌùêÎ¶ÑÏùÑ ÏßÑÌñâÎêúÎã§Í≥†ÌïúÎã§.</p>

<ol>
  <li>
    <p>ÏÇ¨Ïö©ÏûêÍ∞Ä Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥ÏôÄ Ìï®Íªò Ïù∏Ï¶ù ÏöîÏ≤≠ÏùÑ ÌïúÎã§.(Http Request)</p>
  </li>
  <li>
    <p>AuthenticationFilterÍ∞Ä ÏöîÏ≤≠ÏùÑ Í∞ÄÎ°úÏ±ÑÍ≥†, Í∞ÄÎ°úÏ±à Ï†ïÎ≥¥Î•º ÌÜµÌï¥<br>
UsernamePasswordAuthenticationTokenÏùò Ïù∏Ï¶ùÏö© Í∞ùÏ≤¥Î•º ÏÉùÏÑ±ÌïúÎã§.</p>
  </li>
  <li>
    <p>AuthenticationManagerÏùò Íµ¨ÌòÑÏ≤¥Ïù∏ ProviderManagerÏóêÍ≤å ÏÉùÏÑ±Ìïú <br>
UsernamePasswordToken Í∞ùÏ≤¥Î•º Ï†ÑÎã¨ÌïúÎã§.</p>
  </li>
  <li>
    <p>AuthenticationManagerÎäî Îì±Î°ùÎêú AuthenticationProvider(Îì§)ÏùÑ Ï°∞ÌöåÌïòÏó¨ Ïù∏Ï¶ùÏùÑ ÏöîÍµ¨ÌïúÎã§.</p>
  </li>
  <li>
    <p>Ïã§Ï†ú DBÏóêÏÑú ÏÇ¨Ïö©Ïûê Ïù∏Ï¶ùÏ†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò§Îäî UserDetailsServiceÏóê ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º ÎÑòÍ≤®Ï§ÄÎã§.</p>
  </li>
  <li>
    <p>ÎÑòÍ≤®Î∞õÏùÄ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º ÌÜµÌï¥ DBÏóêÏÑú Ï∞æÏùÄ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Ïù∏ UserDetails Í∞ùÏ≤¥Î•º ÎßåÎì†Îã§.</p>
  </li>
  <li>
    <p>AuthenticationProvider(Îì§)ÏùÄ UserDetailsÎ•º ÎÑòÍ≤®Î∞õÍ≥† ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º ÎπÑÍµêÌïúÎã§.</p>
  </li>
  <li>
    <p>Ïù∏Ï¶ùÏù¥ ÏôÑÎ£åÎêòÎ©¥ Í∂åÌïú Îì±Ïùò ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º Îã¥ÏùÄ Authentication Í∞ùÏ≤¥Î•º Î∞òÌôòÌïúÎã§.</p>
  </li>
  <li>
    <p>Îã§Ïãú ÏµúÏ¥àÏùò AuthenticationFilterÏóê Authentication Í∞ùÏ≤¥Í∞Ä Î∞òÌôòÎêúÎã§.</p>
  </li>
  <li>
    <p>Authenticaton Í∞ùÏ≤¥Î•º SecurityContextÏóê Ï†ÄÏû•ÌïúÎã§.</p>
  </li>
</ol>

<p><a href="https://dev-coco.tistory.com/174">Ï∂úÏ≤ò - Ïä¨Í∏∞Î°úÏö¥ Í∞úÎ∞úÏÉùÌôú</a></p>

<p><br></p>

<p>Ï¶â, Ïö∞Î¶¨Í∞Ä Íµ¨ÌòÑÌï¥Ï§òÏïºÌï† Î∂ÄÎ∂ÑÏùÄ<br>
5Î≤àÏóêÏÑú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î•º Î∞õÎäî Í≤ÉÏùÑ Ïù¥Ïö©Ìï¥<br>
6Î≤à, Î∞õÏùÄ Ï†ïÎ≥¥Î•º Ïù¥Ïö©Ìï¥ UserDetails Í∞ùÏ≤¥Î•º Î∞òÌôòÎßå ÏãúÏºúÏ£ºÎ©¥<br>
Í∑∏ Ïù¥ÌõÑÎäî 7Î≤à Î∂ÄÌÑ∞ Spring SecurityÍ∞Ä ÏïåÏïÑÏÑú ÏßÑÌñâÏãúÏºúÏ§ÄÎã§.</p>

<p>Ïù¥Î•º ÌÜ†ÎåÄÎ°ú ÏúÑÏóê ÌîÑÎ°úÍ∑∏Îû®ÏùÑ ÏûëÏÑ±Ìï¥ ÎÜìÏùÄ Í≤ÉÏùÑ Î≥¥Î©¥<br>
Ïò§Î≤ÑÎùºÏù¥Îî©Ìïú loadUserByUsername Î©îÏÑúÎìúÎ•º ÌÜµÌï¥ÏÑú<br>
usernameÏùÑ Îß§Í∞úÎ≥ÄÏàòÎ°ú Ï†ïÎ≥¥Î•º Î∞õÎäîÎã§.<br>
Ìï¥Îãπ Ï†ïÎ≥¥Î°ú DBÎ•º Ï°∞ÌöåÌïúÎã§Ïùå, UserDetails Í∞ùÏ≤¥Î•º Î∞òÌôòÏãúÏºúÏ£ºÎäî ÌîÑÎ°úÍ∑∏Îû®Ïù¥Îã§.</p>

<p><br></p>

<p><strong><span style="color:#0066CC"> ÏúÑÏùò ÏñòÍ∏∞Î•º ÌïúÎßàÎîîÎ°ú Ï†ïÎ¶¨ Ìï¥Î≥¥ÏûêÎ©¥ !! </span></strong></p>

<p>UserDetailsService Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º Íµ¨ÌòÑÌïú ÌÅ¥ÎûòÏä§Î•º ÎßåÎì†Îã§.<br>
loadUserByUsername(); Î©îÏÑúÎìúÎ•º Ïò§Î≤ÑÎùºÏù¥Îî©ÌïòÏó¨ Îß§Í∞úÎ≥ÄÏàòÎ°ú username Ï†ïÎ≥¥Î•º Î∞õÏùÑ Ïàò ÏûàÎã§.<br>
usernameÏ†ïÎ≥¥Î•º Ïù¥Ïö©Ìï¥ DBÏóê Ï°∞ÌöåÎ•º ÌïúÎã§.<br>
Ï°∞ÌöåÌïú Îç∞Ïù¥ÌÑ∞Î•º ÌÜ†ÎåÄÎ°ú UserDetails Í∞ùÏ≤¥Î•º ÎßåÎì§Ïñ¥ Î∞òÌôòÎßå ÏãúÏºúÏ£ºÎ©¥ ÎêúÎã§.<br>
Ïù¥ÌõÑÎäî Spring SecurityÍ∞Ä ÏïåÏïÑÏÑú Ìï¥Ï§å</p>

<p><br></p>

<h3 id="Ïò§Îäò-ÎßåÎÇú-error">Ïò§Îäò ÎßåÎÇú ERROR</h3>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in com.codestates.member.MemberController required a single bean, but 2 were found:
	- inMemoryMemberService: defined by method 'inMemoryMemberService' in class path resource [com/codestates/config/JavaConfigurationV1.class]
	- dbMemberService: defined by method 'dbMemberService' in class path resource [com/codestates/config/JavaConfigurationV2.class]
</code></pre></div></div>
<p>Ïò§Îäò ÌÖåÏä§Ìä∏ Ï§ë ÎßåÎÇ¨Îçò ÏóêÎü¨Îã§. <br>
ÎÇ¥Ïö©ÏùÄ MemberControllerÏóêÏÑú Ïã±Í∏ÄÎπàÏùÑ ÏöîÍµ¨ÌïúÎäîÎç∞ 2Í∞úÍ∞Ä ÏûàÎã§Îäî Í≤É Í∞ôÏùÄ ÎÇ¥Ïö©Ïù¥Îã§.<br>
Ï¶â, Í∞ôÏùÄ ÌÉÄÏûÖÏùò ÎπàÏù¥ ÎëêÍ∞úÍ∞Ä Îì±Î°ùÎêú Î¨∏Ï†úÎùºÍ≥† ÏÉùÍ∞ÅÌñàÎã§.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Action:

Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed
</code></pre></div></div>
<p>Î∞ëÏóê ÏïÑÏ£ºÏπúÏ†àÌïòÍ≤å @PrimaryÎÇò  @QualifierÎ•º ÏÇ¨Ïö©ÌïòÎùºÌïúÎã§.</p>

<p><br></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
*  InMemory ÏÇ¨Ïö©ÏùÑ ÏúÑÌïú ÎπàÏ£ºÏûÖ
* */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaConfigurationV1</span> <span class="o">{</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">MemberService</span> <span class="nf">inMemoryMemberService</span><span class="o">(</span><span class="nc">UserDetailsManager</span> <span class="n">userDetailsManager</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">InMemoryMemberService</span><span class="o">(</span><span class="n">userDetailsManager</span><span class="o">,</span><span class="n">passwordEncoder</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
*  DB ÏÇ¨Ïö©ÏùÑ ÏúÑÌïú ÎπàÏ£ºÏûÖ
* */</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaConfigurationV2</span> <span class="o">{</span>
    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">MemberService</span> <span class="nf">dbMemberService</span><span class="o">(</span><span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">DBMemberService</span><span class="o">(</span><span class="n">memberRepository</span><span class="o">,</span><span class="n">passwordEncoder</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>MemberControlerÏóêÏÑúÎäî MemberServiceÎ•º DIÎ∞õÍ≤å ÏÑ§Í≥ÑÌï¥ÎÜìÏïòÍ≥†</p>

<p>MemberServiceÎùºÎäî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Î•º Íµ¨ÌòÑÌïú<br>
ÌÅ¥ÎûòÏä§ inMemoryMemberServie, DBMemberService ÎëêÍ∞úÎ•º<br>
ÎπàÏúºÎ°ú Îì±Î°ùÌïòÎ†§Í≥† ÏãúÎèÑÌïòÎãàÍπå Î∞úÏÉùÌïú ÏïåÎûåÏù∏ Í≤É Í∞ôÎã§.</p>

<p>Ïó¨Í∏∞ÏÑú @ConfigurationÏùÑ ÌïúÍµ∞Îç∞Î•º ÏßÄÏõåÏ£ºÎ©¥<br>
Ï§ëÎ≥µÎêòÏßÄ ÏïäÍ≥† Ìï¥Í≤∞ Ìï† Ïàò ÏûàÎã§.</p>

<p>ÌïòÏßÄÎßå ÏΩîÎìúÎäî Í∑∏ÎåÄÎ°ú Ïú†ÏßÄÏã∂ÏóàÍ∏∞Ïóê</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaConfigurationV2</span> <span class="o">{</span>
    <span class="nd">@Bean</span>
    <span class="nd">@Primary</span>
    <span class="kd">public</span> <span class="nc">MemberService</span> <span class="nf">dbMemberService</span><span class="o">(</span><span class="nc">MemberRepository</span> <span class="n">memberRepository</span><span class="o">,</span> <span class="nc">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">DBMemberService</span><span class="o">(</span><span class="n">memberRepository</span><span class="o">,</span> <span class="n">passwordEncoder</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>JavaConfigurationV2Ïóê ÎπàÎì±Î°ù Î©îÏÑúÎìúÏóê @PrimaryÎ•º Ïù¥Ïö©Ìï¥<br>
ÎπàÏùÑ ÏÑ†ÌÉùÌï¥ Ï£ºÏûÖÌï¥Ï£ºÎèÑÎ°ù Ï†ïÌñàÎã§.</p>

<hr>

<p>Ïò§ÎäòÏùÄ Ïù¥Î†áÍ≤å Ïä§ÌîÑÎßÅ ÏãúÌÅêÎ¶¨Ìã∞Ïùò Í∏∞Î≥∏Ï†ÅÏù∏<br>
ÏÇ¨Ïö©Î∞©Î≤ïÏùÑ ÏïåÏïÑÎ≥¥ÏïòÎã§.</p>

<p>ÎÇ¥Î∂ÄÏ†ÅÏúºÎ°ú Ïù¥Î£®Ïñ¥ÏßÄÎäî ÏûëÏóÖÎì§Ïù¥ ÎßéÏïÑ Ï†ïÌôïÌïú<br>
ÌùêÎ¶ÑÏù¥ Í∞êÏù¥ Ïû°ÌûàÏßà ÏïäÎäî Í≤É Í∞ôÎã§.<br>
Í∏ÄÏùÑ Ï†ÅÏúºÎ©¥ÏÑúÎèÑ ÎÇ¥Í∞Ä Ï†ïÌôïÌûà Ïù¥Ìï¥ÌïúÍ≤å ÎßûÎäîÏßÄ ÏàòÏã≠Î≤àÏùÑ ÎèåÏïÑÍ∞ÄÏÑú ÌôïÏù∏ÌïòÍ≥† Î∞òÎ≥µÌñàÎã§. <br>
ÌôïÏù∏ÌñàÎã§Í≥† ÌïúÎì§‚Ä¶ Ï†ïÌôïÌïú Ï†ïÎ≥¥Î•º Ï†ÅÏùÄ Í≤É Í∞ôÏßÄ ÏïäÏùÄ ÎäêÎÇåÏù¥Îì†Îã§.<br>
Í≥ÑÏÜç ÏùµÏàôÌï¥ÏßÄÍ≤å ÏÇ¨Ïö©Ìï¥Î≥¥Î©¥ÏÑú ÏÇ¨Ïö©Î≤ïÏóê ÏùµÏàôÌï¥Ï†∏Î≥¥Ïûê</p>

<p>Ïò§ÎäòÍ≥µÎ∂ÄÎäî Ïó¨Í∏∞ÏÑú ÎÅù !!</p>

<p><br></p>

<p><span style="color:#994C00"><strong>Ïò§ÎäòÏùò Ïª§ÌîºÎüâ</strong></span>: ‚òïÔ∏è ‚òïÔ∏è<br>
<strong>Ïò§ÎäòÏùò Ï†êÏã¨</strong>: ÏßúÏû•Î©¥, ÌÉïÏàòÏú°</p>


    </div>

</article>
<div class="post-nav">
<a class="previous" href="/til/2022/11/17/til.html" title="TIL) Ïù∏Ï¶ù, Î≥¥Ïïà Í∏∞Ï¥à">TIL) Ïù∏Ï¶ù, Î≥¥Ïïà Í∏∞Ï¥à</a><a class="next" href="/til/2022/11/21/til.html" title="TIL) Spring Security 2 (Ïù∏Ï¶ùÏ≤òÎ¶¨)">TIL) Spring Security 2 (Ïù∏Ï¶ùÏ≤òÎ¶¨)</a>
</div>
<div class="post-related">
      <div>Related Articles</div>
      <ul>
        <li><a class="post-link" href="/til/2022/11/07/til.html" title="TIL) Spring Security 2 (Ïù∏Ï¶ùÏ≤òÎ¶¨)">TIL) Spring Transaction 2 , Event ÎπÑÎèôÍ∏∞ Ï†ÅÏö©</a></li>
<li><a class="post-link" href="/til/2022/09/02/til.html" title="TIL) Spring Security 2 (Ïù∏Ï¶ùÏ≤òÎ¶¨)">TIL) Java Í∞ùÏ≤¥ÏßÄÌñ• - ÌÅ¥ÎûòÏä§, ÌïÑÎìú, Î©îÏÑúÎìú</a></li>
<li><a class="post-link" href="/til/2022/09/29/til.html" title="TIL) Spring Security 2 (Ïù∏Ï¶ùÏ≤òÎ¶¨)">TIL) Java Algorithm 3</a></li>
<li><a class="post-link" href="/til/2022/10/18/til.html" title="TIL) Spring Security 2 (Ïù∏Ï¶ùÏ≤òÎ¶¨)">TIL) Spring AOP 2</a></li>
</ul>
    </div>
<div class="post-comments">
<div id="utterances-placeholder"></div>
<script>
  const utterancesThemeFromDataTheme = () => {
    const dataTheme = document.documentElement.getAttribute('data-theme');
    return `github-${dataTheme}`;
  };

  const setUtterancesTheme = () => {
    const iframe = document.querySelector('.utterances-frame');
    if (iframe) {
      const message = {
        type: 'set-theme',
        theme: utterancesThemeFromDataTheme()
      };
      iframe.contentWindow.postMessage(message, 'https://utteranc.es');
    }
  }

  // dynamic change
  const observer = new MutationObserver((mutationsList, observer) => {
    for (let mutation of mutationsList) {
      if (mutation.type === 'attributes' && mutation.attributeName === 'data-theme') {
        setUtterancesTheme();
      }
    }
  });
  observer.observe(document.documentElement, { attributes: true, childList: false, subtree: false });

  let utterancesScript = document.createElement('script');
  utterancesScript.async = true;
  utterancesScript.src = 'https://utteranc.es/client.js';
  utterancesScript.crossOrigin = 'anonymous';
  utterancesScript.setAttribute('issue-term', 'pathname');
  utterancesScript.setAttribute('label', 'utterances comment');
  utterancesScript.setAttribute('repo', 'MyCatlikesChuru/blogComment');
  utterancesScript.setAttribute('theme', utterancesThemeFromDataTheme());

  const placeholder = document.getElementById('utterances-placeholder');
  placeholder.parentNode.replaceChild(utterancesScript, placeholder);
</script>
</div></section>
</div>


  </section>
  <section class="sidebar" style="margin-left: 15px;">
    <!-- Get sidebar items --><style type="text/css" media="screen">
.post-menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
</style>

<div class="post-menu">
  <div class="post-menu-title">TOC</div>
  <div class="post-menu-content"></div>
</div>

<script>
  function generateContent() {
    var menu = document.querySelector(".post-menu");
    var menuContent =  menu.querySelector(".post-menu-content");
    var headings = document.querySelector(".post-content").querySelectorAll("h2, h3, h4, h5, h6");

    // Hide menu when no headings
    if (headings.length === 0) {
      return menu.style.display = "none";
    }

    // Generate post menu
    var menuHTML = '';
    for (var i = 0; i < headings.length; i++) {
      var h = headings[i];
      menuHTML += (
        '<li class="h-' + h.tagName.toLowerCase() + '">'
        + '<a href="#h-' + h.getAttribute('id') + '">' + h.textContent + '</a></li>');
    }

    menuContent.innerHTML = '<ul>' + menuHTML + '</ul>';

    // The header element
    var header = document.querySelector('header.site-header');

    function doMenuCollapse(index, over_items) {
      var items = menuContent.firstChild.children;

      if (over_items == undefined) {
        over_items = 20;
      }

      if (items.length < over_items) {
        return;
      }

      var activeItem = items[index];
      var beginItem = activeItem
      var endItem = activeItem
      var beginIndex = index;
      var endIndex = index + 1;
      while (beginIndex >= 0
        && !items[beginIndex].classList.contains('h-h2')) {
        beginIndex -= 1;
      }
      while (endIndex < items.length
        && !items[endIndex].classList.contains('h-h2')) {
        endIndex += 1;
      }
      for (var i = 0; i < beginIndex; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
      for (var i = beginIndex + 1; i < endIndex; i++) {
        item = items[i]
        // if (!item.classList.contains('h-h2')) {
          item.style.display = '';
        // }
      }
      for (var i = endIndex; i < items.length; i++) {
        item = items[i]
        if (!item.classList.contains('h-h2')) {
          item.style.display = 'none';
        }
      }
    }

    // Init menu collapsed
    doMenuCollapse(-1);

    // Active the menu item
    window.addEventListener('scroll', function (event) {
      var lastActive = menuContent.querySelector('.active');
      var changed = true;
      var activeIndex = -1;
      for (var i = headings.length - 1; i >= 0; i--) {
        var h = headings[i];
        var headingRect = h.getBoundingClientRect();
        var headerRect = header.getBoundingClientRect();
        var headerTop = Math.floor(headerRect.top);
        var headerHeight = Math.floor(headerRect.height);
        var headerHeight = headerTop + headerHeight + 20;
        if (headingRect.top <= headerHeight) {
          var id = 'h-' + h.getAttribute('id');
          var a = menuContent.querySelector('a[href="#' + id  + '"]');
          var curActive = a.parentNode;
          if (curActive) {
            curActive.classList.add('active');
            activeIndex = i;
          }
          if (lastActive == curActive) {
            changed = false;
          }
          break;
        }
      }
      if (changed) {
        if (lastActive) {
          lastActive.classList.remove('active');
        }
        doMenuCollapse(activeIndex);
      }
      event.preventDefault();
    });
  }
  generateContent();
</script>
</section>
</div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="site-footer-inner">
<div>Unpublished Work <span class="copyleft">¬©</span> 2017-2023 LEE JAEHYEOK</div>
      <div>Powered by <a title="Jekyll is a simple, blog-aware, static site
      generator." href="https://jekyllrb.com/">Jekyll</a> &amp; <a title="Yat, yet
      another theme." href="https://github.com/jeffreytse/jekyll-theme-yat">Yat Theme</a>.</div>
      <div class="footer-col rss-subscribe">Subscribe <a href="/feed.xml">via RSS</a>
</div>
    </div>
  </div>
</footer>
</body>
</html>
